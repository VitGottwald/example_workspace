*        %GOTO JPCKPCMT;          /* Bilingual Mapping Macro            00010000
         MACRO                                                          00020000
         IAZJPCKP                                                       00030000
.*/      %JPCKPCMT: ;                                             /* */ 00040000
*                                                                       00050000
*/**** START OF SPECIFICATIONS *******************************          00060000
.****PROPRIETARY-STATEMENT************************************          00070000
.*01* PROPRIETARY STATEMENT:                                 *          00080000
.*                                                           *          00090000
.*   LICENSED MATERIALS-PROPERTY OF IBM                      *          00100000
.*   5650-ZOS Copyright IBM Corp. 2019                       *          00110000
.*                                                           *          00120000
.*   STATUS:  HBB77C0                                        *          00130000
.*                                                           *          00140000
.****END-OF-PROPRIETARY-STATEMENT*****************************          00150000
*                                                            *          00160000
*01* DESCRIPTIVE NAME: CKPT information parameter list for   *          00170000
*                      SSI 82 (JES2 only)                    *          00180000
*02*  ACRONYM:  IAZJPCKP                                     *          00190000
*                                                            *          00200000
*                                                            *          00210000
*01* MACRO NAME:  IAZJPCKP                                   *          00220000
*                                                            *          00230000
*01* DSECT NAME:  JPCKP                                      *          00240000
*01* LABEL PREFIX:  JCIP                                     *          00250000
*                                                            *          00260000
*01* COMPONENT ID:  JES Common (SC141)                       *          00270000
*                                                            *          00280000
*01* EXTERNAL CLASSIFICATION:                                *          00290000
*02*  GUPI:  BASE                                            *          00300000
*02*  DMTI:  FIELDS                                          *          00310000
*            JCIPSTRP  JCIPSTOR  JCIPSTHL  JCIPSTID          *          00320000
*            JCIPSTSP  JCIPSTPL  JCIPSTTL  JCIPSTNX          *          00330000
*            JCIPSTCP  JCIPSTBG  JCIPSTSZ  JCIHDSZ           *          00340000
*            JCIGENSZ  JCIGFSTR  JCIFSIZE                    *          00350000
*                                                            *          00360000
*01* END OF EXTERNAL CLASSIFICATION:                         *          00370000
*                                                            *          00380000
*01* EYE-CATCHER:  JESCKPTI                                  *          00390000
*02*  OFFSET:      JCIPID                                    *          00400000
*02*  LENGTH:      L'JCIPID                                  *          00410000
*                                                            *          00420000
*01* STORAGE ATTRIBUTES:                                     *          00430000
*02*  SUBPOOL: Parameter List = Subpool of Caller            *          00440000
*              Output Data    = Subpool 230                  *          00450000
*02*  KEY:     Parameter List = Key of Caller                *          00460000
*              Output Data    = Key 1                        *          00470000
*02*  RESIDENCY:                                             *          00480000
*      Virtual = 31 bit private storage                      *          00490000
*      real    = 64 bit storage                              *          00500000
*02*  FREQUENCY = 1 per call to function code 82 with        *          00510000
*                 function request byte of SSJPCKOD.         *          00520000
*                                                            *          00530000
*01* SIZE:                                                   *          00540000
*                                                            *          00550000
*     See JCIPSZE                                            *          00560000
*                                                            *          00570000
*01* CREATED BY:                                             *          00580000
*                                                            *          00590000
*     Caller of SSI function 'SSOBSSJP' = 82                 *          00600000
*                                                            *          00610000
*01* POINTED TO BY:                                          *          00620000
*                                                            *          00630000
*     SSJPUSER in the SSOB extension                         *          00640000
*                                                            *          00650000
*01* SERIALIZATION:                                          *          00660000
*                                                            *          00670000
*     None                                                   *          00680000
*                                                            *          00690000
*01* FUNCTION:                                               *          00700000
*                                                            *          00710000
*     This macro provides the mapping of the parameter       *          00720000
*     list used by programs to request checkpoint data from  *          00730000
*     the JES subsystem.                                     *          00740000
*                                                            *          00750000
*01* METHOD OF ACCESS:                                       *          00760000
*                                                            *          00770000
*02*  ASM:                                                   *          00780000
*      IAZJPCKP                                              *          00790000
*                                                            *          00800000
*02*  PL/X:                                                  *          00810000
*      %DCL JPCKP_ATRB CHAR                                  *          00820000
*      %JPCKP_ATRB = 'value'                                 *          00830000
*      %INCLUDE SYSLIB(IAZJPCKP)                             *          00840000
*                                                            *          00850000
*      where value is valid control block attributes,        *          00860000
*      such as 'BASED(SSJPUSER)'.  If JPCKP_ATRB='',         *          00870000
*      then 'BASED' will be used.                            *          00880000
*                                                            *          00890000
*01* USED BY:                                                *          00900000
*                                                            *          00910000
*     This is used by programs to request checkpoint data    *          00920000
*     from the JES subsystem.                                *          00930000
*                                                            *          00940000
*01* DELETED BY:                                             *          00950000
*                                                            *          00960000
*     Caller                                                 *          00970000
*                                                            *          00980000
*01* RESTRICTIONS:                                           *          00990000
*                                                            *          01000000
*     None                                                   *          01010000
*                                                            *          01020000
*01* NOTES:                                                  *          01030000
*                                                            *          01040000
*     In the following description of fields, the notation   *          01050000
*     before the field description can be one of the         *          01060000
*     following:                                             *          01070000
*                                                            *          01080000
*        I.    Input (application supplied information)      *          01090000
*        IS    Input (used for selection/filtering )         *          01100000
*        IS*   Same as IS, but field supports wild cards:    *          01110000
*                * = any zero or more characters             *          01120000
*                ? = any single character                    *          01130000
*        O.    Output (system supplied information)          *          01140000
*                                                            *          01150000
****** END OF SPECIFICATIONS ********************************/          01160000
* % GOTO END_OF_ASM_JCIP; /*                                            01170000
*********************************************************************** 01180000
*01* CHANGE ACTIVITY:                                                 * 01190000
* $Z24LSDS=SDSFAST  HBB77C0 181130 TJW:  Updates for SDSF             * 01195000
*                                                                     * 01200000
*01* A000000-999999    Created for Z/OS release 2.4           @Z24LCKS* 01210000
*********************************************************************** 01220000
         SPACE 1                                                        01230000
**************************************************************          01240000
*                                                            *          01250000
*        Additional return codes, specific to this function, *          01260000
*        that can be placed into SSJPRETN in IAZSSJP.  See   *          01270000
*        IAZSSJP for common SSJPRETN return codes.           *          01280000
*                                                            *          01290000
**************************************************************          01300000
         EJECT ,                                                        01310000
**************************************************************          01320000
*                                                            *          01330000
*        The following structure (JPCKP) defines the         *          01340000
*        input parameters passed on the call to this SSI.    *          01350000
*                                                            *          01360000
**************************************************************          01370000
JPCKP    DSECT                                                          01380000
JCIPID   DS    CL8'JESCKPTI'       I.Eye catcher                        01390000
JCIPLEN  DS    AL2(JCIPSZE)        I.Length of JPCKP parameter          01400000
         SPACE 1                                                        01410000
**************************************************************          01420000
*                                                            *          01430000
*        There are two 2 byte versions for this SSOB         *          01440000
*        extension.  JCIPVER is the version provided by the  *          01450000
*        caller.  They indicate the level of the control     *          01460000
*        block passed to the service.  As new input          *          01470000
*        fields are added to the service, the caller         *          01480000
*        provided version indicates what the service is to   *          01490000
*        consider valid.                                     *          01500000
*                                                            *          01510000
*        JCIPVERO is the version information returned from   *          01520000
*        the service.  This implies what fields the service  *          01530000
*        actually examined and what data is returned.  If    *          01540000
*        the service is at a level higher than the level of  *          01550000
*        the caller, JCIPVERO may be higher than JCIPVER.    *          01560000
*        In this case, only the fields valid at the JCIPVER  *          01570000
*        level are actually examined or set.                 *          01580000
*                                                            *          01590000
*        The 2 bytes of version information is a 1 byte      *          01600000
*        level number (changed only when a new release adds  *          01610000
*        significant function) and a 1 byte modifier         *          01620000
*        (changed only when function is added via service).  *          01630000
*                                                            *          01640000
**************************************************************          01650000
         SPACE 1                                                        01660000
JCIPVER  DC    0FL2'0'             I.SSOB version                       01670000
JCIPVERL DC    AL1(JCIPCVRL)       I.SSOB version level                 01680000
JCIPVERM DC    AL1(JCIPCVRM)       I.SSOB version modifier              01690000
JCIPV010 EQU   X'0100'               Initial version number of         C01700000
                                     IAZJPCKP.                          01710000
JCIPSVR# EQU   X'0100'               Latest version                     01720000
JCIPCVRL EQU   1                     Current version level              01730000
JCIPCVRM EQU   0                     Current version modifier           01740000
         SPACE 1                                                        01750000
JCIPVERO DC    FL2'0'              O.Subsystem version/modifier         01760000
         SPACE 1                                                        01770000
         DC    XL2'0'              Reserved.                            01780000
         SPACE 1                                                        01790000
**************************************************************          01800000
*                                                            *          01810000
*        JCIPSTRP is an anchor for use by the subsystem      *          01820000
*        that responds to this request.  It is expected that *          01830000
*        the caller will set this to zero the FIRST time an  *          01840000
*        SSOB extension is used and from that point on it    *          01850000
*        will be managed by the subsystem.                   *          01860000
*                                                            *          01870000
**************************************************************          01880000
         SPACE 1                                                        01890000
JCIPSTRP DC    A(0)                Storage management anchor            01900000
         SPACE 1                                                        01910000
**************************************************************          01920000
*                                                            *          01930000
*        Begin input-only fields.                            *          01940000
*                                                            *          01950000
*        The filters in JCIPFLTR are a list of CKPT info     *          01960000
*        areas to include in the output area.  The current   *          01970000
*        checkpoint information is always returned.          *          01980000
*        Additional value can be requested using JCIPFLTR.   *          01990000
*                                                            *          02000000
*        The filters flags have the following meanings:      *          02010000
*          JCIPFINT - Values from the initialization data    *          02020000
*                     set are returned.  Only data specified *          02030000
*                     on the CKPTDEF statement are available *          02040000
*                     (no size information etc).             *          02050000
*          JCIPFRST - Values from when JES2 performed the    *          02060000
*                     initial read of checkpoint data.  This *          02070000
*                     includes the results of any forwarding *          02080000
*                     or initialization reconfiguration.     *          02090000
*          JCIPFHST - Historical values of the CKPT info     *          02100000
*                     specification.  Only changes to the    *          02110000
*                     in use CKPT1 and CKPT2 specifications  *          02120000
*                     are saved (change that require CKPT    *          02130000
*                     reconfiguration).                      *          02140000
*        Note: First and historical information is only      *          02150000
*        returned if they differ for the CKPT1/CKPT2 info    *          02160000
*        for the current checkpoint data set.                *          02170000
*                                                            *          02180000
**************************************************************          02190000
         SPACE 1                                                        02200000
JCIPFLTR DC    BL1'0'              IS.Indicate desired filters          02210000
JCIPFINT EQU   B'10000000'           Initialization DS values           02220000
JCIPFRST EQU   B'01000000'           Value when JES2 started            02230000
JCIPFHST EQU   B'00100000'           History of value changes           02240000
         SPACE 1                                                        02250000
         DS    XL7                 Reserved                             02260000
         SPACE 1                                                        02270000
**************************************************************          02280000
*       NOTE: Each filter below is enabled via one           *          02290000
*             of the JCIPFLTR bit settings above.            *          02300000
**************************************************************          02310000
         SPACE 1                                                        02320000
         DC    12F'0'              Reserved for future use              02330000
         SPACE 1                                                        02340000
**************************************************************          02350000
*                                                            *          02360000
*        Begin output-only fields.                           *          02370000
*                                                            *          02380000
**************************************************************          02390000
         SPACE 1                                                        02400000
JCICKPTR DC    A(0)                O.Pointer to first CKPT             C02410000
                                     (JCIHDR) data buffer.              02420000
JCICNMBR DC    F'0'                O.Number of CKPT                    C02430000
                                     (JCIHDR) data buffers             C02440000
                                     returned.                          02450000
         DC    11F'0'              Reserved for future use              02460000
         SPACE 1                                                        02470000
JCIPSZE1 EQU   *-JPCKP             Fix parameter End: Ver 1             02480000
JCIPSZE  EQU   *-JPCKP             JCIP Current version                C02490000
                                    fixed parameter length              02500000
         EJECT ,                                                        02510000
**************************************************************          02520000
*                                                            *          02530000
*        Storage management fields for use by the subsystem  *          02540000
*        only.  JCIPSTRP is a token used to locate a chain   *   @Z24BK 02550000
*        of these control blocks.  All storage will be       *   @Z24BK 02560000
*        obtained in KEY 1.                                  *   @Z24BK 02565000
*                                                            *          02570000
**************************************************************          02580000
         SPACE 1                                                        02590000
JCIPSTOR DSECT ,                   Storage management DSECT             02600000
JCIPSTID DC    CL8'JCIPSTOR'       Eyecatcher                           02610000
JCIPSTHL DC    AL2(JCIPSTBG-JCIPSTOR)  Length of header area            02620000
         DC    AL2(0)              Reserved for future use              02630000
JCIPSTSP DC    X'0'                Subpool of area                      02640000
JCIPSTPL EQU   230                 Recommended subpool to use           02650000
JCIPSTTL DC    AL3(0)              Total length of area (this          C02660000
                                    includes the header)                02670000
JCIPSTNX DC    A(0)                Pointer to next area                 02680000
JCIPSTCP DC    A(0)                Pointer to 1st available            C02690000
                                     byte in this area                  02700000
JCIPSTBG DS    0A                  Start of data area                   02710000
JCIPSTSZ EQU   (JCIPSTBG-JCIPSTOR) JCIPSTOR length                      02720000
         EJECT ,                                                        02730000
**************************************************************          02740000
*                                                            *          02750000
*        The following structures define output data for     *          02760000
*        this SSI.  The basic layout is a chain of CKPT data *          02770000
*        set information sections.  Each CKPT section has a  *          02780000
*        common section and a data set section (with the     *          02790000
*        attributes of each data set type).  Each entry in   *          02800000
*        the output chain represents either:                 *          02810000
*         - The current CKPT specifications                  *          02820000
*         - CKPT specification from the init data set        *          02830000
*         - CKPT specifications JES2 started with            *          02840000
*         - A history entry representing a setting change    *          02850000
*        See diagram below for a high level view of the data *          02860000
*        structure layout.                                   *          02870000
*                                                            *          02880000
*          CKPT info section                                 *          02890000
*          +-----------------+                               *          02900000
*   JCIHDR ! JCINXTP   =-----------> Pointer to the next     *          02910000
*          !                 !       JCIHDR in the chain.    *          02920000
*          !                 !       Zero if end of chain.   *          02930000
*          +-----------------+                               *          02940000
*  JCIPREF ! Prefix Section  !                               *          02950000
*          ! . . .           !                               *          02960000
*          +-----------------+                               *          02970000
*  JCIGENI ! General         !                               *          02980000
*          ! CKPT Data       !                               *          02990000
*          ! Section         !                               *          03000000
*          ! . . .           !                               *          03010000
*          +-----------------+ starts at JCIGENI+JCIGFOFS    *          03020000
* JCIFILES ! CKPT file data  !  Entry count is JCIGFCNT      *          03030000
*          ! array (one entry!  Entry length is JCIGFCNT     *          03040000
*          ! for each file)  !                               *          03050000
*          ! . . .           !                               *          03060000
*          +-----------------+                               *          03070000
*                                                            *          03080000
**************************************************************          03090000
         EJECT ,                                                        03100000
**************************************************************          03110000
*                                                            *          03120000
*        CKPT Info Header Section                            *          03130000
*                                                            *          03140000
*        Information about the JES2 CKPT is returned to      *          03150000
*        the issuer of the SSI.                              *          03160000
*                                                            *          03170000
*        - Each entry returned represents CKPT information   *          03180000
*          for a specific point in time.  The JCINXTP        *          03190000
*          pointer is used to navigate to the next CKPT Info *          03200000
*          Header section in the chain.                      *          03210000
*                                                            *          03220000
*        - To get from this header to the CKPT info prefix   *          03230000
*          section for this entry, add the JCIOPRF offset to *          03240000
*          the CKPT info header (JCIHDR) address.            *          03250000
*                                                            *          03260000
**************************************************************          03270000
         SPACE 1                                                        03280000
JCIHDR   DSECT ,                   CKPT info header Section             03290000
JCIEYE   DC    CL8'JCIHDR  '       Eye catcher                          03300000
         SPACE 1                                                        03310000
JCIOPRF  DC    Y(JCIHDSZ)          Offset to prefix section             03320000
         DC    AL2(0)              Reserved for future use              03330000
JCINXTP  DC    A(*-*)              Address of next CKPT info section    03340000
         DC    A(*-*)              Reserved for future use              03350000
         SPACE 1                                                        03360000
JCIHDSZ  EQU   *-JCIHDR            Size of this section                C03370000
                                     (Internal use only)                03380000
         SPACE 1                                                        03390000
**************************************************************          03400000
*                                                            *          03410000
*        CKPT Information Section Identifiers                *          03420000
*                                                            *          03430000
**************************************************************          03440000
         SPACE 1                                                        03450000
JCIIDPRF EQU   X'00'               CKPT Info - Prefix                   03460000
JCIIDGEN EQU   X'01'               CKPT Info - General                  03470000
         SPACE 1                                                        03480000
**************************************************************          03490000
*                                                            *          03500000
*        CKPT Information Section Modifiers                  *          03510000
*                                                            *          03520000
**************************************************************          03530000
         SPACE 1                                                        03540000
JCIIMGEN EQU   X'00'               Modifier - General                   03550000
         SPACE 1                                                        03560000
**************************************************************          03570000
*                                                            *          03580000
*        CKPT info Prefix Section                            *          03590000
*                                                            *          03600000
*        NOTE: To get here, add the JCIOPRF header field     *          03610000
*              to the header (JCIHDR) address.               *          03620000
*                                                            *          03630000
**************************************************************          03640000
         SPACE 1                                                        03650000
JCIPREF  DSECT ,                   CKPT info Prefix                     03660000
JCIPRLN  DC    AL2(0)              Length of entire CKPT info          C03670000
                                    entry (Max value is 65535)         C03680000
                                    returned - other than hdr           03690000
         SPACE 1                                                        03700000
JCIPRTP  DC    AL1(JCIIDPRF)       Type     = Prefix Section            03710000
JCIPRMD  DC    AL1(JCIIMGEN)       Type Mod = General                   03720000
         SPACE 1                                                        03730000
JCIPRSZ  EQU   *-JCIPREF           Size of this section                 03740000
         SPACE 1                                                        03750000
**************************************************************          03760000
*                                                            *          03770000
*        CKPT General Information Section                    *          03780000
*                                                            *          03790000
*        NOTE: To get here, add the JCIOPRF header field     *          03800000
*              and the prefix size (JCIPRSZ) to the header   *          03810000
*              (JCIHDR) address.                             *          03820000
*                                                            *          03830000
**************************************************************          03840000
         SPACE 1                                                        03850000
JCIGENI  DSECT ,                   CKPT General Information             03860000
         SPACE 1                                                        03870000
JCIGLN   DC    Y(JCIGENSZ)         Length of this section               03880000
JCIGTY   DC    AL1(JCIIDGEN)       Type     = General Info              03890000
JCIGMD   DC    AL1(JCIIMGEN)       Type Mod = General                   03900000
         SPACE 1                                                        03910000
JCIGTYPE DS    XL1                 Entry type (record type)             03920000
*------------------------------------------------------------*          03930000
*        The following values indicate the type of CKPT      *          03940000
*        information being returned:                         *          03950000
*          JCIGTCUR - Values for the current checkpoint      *          03960000
*                     specification are returned.            *          03970000
*          JCIGTINT - Values from the initialization data    *          03980000
*                     set are returned.  Only data specified *          03990000
*                     on the CKPTDEF statement are available *          04000000
*                     (no size information etc).             *          04010000
*          JCIGTFRS - Values from when JES2 performed the    *          04020000
*                     initial read of checkpoint data.  This *          04030000
*                     includes the results of any forwarding *          04040000
*                     or initialization reconfiguration.     *          04050000
*          JCIGTHST - Historical values of the CKPT info     *          04060000
*                     specification.  Only changes to the    *          04070000
*                     in use CKPT1 and CKPT2 specifications  *          04080000
*                     are saved (change that require CKPT    *          04090000
*                     reconfiguration).                      *          04100000
*        Note: JCIGTFRS and JCIGTHST type areas are only     *          04110000
*        returned if they differ for the CKPT1/CKPT2 info    *          04120000
*        for the current checkpoint data set.                *          04130000
*------------------------------------------------------------*          04140000
JCIGTCUR EQU   1                     Current checkpoint information     04150000
JCIGTINT EQU   2                     Initialization CKPT info           04160000
JCIGTFRS EQU   3                     Initial read CKPT info             04170000
JCIGTHST EQU   4                     Historical CKPT information        04180000
         SPACE 2                                                        04190000
JCIGFLG1 DS    BL1                 Flag byte                            04200000
JCIG1MOD EQU   B'10000000'           0 => MODE=DUAL   1 => MODE=DUPLEX  04210000
JCIG1DPX EQU   B'01000000'           0 => DUPLEX=OFF  1 => DUPLEX=ON    04220000
JCIG1OPV EQU   B'00100000'           0 => OPVERIFY=NO 1 => OPVERIFY=YES 04230000
JCIG1NML EQU   B'00010000'           All members have all CKPTs alloc   04240000
JCIG1C2E EQU   B'00001000'           DUPLEX mode and all members       C04250000
                                       specified DUPLEX=OFF             04260000
         SPACE 1                                                        04270000
JCIGCLRC DS    XL2                 Change log size                      04280000
JCIGCURS DS    FL4                 CKPT size (4K pages)                 04290000
JCIGMAXS DS    FL4                 Maximum CKPT size (4K pages)         04300000
JCIGTIME DS    XL16                Time entry was created (STCKE)       04310000
         SPACE 1                                                        04320000
JCIGFCNT DS    HL2                 Number of files returned             04330000
JCIGFOFS DS    HL2                 Offset to 1st file entry             04340000
JCIGFLEN DS    HL2                 Length of file array entry           04350000
         SPACE 1                                                        04360000
         DS    HL2                 Reserved                             04370000
         SPACE 1                                                        04380000
JCIGFSTR DS    0F                  Start of file entries                04390000
JCIGENSZ EQU   *-JCIGENI           Size of this section                C04400000
                                     (Internal use only)                04410000
         SPACE 1                                                        04420000
**************************************************************          04430000
*                                                            *          04440000
*        CKPT file (CKPTn/NEWCKPTn) information array        *          04450000
*                                                            *          04460000
*        Each array entry describes a CKPT files that make   *          04470000
*        up the checkpoint specifications.                   *          04480000
*                                                            *          04490000
**************************************************************          04500000
         SPACE 1                                                        04510000
JCIFILES DSECT ,                   Data set info data area              04520000
         SPACE 1                                                        04530000
JCIFNAME DS    CL8'CKPTn'          File name (CKPTn or NEWCKPTn)        04540000
         SPACE 1                                                        04550000
JCIFFLG1 DS    B                   Flag byte                            04560000
JCIF1CKN EQU   B'10000000'           CKPTn data set (not NEWCKPTn)      04570000
JCIF1INU EQU   B'01000000'           CKPT is in use (CKPTn only)        04580000
JCIF1VOL EQU   B'00100000'           CKPT is volatile (only if in use)  04590000
JCIF1CF  EQU   B'00010000'           CKPT is on CF                      04600000
         SPACE 1                                                        04610000
         DS    XL3                 Reserved                             04620000
         SPACE 1                                                        04630000
JCIFVOL  DS    CL6                 Volume         (if DASD)             04640000
JCIFDSN  DS    CL44                Data set name  (if DASD)             04650000
JCIFSTR  DS    CL16                Structure name (if CF)               04660000
         DS    CL2                 Reserved                             04670000
         SPACE 1                                                        04680000
*------------------------------------------------------------*          04690000
*        The following fields are only available for CKPTn   *          04700000
*        data sets that are currently in use and allocated   *          04710000
*        on this member (not MODE=DUPLEX,DUPLEX=OFF)         *          04720000
*------------------------------------------------------------*          04730000
         SPACE 1                                                        04740000
JCIFCAP  DS    FL4                 Capacity of file (4K pages)          04750000
JCIFUSED DS    FL4                 Current amount in use (4K pages)     04760000
         SPACE 1                                                        04770000
*------------------------------------------------------------*          04780000
*        The size fields are defined as follows:             *          04790000
*          For DASD                                          *          04800000
*            JCIFCURS - Data set size in tracks              *          04810000
*            JCIFMAXS - Always same as JCIFCURS              *          04820000
*          For CF                                            *          04830000
*            JCIFCURS - Current number of 1K blocks          *          04840000
*            JCIFMAXS - Maximum number of 1K blocks          *          04850000
*------------------------------------------------------------*          04860000
         SPACE 1                                                        04870000
JCIFCURS DS    FL4                 Current size of file                 04880000
JCIFMAXS DS    FL4                 Maximum size of file                 04890000
         SPACE 1                                                        04892000
JCIFTRKB DS    FL4                 Track capacity (bytes) for  @Z24LSDSC04894000
                                     CKPT on DASD assuming 4K  @Z24LSDSC04896000
                                     records                   @Z24LSDS 04898000
         SPACE 1                                                        04900000
JCIFSIZE EQU   *-JCIFILES          Length of basic section             C04910000
                                     (Internal use only)                04920000
         MEND  ,                                                        04930000
.*                                                                      04940000
**/                                                                     04950000
* % END_OF_ASM_JCIP: ;                                                  04960000
*/************************************************************          04970000
*01* NOTES:                                                  *          04980000
*                                                            *          04990000
*          Bilingual Mapping Macro PL/X                      *          05000000
*                                                            *          05010000
*        Dependencies =                                      *          05020000
*                                                            *          05030000
*          PL/X Version = This macro uses the macro          *          05040000
*            variable JPCKP_ATRB. JPCKP_ATRB must be         *          05050000
*            declared and set to valid control block         *          05060000
*            attributes before the macro is invoked.         *          05070000
*                                                            *          05080000
*************************************************************/          05090000
*                                                                       05100000
* %IF JPCKP_ATRB = ''            /* If no attribute specified        */ 05110000
*   %THEN                                                               05120000
*     %JPCKP_ATRB = 'BASED';     /* Establish default attribute      */ 05130000
*                                                                       05140000
*DECLARE                                                                05150000
*   1 JPCKP   JPCKP_ATRB,                                               05160000
*     3 JCIPID   CHAR(8),           /* I.Eyecatcher                  */ 05170000
*     3 JCIPLEN  FIXED(16),         /* I.Length of JPCKP             */ 05180000
*     3 JCIPVER  FIXED(15),         /* I.Parm list version number    */ 05190000
*       5 JCIPVERL FIXED(8),        /*   I.Parm list version level   */ 05200000
*       5 JCIPVERM FIXED(8),        /*   I.Parm list version mod     */ 05210000
*     3 JCIPVERO FIXED(15),         /* O.Subsystem version number    */ 05220000
*     3 *        FIXED(16),         /* Reserved                      */ 05230000
*/********************************************************************/ 05240000
*/*      JCIPSTRP is an anchor for use by the subsystem              */ 05250000
*/*      that responds to this request.  It is expected that         */ 05260000
*/*      the caller will set this to zero the FIRST time an          */ 05270000
*/*      SSOB extension is used and from that point on it            */ 05280000
*/*      will be managed by the subsystem.                           */ 05290000
*/********************************************************************/ 05300000
*     3 JCIPSTRP PTR(31),           /* Storage management anchor     */ 05310000
*                                                                       05320000
*/********************************************************************/ 05330000
*/*                                                                  */ 05340000
*/*      Begin input-only fields.                                    */ 05350000
*/*                                                                  */ 05360000
*/*      The filters in JCIPFLTR are a list of CKPT info             */ 05370000
*/*      areas to include in the output area.  The current           */ 05380000
*/*      checkpoint information is always returned.                  */ 05390000
*/*      Additional value can be requested using JCIPFLTR.           */ 05400000
*/*                                                                  */ 05410000
*/*      The filters flags have the following meanings:              */ 05420000
*/*        JCIPFINT - Values from the initialization data            */ 05430000
*/*                   set are returned.  Only data specified         */ 05440000
*/*                   on the CKPTDEF statement are available         */ 05450000
*/*                   (no size information etc).                     */ 05460000
*/*        JCIPFRST - Values from when JES2 performed the            */ 05470000
*/*                   initial read of checkpoint data.  This         */ 05480000
*/*                   includes the results of any forwarding         */ 05490000
*/*                   or initialization reconfiguration.             */ 05500000
*/*        JCIPFHST - Historical values of the CKPT info             */ 05510000
*/*                   specification.  Only changes to the            */ 05520000
*/*                   in use CKPT1 and CKPT2 specifications          */ 05530000
*/*                   are saved (change that require CKPT            */ 05540000
*/*                   reconfiguration).                              */ 05550000
*/*      Note: First and historical information is only              */ 05560000
*/*      returned if they differ for the CKPT1/CKPT2 info            */ 05570000
*/*      for the current checkpoint data set.                        */ 05580000
*/*                                                                  */ 05590000
*/********************************************************************/ 05600000
*     3 JCIPFLTR BIT(8),            /* IS.Filters                    */ 05610000
*                                                                       05620000
*       5 JCIPFINT BIT(1),          /* Initialization DS value       */ 05630000
*       5 JCIPFRST BIT(1),          /* Value when JES2 started       */ 05640000
*       5 JCIPFHST BIT(1),          /* History of value changes      */ 05650000
*       5 *        BIT(5),          /* Reserved                      */ 05660000
*                                                                       05670000
*     3 *         CHAR(7),          /* Reserved                      */ 05680000
*                                                                       05690000
*/********************************************************************/ 05700000
*/*     NOTE: Each filter below is enabled via one                   */ 05710000
*/*           of the JCIPFLTR bit settings above.                    */ 05720000
*/********************************************************************/ 05730000
*                                                                       05740000
*     3 *(12)     FIXED(32),        /* Reserved for future use       */ 05750000
*                                                                       05760000
*/********************************************************************/ 05770000
*/*      Begin output-only fields.                                   */ 05780000
*/********************************************************************/ 05790000
*     3 JCICKPTR PTR(31),           /* O.Pointer to first CKPT          05800000
*                                         (JCIHDR) data buffer. See     05810000
*                                         output data discussion        05820000
*                                         below for layout.          */ 05830000
*     3 JCICNMBR FIXED(32),         /* O.Number of CKPT                 05840000
*                                         (JCIHDR) data buffers         05850000
*                                         returned.                  */ 05860000
*     3 *(11)    FIXED(32);         /* Reserved                      */ 05870000
*                                                                       05880000
*   DCL JCIPSZE  FIXED(16) CONSTANT(LENGTH(JPCKP)); /* Size of JPCKP */ 05890000
*   DCL JCIPSZE1 FIXED(16) CONSTANT(128); /* Parameter end-             05900000
*                                      version 1 size.               */ 05910000
*   DCL JCIPV010 FIXED(16) CONSTANT('0100'X); /* Version 1 level     */ 05920000
*   DCL JCIPSVR# FIXED(16) CONSTANT('0100'X); /* Latest Version         05930000
*                                          level                     */ 05940000
*   DCL JCIPCVRL FIXED(8)  CONSTANT(1); /* Current version              05950000
*                                          level                     */ 05960000
*   DCL JCIPCVRM FIXED(8)  CONSTANT(0); /* Current version modifier  */ 05970000
*/*     ID VALUE FOR JCIPID                                          */ 05980000
* DCL JCIPEYEC CHAR(8)  CONSTANT('JESCKPTI'); /* CKPT info ID        */ 05990000
*                                                                       06000000
*                                                                       06010000
*/********************************************************************/ 06020000
*/*                                                                  */ 06030000
*/*        Storage management fields for use by the subsystem        */ 06040000
*/*        only.  JCIPSTRP is a token used to locate a chain   @Z24BK*/ 06050000
*/*        of these control blocks.  All storage will be       @Z24BK*/ 06060000
*/*        obtained in KEY 1.                                  @Z24BK*/ 06065000
*/*                                                                  */ 06070000
*/********************************************************************/ 06080000
*DECLARE                                                                06090000
*   1 JCIPSTOR  BASED,         /* Storage management block           */ 06100000
*     3 JCIPSTID  CHAR(8),     /* Eyecatcher                         */ 06110000
*     3 JCIPSTHL  FIXED(16),   /* Length of header area              */ 06120000
*     3 *         CHAR(2),     /* Reserved for future use            */ 06130000
*     3 JCIPSTSP  FIXED(8),    /* Subpool of this block              */ 06140000
*     3 JCIPSTTL  FIXED(24),   /* Total length of area (this            06150000
*                                   includes the header              */ 06160000
*     3 JCIPSTNX  PTR(31),     /* Pointer to next area               */ 06170000
*     3 JCIPSTCP  PTR(31),     /* Pointer to first available byte       06180000
*                                   in this area                     */ 06190000
*     3 JCIPSTBG  CHAR(0);      /* Start of data area                */ 06200000
*                                                                       06210000
*   DCL JCIPSTEC CHAR(8)  CONSTANT('JCIPSTOR'); /* Storage management   06220000
*                                                    eyecatcher value*/ 06230000
*   DCL JCIPSTPL FIXED(8) CONSTANT(230); /* Recommended subpool to      06240000
*                                             use                    */ 06250000
*   DCL JCIPSTSZ FIXED(16) CONSTANT(LENGTH(JCIPSTOR)); /* JCIPSTOR      06260000
*                                                           length   */ 06270000
*                                                                       06280000
*                                                                       06290000
*/********************************************************************/ 06300000
*/*                                                                  */ 06310000
*/*        CKPT Info Header Section                                  */ 06320000
*/*                                                                  */ 06330000
*/*        Information about the JES2 CKPT is returned to            */ 06340000
*/*        the issuer of the SSI.                                    */ 06350000
*/*                                                                  */ 06360000
*/*        - Each entry returned represents CKPT information         */ 06370000
*/*          for a specific point in time.  The JCINXTP              */ 06380000
*/*          pointer is used to navigate to the next CKPT Info       */ 06390000
*/*          Header section in the chain.                            */ 06400000
*/*                                                                  */ 06410000
*/*        - To get from this header to the CKPT info prefix         */ 06420000
*/*          section for this entry, add the JCIOPRF offset to       */ 06430000
*/*          the CKPT info header (JCIHDR) address.                  */ 06440000
*/*                                                                  */ 06450000
*/********************************************************************/ 06460000
*DECLARE                                                                06470000
*   1 JCIHDR BASED,                 /* CKPT Info Header Section      */ 06480000
*     3 JCIEYE   CHAR(8),           /* Eye catcher                   */ 06490000
*     3 JCIOPRF  FIXED(16),         /* Offset to prefix section      */ 06500000
*     3 *        FIXED(16),         /* Reserved for future use       */ 06510000
*     3 JCINXTP  PTR(31),           /* Address of next JCIHDR        */ 06520000
*     3 *        FIXED(32);         /* Reserved for future use       */ 06530000
*                                                                       06540000
*   DCL JCIEYEC  CHAR(8)  CONSTANT('JCIHDR  '); /* Eye catcher value */ 06550000
*                                                                       06560000
*/********************************************************************/ 06570000
*/*                                                                  */ 06580000
*/*        CKPT Information Section Identifiers                      */ 06590000
*/*                                                                  */ 06600000
*/********************************************************************/ 06610000
*  DCL JCIIDPRF FIXED(8) CONSTANT('00'X); /* CKPT Info - Prefix      */ 06620000
*  DCL JCIIDGEN FIXED(8) CONSTANT('01'X); /* CKPT Info - General     */ 06630000
*/********************************************************************/ 06640000
*/*                                                                  */ 06650000
*/*        CKPT Information Section Modifiers                        */ 06660000
*/*                                                                  */ 06670000
*/********************************************************************/ 06680000
*   DCL JCIIMGEN FIXED(8) CONSTANT('00'X); /* Modifier - General     */ 06690000
*/********************************************************************/ 06700000
*/*                                                                  */ 06710000
*/*        CKPT info Prefix Section                                  */ 06720000
*/*                                                                  */ 06730000
*/*        NOTE: To get here, add the JCIOPRF header field           */ 06740000
*/*              to the header (JCIHDR) address.                     */ 06750000
*/*                                                                  */ 06760000
*/********************************************************************/ 06770000
*DECLARE                                                                06780000
*   1 JCIPREF BASED,                /* CKPT info Prefix              */ 06790000
*     3 JCIPRLN  FIXED(16),         /* Length of entire CKPT info       06800000
*                                      entry (Max value is 65535)       06810000
*                                      returned - other than hdr.    */ 06820000
*     3 JCIPRTP  FIXED(8),          /* Type     = Prefix   (JCIIDPRF)*/ 06830000
*     3 JCIPRMD  FIXED(8);          /* Type Mod = General  (JCIIMGEN)*/ 06840000
*                                                                       06850000
*   DCL JCIPRSZ  FIXED(8) CONSTANT(LENGTH(JCIPREF)); /* Length       */ 06860000
*/********************************************************************/ 06870000
*/*                                                                  */ 06880000
*/*        CKPT General Information Section                          */ 06890000
*/*                                                                  */ 06900000
*/*        NOTE: To get here, add the JCIOPRF header field           */ 06910000
*/*              and the prefix size (JCIPRSZ) to the header         */ 06920000
*/*              (JCIHDR) address.                                   */ 06930000
*/*                                                                  */ 06940000
*/********************************************************************/ 06950000
*DECLARE                                                                06960000
*   1 JCIGENI BASED,                /* CKPT General Info Section */     06970000
*     3 JCIGLN   FIXED(16),         /* Length of this section        */ 06980000
*     3 JCIGTY   FIXED(8),          /* Type     = General  (JCIIDGEN)*/ 06990000
*     3 JCIGMD   FIXED(8),          /* Type Mod = General  (JCIIMGEN)*/ 07000000
*                                                                       07010000
*     3 JCIGTYPE FIXED(8),          /* Entry type (record type)      */ 07020000
*     3 JCIGFLG1 BIT(8),            /* Flag byte                     */ 07030000
*       5 JCIG1MOD BIT(1),          /* 0=>MODE=DUAL   1=>MODE=DUPLEX */ 07040000
*       5 JCIG1DPX BIT(1),          /* 0=>DUPLEX=OFF  1=>DUPLEX=ON   */ 07050000
*       5 JCIG1OPV BIT(1),          /* 0=>OPVERIFY=NO 1=>OPVERIFY=YES*/ 07060000
*       5 JCIG1NML BIT(1),          /* CKPTs allocated on all members*/ 07070000
*       5 JCIG1C2E BIT(1),          /* DUPLEX mode and all members      07080000
*                                      specified DUPLEX=OFF          */ 07090000
*       5 *        BIT(3),          /* Reserved                      */ 07100000
*                                                                       07110000
*     3 JCIGCLRC FIXED(16),         /* Change log size               */ 07120000
*     3 JCIGCURS FIXED(32),         /* CKPT size (4K pages)          */ 07130000
*     3 JCIGMAXS FIXED(32),         /* Maximum CKPT size (4K pages)  */ 07140000
*     3 JCIGTIME CHAR(16),          /* Time entry was created (STCKE)*/ 07150000
*     3 JCIGFCNT FIXED(16),         /* Number of files returned      */ 07160000
*     3 JCIGFOFS FIXED(16),         /* Offset to 1st file entry      */ 07170000
*     3 JCIGFLEN FIXED(16),         /* Length of file array entry    */ 07180000
*     3 *        FIXED(16);         /* Reserved                      */ 07190000
*                                                                       07200000
*/*------------------------------------------------------------------*/ 07210000
*/*      The following values in JCIGTYPE indicate the type          */ 07220000
*/*      of CKPT information being returned:                         */ 07230000
*/*        JCIGTCUR - Values for the current checkpoint              */ 07240000
*/*                   specification are returned.                    */ 07250000
*/*        JCIGTINT - Values from the initialization data            */ 07260000
*/*                   set are returned.  Only data specified         */ 07270000
*/*                   on the CKPTDEF statement are available         */ 07280000
*/*                   (no size information etc).                     */ 07290000
*/*        JCIGTFRS - Values from when JES2 performed the            */ 07300000
*/*                   initial read of checkpoint data.  This         */ 07310000
*/*                   includes the results of any forwarding         */ 07320000
*/*                   or initialization reconfiguration.             */ 07330000
*/*        JCIGTHST - Historical values of the CKPT info             */ 07340000
*/*                   specification.  Only changes to the            */ 07350000
*/*                   in use CKPT1 and CKPT2 specifications          */ 07360000
*/*                   are saved (change that require CKPT            */ 07370000
*/*                   reconfiguration).                              */ 07380000
*/*      Note: JCIGTFRS and JCIGTHST type areas are only             */ 07390000
*/*      returned if they differ for the CKPT1/CKPT2 info            */ 07400000
*/*      for the current checkpoint data set.                        */ 07410000
*/*------------------------------------------------------------------*/ 07420000
*DECLARE                                                                07430000
*   JCIGTCUR FIXED(8) CONSTANT(1),  /* Current checkpoint information*/ 07440000
*   JCIGTINT FIXED(8) CONSTANT(2),  /* Initialization CKPT info      */ 07450000
*   JCIGTFRS FIXED(8) CONSTANT(3),  /* Initial read CKPT info        */ 07460000
*   JCIGTHST FIXED(8) CONSTANT(4);  /* Historical CKPT information   */ 07470000
*                                                                       07480000
*/********************************************************************/ 07490000
*/*                                                                  */ 07500000
*/*        CKPT file (CKPTn/NEWCKPTn) information section            */ 07510000
*/*                                                                  */ 07520000
*/*        This section describes the CKPT files that make           */ 07530000
*/*        up the checkpoint specifications.                         */ 07540000
*/*                                                                  */ 07550000
*/********************************************************************/ 07560000
*DECLARE                                                                07570000
*   1 JCIFILES BASED,               /* Data set info data area       */ 07580000
*     3 JCIFNAME CHAR(8),           /* File name (CKPTn or NEWCKPTn) */ 07590000
*     3 JCIFFLG1 BIT(8),            /* Flag byte                     */ 07600000
*       5 JCIF1CKN BIT(1),          /* CKPTn data set (not NEWCKPTn) */ 07610000
*       5 JCIF1INU BIT(1),          /* CKPT is in use (CKPTn only)   */ 07620000
*       5 JCIF1VOL BIT(1),          /* CKPT is volatile (if in use)  */ 07630000
*       5 JCIF1CF  BIT(1),          /* CKPT is on CF                 */ 07640000
*       5 *        BIT(4),          /* Reserved                      */ 07650000
*     3 *        CHAR(3),           /* Reserved                      */ 07660000
*                                                                       07670000
*     3 JCIFVOL  CHAR(6),           /* Volume         (if DASD)      */ 07680000
*     3 JCIFDSN  CHAR(44),          /* Data set name  (if DASD)      */ 07690000
*     3 JCIFSTR  CHAR(16),          /* Structure name (if CF)        */ 07700000
*     3 *        CHAR(2),           /* Reserved                      */ 07710000
*                                                                       07720000
*/*------------------------------------------------------------------*/ 07730000
*/*      The following fields are only available for CKPTn           */ 07740000
*/*      data sets that are currently in use and allocated           */ 07750000
*/*      on this member (not MODE=DUPLEX,DUPLEX=OFF)                 */ 07760000
*/*------------------------------------------------------------------*/ 07770000
*                                                                       07780000
*     3 JCIFCAP  FIXED(32) BDY(BYTE),  /* Cap of file (4K pages)     */ 07790000
*     3 JCIFUSED FIXED(32) BDY(BYTE),  /* Cur amount in use (pages)  */ 07800000
*                                                                       07810000
*/*------------------------------------------------------------------*/ 07820000
*/*      The size fields are defined as follows:                     */ 07830000
*/*        For DASD                                                  */ 07840000
*/*          JCIFCURS - Data set size in tracks                      */ 07850000
*/*          JCIFMAXS - Always same as JCIFCURS                      */ 07860000
*/*        For CF                                                    */ 07870000
*/*          JCIFCURS - Current number of 1K blocks                  */ 07880000
*/*          JCIFMAXS - Maximum number of 1K blocks                  */ 07890000
*/*------------------------------------------------------------------*/ 07900000
*                                                                       07910000
*     3 JCIFCURS FIXED(32) BDY(BYTE),  /* Current size of file       */ 07920000
*     3 JCIFMAXS FIXED(32) BDY(BYTE),  /* Maximum size of file       */ 07930000
*                                                                       07932000
*     3 JCIFTRKB FIXED(32) BDY(BYTE);  /* Track capacity (bytes) for    07934000
*                                         CKPT on DASD assuming 4K      07936000
*                                         records (0 for CF) @Z24LSDS*/ 07938000
*                                                                       07940000
* @Logic;                                                               07950000
* #PRAGMA TOOL=PADI.                                                    07960000
* #PADIDELETE.JCIPEYEC                                                  07970000
* #PADIDELETE.JCIPSTEC                                                  07980000
* #PADIDELETE.JCIEYEC                                                   07990000
* #PADIDELETE.JCIHDSZ                                                   08000000
* #PADIDELETE.JCIGFSTR                                                  08010000
* #PADIDELETE.JCIGENSZ                                                  08020000
* #PADIDELETE.JCIFSIZE                                                  08030000
* #EPRAGMA                                                              08040000
* @ENDLOGIC;                                                            08050000
*/*                          END OF MACRO                            */ 99999999
