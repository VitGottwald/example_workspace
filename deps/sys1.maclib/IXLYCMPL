*                                                                       00001000
* %DCL IXLYCMPL_INCLUDED CHAR EXT;                                      00002000
* %DEACTIVATE IXLYCMPL_INCLUDED;                                        00003000
* %IF IXLYCMPL_INCLUDED = '' %THEN                                      00004000
* %DO;                                                                  00005000
*/* Macro made bi-lingual on 18014. CBGEN compile date 15295         */ 00006000
*% /*                                                                   00007000
         MACRO                                                          00008000
         IXLYCMPL &DSECT=YES,&LIST=YES,&TITLE=YES,&CMPL=YES             00009000
         GBLC  &IXLYCMPL_INCLUDED                                       00010000
         GBLC  &ZCBPRINT                                                00011000
&IXLYCMPL_INCLUDED SETC 'YES'                                           00012000
         AIF   ('&LIST' EQ 'NONE').P0                                   00013000
         AIF   ('&TITLE' EQ 'NO').P5                                    00014000
 TITLE   'IXLYCMPL  - Complete Exit Parameter List                    '*00015000
                                                                        00016000
.P5      ANOP                                                           00017000
**/ IXLYCMPL_1:;                                                        00018000
*/* START OF SPECIFICATIONS ******************************************* 00019000
*                                                                       00020000
*01* PROPRIETARY STATEMENT =                                            00021000
*                                                                       00022000
*    LICENSED MATERIALS - PROPERTY OF IBM                               00023000
*    5650-ZOS COPYRIGHT IBM CORP. 1993, 2015                            00024000
*                                                                       00025000
*01* STATUS = HBB77A0                                                   00026000
*                                                                       00027000
*01* END OF PROPRIETARY STATEMENT                                       00028000
*                                                                       00029000
*02* ACRONYM:  CMPL                                                     00030000
*                                                                       00031000
*01* DESCRIPTIVE NAME: Complete Exit Parameter List                     00032000
*                                                                       00033000
*01* MACRO NAME: IXLYCMPL                                               00034000
*                                                                       00035000
*01* DSECT NAME:  CMPL                                                  00036000
*                 CMPLLCSECTION                                         00037000
*                 CMPLLOCKSECTION                                       00038000
*                 CMPLLOCKSECTION1                                      00039000
*                                                                       00040000
*01* COMPONENT:  Cross System Extended Services (SCIXL)                 00041000
*                                                                       00042000
*01* EYE-CATCHER:  NONE                                                 00043000
*                                                                       00044000
*01* STORAGE ATTRIBUTES:                                                00045000
*02*  SUBPOOL:  205                                                     00046000
*02*  KEY:  Key 0                                                       00047000
*02*  RESIDENCY:  Above 16 MB in virtual storage.                       00048000
*                                                                       00049000
*01* SIZE:  248 (X'00F8') bytes for Lock, 96 (x'0060') bytes for List   00050000
*            CMPL -- X'0040' bytes                                      00051000
*            CMPLLCSECTION    -- X'0020' bytes                          00052000
*            CMPLLOCKSECTION  -- x'00B8' bytes                          00053000
*            CMPLLOCKSECTION1 -- x'0178' bytes                          00054000
*                                                                       00055000
*01* CREATED BY: IXLRQCMP for locking requests                          00056000
*                IXLRQLCX for serialized list requests                  00057000
*                                                                       00058000
*01* POINTED TO BY:                                                     00059000
*     First word in parameter list provided to complete exit.           00060000
*                                                                       00061000
*01* SERIALIZATION:                                                     00062000
*     None required                                                     00063000
*                                                                       00064000
*01* FUNCTION: Maps parameter list to the Complete Exit interface to    00065000
*02*           XES connected users.                                     00066000
*                                                                       00067000
*01* EXTERNAL CLASSIFICATION: GUPI                                      00068000
*01* END OF EXTERNAL CLASSIFICATION:                                    00069000
*                                                                       00070000
*01* METHOD OF ACCESS:                                                  00071000
*02*  ASM:  IXLYCMPL USING on CMPL                                      00072000
*                                                                       00073000
*02*  PL/AS: %INCLUDE SYSLIB(IXLYCMPL)                                  00074000
*                                                                       00075000
*01* DELETED BY: IXLRQCMP for locking requests                          00076000
*                IXLRQRCS for list and cache requests                   00077000
*                                                                       00078000
*01* FREQUENCY:  One per call to the complete exit.                     00079000
*                                                                       00080000
*01* DEPENDENCIES: Include IXLYCON                                      00081000
*                                                                       00082000
*01* DISTRIBUTION LIBRARY: AMACLIB                                      00083000
*                                                                       00084000
*01* CHANGE ACTIVITY:                                                   00085000
*     $L0=SYSLKSRQ HBB5510 900112 PD00XB:  XLS support                  00086000
*     $L1=SYSLKSRQ HBB5510 910621 PD00T8:  Serialized List Support      00087000
*     $D1=DIGxxxxx HBB5510 910920 PD00T8:  Increase size of userdata to 00088000
*                                          64 bytes                     00089000
*     $D2=DIG0162  HBB5510 931104 PD00EO:  Add CmplRTEntryCount         00090000
*     $P1=PIG5111  HBB5510 940214 PD00EO:  Add CMPLRdataInfo Bits       00091000
*                                          in reserved field            00092000
*     $P2=PIG5178  HBB5510 940314 PD00EO:  Performance                  00093000
*     $P3=OA12164  HBB7740 050621 PD00WK:  Present contention           00094000
*                                          indications to complete exit 00095000
*     $P4=ME08517  HBB7740 061120 PD00BN:  Correct copyright statement  00096000
*     $L2=ADUPLX   HBB77A0 141030 PD0JES:  Asynch duplexing             00097000
*                                                                       00098000
* NOTES: This control block must end on a doubleword boundary.          00099000
*                                                                       00100000
*                                                                       00101000
*END OF SPECIFICATIONS ***********************************************/ 00102000
*% /*                                                                   00103000
.P0      ANOP                                                           00104000
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 00105000
         AIF   ('&LIST' EQ 'YES').P2                                    00106000
.P1      ANOP                                                           00107000
         PUSH  PRINT                                                    00108000
         PRINT OFF                                                      00109000
.P2      ANOP                                                           00110000
         AIF   ('&CMPL' EQ 'NO').L0002                                  00111000
         AIF   ('&DSECT' EQ 'YES').L0003                                00112000
         AIF   ('&CMPL' NE 'YES').L0002                                 00113000
.L0003   ANOP                                                           00114000
*                                                                       00115000
*  ------------------------------------------------------------------   00116000
*    Cmpl Common Header                                                 00117000
*  ------------------------------------------------------------------   00118000
*                                                                       00119000
*                                                                       00120000
         AIF   ('&DSECT' EQ 'YES').L0004                                00121000
CMPL     DS    0D        Complete exit parameter list                   00122000
         AGO   .L0005                                                   00123000
.L0004   ANOP                                                           00124000
CMPL     DSECT           Complete exit parameter list                   00125000
.L0005   ANOP                                                           00126000
CMPLCONTOKEN DS CL16     Connect token                                  00127000
CMPLCONDATA DS CL8       Connect-time data                              00128000
CMPLCONNAME DS CL16      Connect name as specified by connector         00129000
CMPLTYPE DS    0B        Request type that resulted in complete exit   *00130000
                         being called                                   00131000
CMPLLOCK EQU   X'80'     IXLLOCK request or contention exit specified  *00132000
                         regrant                                        00133000
CMPLLIST EQU   X'40'     IXLLIST request                                00134000
CMPLCACHE EQU  X'20'     IXLCACHE request                               00135000
         ORG   CMPLTYPE+1                                               00136000
CMPLFLAGS DS   0B        Flags                                          00137000
CMPLREBUILD EQU X'80'    On => Event reported for new structure during *00138000
                         the rebuild process. Off => structure not in  *00139000
                         rebuild, or event reported for the original   *00140000
                         structure during rebuild.                      00141000
         ORG   CMPLFLAGS+1                                              00142000
         DS    CL2       Reserved                                       00143000
CMPLRETCODE DS F         Return code. Values are defined in IXLYCON.    00144000
CMPLRSNCODE DS F         Reason code. Values are defined in IXLYCON.    00145000
         DS    CL12      Reserved                                       00146000
CMPLEND  DS    0C        Data related to the request is mapped below   *00147000
                         by CmplLockSection for lock structure         *00148000
                         requests and CmplLCSection for list and cache *00149000
                         structure requests                             00150000
CMPL_LEN EQU   *-CMPL                                                   00151000
*                                                                       00152000
*  ------------------------------------------------------------------   00153000
*    Cmpl Lock Section                                                  00154000
*  ------------------------------------------------------------------   00155000
*                                                                       00156000
*                                                                       00157000
         ORG   CMPLEND                                                  00158000
CMPLLOCKSECTION DS 0X                                                   00159000
CMPLLOCKDATA DS CL8      Lock time data. This value may be specified   *00160000
                         via the LOCKDATA keyword on an IXLLOCK        *00161000
                         request to obtain a resource. If specified,   *00162000
                         the value will be returned for completion of  *00163000
                         that event, as well as, for the completion of *00164000
                         any subsequent (i.e. Alters, Releases,        *00165000
                         Regrant) updates to the resource               00166000
CMPLRNAME@ DS  A         Address of resource name                       00167000
CMPLRNAMELEN DS F        Length of resource name                        00168000
CMPLHASHVAL DS F         Hash value                                     00169000
CMPLEVENT DS   X         Type of Event that is being reported (See     *00170000
                         IXLSERV... constants in macro IXLYCON for     *00171000
                         valid values)                                  00172000
CMPLRDATAINFO DS 0B      Flags providing information regarding the     *00173000
                         record data options specified on the original *00174000
                         requests, as well as, an indicator of which   *00175000
                         related record data fields are valid for this *00176000
                         request type                                   00177000
CMPLNORDATA EQU X'80'    Bit Indicating that no record data operation  *00178000
                         was requested. This bit will be ON when       *00179000
                         reporting completion of an IXLLOCK            *00180000
                         REQUEST(OBTAIN) RDATA(NORDATA),IXLLOCK        *00181000
                         REQUEST(ALTER) RDATA(UNCHANGED), or a Regrant *00182000
                         by the contention exit in which record data   *00183000
                         updates are not allowed                        00184000
CMPLRDATAWRITE EQU X'40' Bit indicating that a record data entry was   *00185000
                         requested to be created or updated. This bit  *00186000
                         will be ON when reporting completion of an    *00187000
                         IXLLOCK REQUEST(OBTAIN) RDATA(WRITE) or       *00188000
                         REQUEST(ALTER) RDATA(WRITE). The contents of  *00189000
                         the CmplRdata, CmplRtEntryId, and             *00190000
                         CmplRtEntryCount fields are valid when this   *00191000
                         field is set to ON                             00192000
CMPLRDATADELETE EQU X'20' Bit indicating that a record data entry was  *00193000
                         requested to be deleted. This bit will be ON  *00194000
                         when reporting completion of an IXLLOCK       *00195000
                         REQUEST(ALTER) RDATA(DELETE) or               *00196000
                         REQUEST(RELEASE) RDATA(DELETE)                 00197000
CMPLRDATAKEEP EQU X'10'  Bit indicating that a record data entry was   *00198000
                         requested to be kept. This bit will be ON     *00199000
                         when reporting completion of an IXLLOCK       *00200000
                         REQUEST(RELEASE) RDATA(KEEP) UPDATERDATA(NO)   00201000
CMPLRDATAKEEPANDUPDATE EQU X'08' Bit indicating that a record data     *00202000
                         entry was requested to be kept and updated.   *00203000
                         This bit will be ON when reporting completion *00204000
                         of an IXLLOCK REQUEST(RELEASE) RDATA(KEEP)    *00205000
                         UPDATERDATA(YES). The content of the          *00206000
                         CmplRdata field is valid when this field is   *00207000
                         set to ON                                      00208000
CMPLRDATAREACQUIRE EQU X'04' Bit indicating that a record data entry   *00209000
                         was requested to be Reacquired. This bit will *00210000
                         be ON when reporting completion of an IXLLOCK *00211000
                         REQUEST(OBTAIN) RDATA(REACQUIRE)              *00212000
                         UPDATERDATA(NO)                                00213000
CMPLRDATAREACQUIREANDUPDATE EQU X'02' Bit indicating that a record     *00214000
                         data entry was requested to be Reacquired and *00215000
                         Updated. This bit will be ON when reporting   *00216000
                         completion of an IXLLOCK REQUEST(OBTAIN)      *00217000
                         RDATA(REACQUIRE) UPDATERDATA(YES). The        *00218000
                         content of the CmplRdata field is valid when  *00219000
                         this field is set to ON                        00220000
         ORG   CMPLRDATAINFO+1                                          00221000
CMPLLOCKFLAGS DS 0B      Miscellaneous Flags                            00222000
CMPLREQHADCONTENTION EQU X'80' On - request encountered either real or *00223000
                         false contention. Real contention encountered *00224000
                         when CmplFalseContention is Off. False        *00225000
                         contention encountered when                   *00226000
                         CmplFalseContention is also On.                00227000
CMPLFALSECONTENTION EQU X'40' On - request encountered false           *00228000
                         contention. Off - request did not encounter   *00229000
                         false contention. Only meaningful when        *00230000
                         CmplReqHadContention is also On.               00231000
         ORG   CMPLLOCKFLAGS+1                                          00232000
CMPLSU   DS    0CL65     State, userdata                                00233000
CMPLSTATE DS   X         Ownership state when return code implies a    *00234000
                         successful update. Otherwise, requested       *00235000
                         state.                                         00236000
CMPLUDATA DS   CL64      Userdata associated with the owned resource   *00237000
                         when the return code implies a successful     *00238000
                         update. Otherwise, this field contains the    *00239000
                         requested userdata including any updates made *00240000
                         by the contention exit                         00241000
CMPLRDATA DS   CL64      Value that was written to a Coupling Facility *00242000
                         record data entry when return code indicates  *00243000
                         a succesful request. Otherwise, this field    *00244000
                         contains the value requested on the IXLLOCK   *00245000
                         request plus any updates made by the          *00246000
                         contention exit. Please note, the Content of  *00247000
                         this field is only valid if one of the        *00248000
                         following bits is ON: CmplRdataWrite,         *00249000
                         CmplRdataReacquireAndUpdate                   *00250000
                         CmplRdataKeepAndUpdate                         00251000
CMPLRTENTRYID DS CL12    Record Data Entry Identifier of the record    *00252000
                         data entry that was created or updated when   *00253000
                         return code indicates a successful request.   *00254000
                         This field is only valid if the               *00255000
                         CmplRdataWrite bit is ON                       00256000
CMPLRTENTRYCOUNT DS F    Indicates the number of record table elements *00257000
                         that are currently in use for this Lock       *00258000
                         Structure when return code indicates a        *00259000
                         successful update. This field is only valid   *00260000
                         if the CmplRdataWrite bit is ON                00261000
CMPLLOCKSECTIONVER DS H  Version number of the lock section data. Use  *00262000
                         the CmplLockSection mapping when the version  *00263000
                         number is CmplLockVer0. Use the               *00264000
                         CmplLockSection1 mapping when the version     *00265000
                         number is CmplLockVer1.                        00266000
CMPLLOCKSECTIONLEN DS H  Length of the lock section data. Valid only   *00267000
                         when CmplLockSectionVer is equal to or        *00268000
                         greater than CmplLockVer1.                     00269000
         DS    CL12      Reserved                                       00270000
CMPLLOCKSECTION_LEN EQU *-CMPLLOCKSECTION                               00271000
         ORG   ,                                                        00272000
*                                                                       00273000
*  ------------------------------------------------------------------   00274000
*    Cmpl Lock Section 1                                                00275000
*  --------------------------------------------------------------       00276000
*                                                                       00277000
*                                                                       00278000
         ORG   CMPLEND                                                  00279000
CMPLLOCKSECTION1 DS 0X                                                  00280000
         DS    CL184     Mapped by CmplLockSection                      00281000
CMPL1ADUPREQSEQNUM DS CL16 Asynchronous duplexing request sequence     *00282000
                         number assigned to the request if one was     *00283000
                         generated. Otherwise this field contains      *00284000
                         zero. See the ADupReqSeqNum keyword on the    *00285000
                         IXLLOCK macro for more information.            00286000
         DS    CL176     Reserved                                       00287000
CMPLLOCKSECTION1_LEN EQU *-CMPLLOCKSECTION1                             00288000
         ORG   ,                                                        00289000
*                                                                       00290000
*  ------------------------------------------------------------------   00291000
*    Cmpl List/Cache Section                                            00292000
*  ------------------------------------------------------------------   00293000
*                                                                       00294000
*                                                                       00295000
         ORG   CMPLEND                                                  00296000
CMPLLCSECTION DS 0X                                                     00297000
CMPLREQDATA DS CL8       Request-time user data                         00298000
CMPLANSAREAINFO DS 0CL8                                                 00299000
CMPLANSAREAALET DS F     Answer area ALET for this request              00300000
CMPLANSAREA@ DS A        Answer area address for this request           00301000
         DS    CL16      Reserved                                       00302000
CMPLLCLEN EQU  96                                                       00303000
CMPLLOCKLEN EQU 248                                                     00304000
CMPLLOCKLEN1 EQU 440                                                    00305000
CMPLLOCKVER0 EQU 0       Version 0                                      00306000
CMPLLOCKVER1 EQU 1       Version 1                                      00307000
CMPLLCSECTION_LEN EQU *-CMPLLCSECTION                                   00308000
         ORG   ,                                                        00309000
.L0002   ANOP                                                           00310000
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 00311000
         AIF   ('&LIST' EQ 'YES').P4                                    00312000
.P3      ANOP                                                           00313000
         POP   PRINT                                                    00314000
.P4      ANOP                                                           00315000
.P_EXIT  ANOP                                                           00316000
         MEND                                                           00317000
**/ IXLYCMPL_2:;                                                        00318000
* %IXLYCMPL_INCLUDED = 'YES';                                           00319000
* %DCL ZCBPRINT CHAR EXT;                                               00320000
* %DEACTIVATE ZCBPRINT;                                                 00321000
* %DCL IXLYCMPL_LIST CHAR EXT;                                          00322000
* %DEACTIVATE IXLYCMPL_LIST;                                            00323000
* %IF IXLYCMPL_LIST ^= 'NO' &                                           00324000
*    ZCBPRINT ^= 'NO' %THEN                                             00325000
*   %GOTO IXLYCMPL_3;                                                   00326000
*   @LIST PUSH NOECHO;                                                  00327000
*   @LIST NOASSEMBLE NOECHO;                                            00328000
*   @LIST OFF C NOECHO;                                                 00329000
* %IXLYCMPL_3:;                                                         00330000
*/* Start of PL/X Source                                             */ 00331000
*                                                                       00332000
*/*------------------------------------------------------------------*/ 00333000
*/*  Cmpl Common Header                                              */ 00334000
*/*------------------------------------------------------------------*/ 00335000
* DCL 1 CMPL BASED BDY(DWORD),     /* Complete exit parameter list   */ 00336000
*      2 CmplConToken Char(16),    /* Connect token                  */ 00337000
*      2 CmplConData  Char(8),     /* Connect-time data              */ 00338000
*      2 CmplConName  Char(16),    /* Connect name as specified by      00339000
*                                     connector                      */ 00340000
*      2 CmplType     Bit(8),      /* Request type that resulted in     00341000
*                                     complete exit being called     */ 00342000
*       3 CmplLock      Bit(1),    /* IXLLOCK request or contention     00343000
*                                     exit specified regrant         */ 00344000
*       3 CmplList      Bit(1),    /* IXLLIST request                */ 00345000
*       3 CmplCache     Bit(1),    /* IXLCACHE request               */ 00346000
*       3 *             Bit(5),    /* Reserved                       */ 00347000
*      2 CmplFlags    Bit(8),      /* Flags                          */ 00348000
*       3 CmplRebuild   Bit(1),    /* On => Event reported for new      00349000
*                                     structure during the rebuild      00350000
*                                     process.                          00351000
*                                     Off => structure not in rebuild,  00352000
*                                     or event reported for the         00353000
*                                     original structure during         00354000
*                                     rebuild.                       */ 00355000
*       3 *             Bit(7),    /* Reserved                       */ 00356000
*      2 *            Char(2),     /* Reserved                       */ 00357000
*      2 CmplRetCode  Fixed(32),   /* Return code.  Values are defined  00358000
*                                     in IXLYCON.                    */ 00359000
*      2 CmplRsnCode  Fixed(32),   /* Reason code.  Values are defined  00360000
*                                     in IXLYCON.                    */ 00361000
*      2 *            Char(12),    /* Reserved                       */ 00362000
*      2 CmplEnd Char(0) Bdy(DWord); /* Data related to the request is  00363000
*                                     mapped below by CmplLockSection   00364000
*                                     for lock structure requests and   00365000
*                                     CmplLCSection for list and        00366000
*                                     cache structure requests       */ 00367000
*                                                                       00368000
*                                                                       00369000
*/*------------------------------------------------------------------*/ 00370000
*/*  Cmpl Lock Section                                               */ 00371000
*/*------------------------------------------------------------------*/ 00372000
* DCL 1 CmplLockSection Def(CmplEnd)                                    00373000
*                 Char(184),        /* Data related to IXLLOCK request  00374000
*                                      or regrant by contention exit */ 00375000
*      2 CmplLockData Char(8),      /* Lock time data.  This value may  00376000
*                                      be specified via the LOCKDATA    00377000
*                                      keyword on an IXLLOCK request to 00378000
*                                      obtain a resource.  If           00379000
*                                      specified, the value will be     00380000
*                                      returned for completion of that  00381000
*                                      event, as well as, for the       00382000
*                                      completion of any subsequent     00383000
*                                      (i.e.  Alters, Releases,         00384000
*                                      Regrant) updates to the resource 00385000
*                                                                    */ 00386000
*      2 CmplRname@ PTR(31),        /* Address of resource name      */ 00387000
*      2 CmplRnameLen FIXED(32),    /* Length of resource name       */ 00388000
*      2 CmplHashVal FIXED(32),     /* Hash value                    */ 00389000
*      2 CmplEvent FIXED(8),        /* Type of Event that is being      00390000
*                                      reported (See IXLSERV...         00391000
*                                      constants in macro IXLYCON for   00392000
*                                      valid values)                 */ 00393000
*      2 CmplRdataInfo   Bit(8),    /* Flags providing information      00394000
*                                      regarding the record data        00395000
*                                      options specified on the         00396000
*                                      original requests, as well as,   00397000
*                                      an indicator of which related    00398000
*                                      record data fields are valid for 00399000
*                                      this request type         @P1A*/ 00400000
*       3 CmplNoRdata    Bit(1),    /* Bit Indicating that no record    00401000
*                                      data operation was requested.    00402000
*                                      This bit will be ON when         00403000
*                                      reporting completion of an       00404000
*                                      IXLLOCK REQUEST(OBTAIN)          00405000
*                                      RDATA(NORDATA),IXLLOCK           00406000
*                                      REQUEST(ALTER) RDATA(UNCHANGED), 00407000
*                                      or a Regrant by the contention   00408000
*                                      exit in which record data        00409000
*                                      updates are not allowed   @P1A*/ 00410000
*       3 CmplRdataWrite Bit(1),    /* Bit indicating that a record     00411000
*                                      data entry was requested to be   00412000
*                                      created or updated.  This bit    00413000
*                                      will be ON when reporting        00414000
*                                      completion of an IXLLOCK         00415000
*                                      REQUEST(OBTAIN) RDATA(WRITE) or  00416000
*                                      REQUEST(ALTER) RDATA(WRITE).     00417000
*                                      The contents of the CmplRdata,   00418000
*                                      CmplRtEntryId, and               00419000
*                                      CmplRtEntryCount fields are      00420000
*                                      valid when this field is set to  00421000
*                                      ON                        @P1A*/ 00422000
*       3 CmplRdataDelete Bit(1),   /* Bit indicating that a record     00423000
*                                      data entry was requested to be   00424000
*                                      deleted.  This bit will be ON    00425000
*                                      when reporting completion of an  00426000
*                                      IXLLOCK REQUEST(ALTER)           00427000
*                                      RDATA(DELETE) or                 00428000
*                                      REQUEST(RELEASE) RDATA(DELETE)   00429000
*                                                                @P1A*/ 00430000
*       3 CmplRdataKeep   Bit(1),   /* Bit indicating that a record     00431000
*                                      data entry was requested to be   00432000
*                                      kept.  This bit will be ON when  00433000
*                                      reporting completion of an       00434000
*                                      IXLLOCK REQUEST(RELEASE)         00435000
*                                      RDATA(KEEP) UPDATERDATA(NO)      00436000
*                                                                @P1A*/ 00437000
*       3 CmplRdataKeepAndUpdate   Bit(1), /* Bit indicating that a     00438000
*                                      record data entry was requested  00439000
*                                      to be kept and updated.  This    00440000
*                                      bit will be ON when reporting    00441000
*                                      completion of an IXLLOCK         00442000
*                                      REQUEST(RELEASE) RDATA(KEEP)     00443000
*                                      UPDATERDATA(YES).  The content   00444000
*                                      of the CmplRdata field is valid  00445000
*                                      when this field is set to ON     00446000
*                                                                @P1A*/ 00447000
*       3 CmplRdataReacquire       Bit(1), /* Bit indicating that a     00448000
*                                      record data entry was requested  00449000
*                                      to be Reacquired.  This bit will 00450000
*                                      be ON when reporting completion  00451000
*                                      of an IXLLOCK REQUEST(OBTAIN)    00452000
*                                      RDATA(REACQUIRE) UPDATERDATA(NO) 00453000
*                                                                @P1A*/ 00454000
*       3 CmplRdataReacquireAndUpdate   Bit(1), /* Bit indicating that  00455000
*                                      a record data entry was          00456000
*                                      requested to be Reacquired and   00457000
*                                      Updated.  This bit will be ON    00458000
*                                      when reporting completion of an  00459000
*                                      IXLLOCK REQUEST(OBTAIN)          00460000
*                                      RDATA(REACQUIRE)                 00461000
*                                      UPDATERDATA(YES).  The content   00462000
*                                      of the CmplRdata field is valid  00463000
*                                      when this field is set to ON     00464000
*                                                                @P1A*/ 00465000
*       3 *                        Bit(1), /* Reserved           @P1A*/ 00466000
*      2 CmplLockFlags Bit(8)       /* Miscellaneous Flags       @P3C*/ 00467000
*      ,3 CmplReqHadContention                                          00468000
*                            Bit(1) /* On - request encountered         00469000
*                                      either real or false             00470000
*                                      contention. Real contention      00471000
*                                      encountered when                 00472000
*                                      CmplFalseContention is Off.      00473000
*                                      False contention encountered     00474000
*                                      when CmplFalseContention is      00475000
*                                      also On.                  @P3A*/ 00476000
*      ,3 CmplFalseContention Bit(1) /* On - request encountered        00477000
*                                      false contention.                00478000
*                                      Off - request did not            00479000
*                                      encounter false contention.      00480000
*                                      Only meaningful when             00481000
*                                      CmplReqHadContention is          00482000
*                                      also On.                  @P3A*/ 00483000
*      ,3 *                  Bit(6),/* Reserved                  @P3A*/ 00484000
*      2 CmplSU,                    /* State, userdata               */ 00485000
*       3 CmplState FIXED(8),       /* Ownership state when return code 00486000
*                                      implies a successful update.     00487000
*                                      Otherwise, requested state.   */ 00488000
*       3 CmplUdata CHAR(64),       /* Userdata associated with the     00489000
*                                      owned resource when the return   00490000
*                                      code implies a successful        00491000
*                                      update.  Otherwise, this field   00492000
*                                      contains the requested userdata  00493000
*                                      including any updates made by    00494000
*                                      the contention exit           */ 00495000
*      2 CmplRdata CHAR(64),        /* Value that was written to a      00496000
*                                      Coupling Facility record data    00497000
*                                      entry when return code indicates 00498000
*                                      a succesful request.  Otherwise, 00499000
*                                      this field contains the value    00500000
*                                      requested on the IXLLOCK request 00501000
*                                      plus any updates made by the     00502000
*                                      contention exit.  Please note,   00503000
*                                      the Content of this field is     00504000
*                                      only valid if one of the         00505000
*                                      following bits is ON:            00506000
*                                      CmplRdataWrite,                  00507000
*                                      CmplRdataReacquireAndUpdate      00508000
*                                      CmplRdataKeepAndUpdate        */ 00509000
*      2 CmplRtEntryId Char(12),    /* Record Data Entry Identifier of  00510000
*                                      the record data entry that was   00511000
*                                      created or updated when return   00512000
*                                      code indicates a successful      00513000
*                                      request.  This field is only     00514000
*                                      valid if the CmplRdataWrite bit  00515000
*                                      is ON                         */ 00516000
*      2 CmplRtEntryCount Fixed(32), /* Indicates the number of record  00517000
*                                      table elements that are          00518000
*                                      currently in use for this Lock   00519000
*                                      Structure when return code       00520000
*                                      indicates a successful update.   00521000
*                                      This field is only valid if      00522000
*                                      the CmplRdataWrite bit is ON  */ 00523000
*      2 CmplLockSectionVer Fixed(16), /* Version number of the         00524000
*                                      lock section data. Use the       00525000
*                                      CmplLockSection mapping when     00526000
*                                      the version number is            00527000
*                                      CmplLockVer0. Use the            00528000
*                                      CmplLockSection1 mapping when    00529000
*                                      the version number is            00530000
*                                      CmplLockVer1.             @L2A*/ 00531000
*      2 CmplLockSectionLen Fixed(16), /* Length of the lock section    00532000
*                                      data. Valid only when            00533000
*                                      CmplLockSectionVer is equal to   00534000
*                                      or greater than CmplLockVer1.    00535000
*                                                                @L2A*/ 00536000
*      2 * Char(12),                /* Reserved                  @L2A*/ 00537000
*      2 * CHAR(0);                 /* End of CMPL lock section  @P1C*/ 00538000
*                                                                       00539000
*/*------------------------------------------------------------------*/ 00540000
*/*  Cmpl Lock Section 1                                             */ 00541000
*/*--------------------------------------------------------------@L2A*/ 00542000
* DCL 1 CmplLockSection1 Def(CmplEnd)                                   00543000
*                 Char(376),        /* Version 1 of the lock section    00544000
*                                      data                      @L2A*/ 00545000
*      2 * Char(Length(CmplLockSection)), /* Mapped by                  00546000
*                                      CmplLockSection           @L2A*/ 00547000
*      2 Cmpl1ADupReqSeqNum Char(16), /* Asynchronous duplexing request 00548000
*                                      sequence number assigned to      00549000
*                                      the request if one was           00550000
*                                      generated. Otherwise this field  00551000
*                                      contains zero. See the           00552000
*                                      ADupReqSeqNum keyword on the     00553000
*                                      IXLLOCK macro for more           00554000
*                                      information.              @L2A*/ 00555000
*      2 * Char(176),               /* Reserved                  @L2A*/ 00556000
*      2 * CHAR(0);                 /* End of version 1 CMPL lock       00557000
*                                      section                   @L2A*/ 00558000
*                                                                       00559000
*DCL CmplRname CHAR(*) BASED;       /*                               */ 00560000
*                                                                       00561000
*/*------------------------------------------------------------------*/ 00562000
*/*  Cmpl List/Cache Section                                         */ 00563000
*/*------------------------------------------------------------------*/ 00564000
* Dcl 1 CmplLCSection Def(CmplEnd) Char(32),                            00565000
*                                     /* Data related to IXLLIST or     00566000
*                                        IXLCACHE request            */ 00567000
*      2 CmplReqData      Char(8),    /* Request-time user data      */ 00568000
*      2 CmplAnsAreaInfo  Char(8) Bdy(Word),                            00569000
*        3 CmplAnsAreaAlet Fixed(32), /* Answer area ALET for this      00570000
*                                        request                     */ 00571000
*        3 CmplAnsArea@    Ptr(31),   /* Answer area address for this   00572000
*                                        request                     */ 00573000
*      2 *                Char(16),   /* Reserved                    */ 00574000
*      2 *                Char(0);    /* End of Cmpl list/cache      */ 00575000
*                                                                       00576000
*                                                                       00577000
*  Dcl CmplLCLen Constant(Length(CMPL)+Length(CmplLCSection));          00578000
*  Dcl CmplLockLen Constant(Length(CMPL)+Length(CmplLockSection));      00579000
*  Dcl CmplLockLen1 Constant(Length(CMPL)+Length(CmplLockSection1)); /* 00580000
*                                                                @L2A*/ 00581000
*                                                                       00582000
*  Dcl CmplLockVer0 Constant(0);    /* Version 0                 @L2A*/ 00583000
*  Dcl CmplLockVer1 Constant(1);    /* Version 1                 @L2A*/ 00584000
*                                                                       00585000
*                                                                       00586000
*/* End of PL/X Source                                               */ 00587000
* %IF IXLYCMPL_LIST ^= 'NO' &                                           00588000
*    ZCBPRINT ^= 'NO' %THEN                                             00589000
*   %GOTO IXLYCMPL_4;                                                   00590000
*   @LIST POP NOECHO;                                                   00591000
* %IXLYCMPL_4:;                                                         00592000
* %END;                                                                 00593000
