*                                                                       00001000
* %DCL IRARMCTZ_INCLUDED CHAR EXT;                                      00002000
* %DEACTIVATE IRARMCTZ_INCLUDED;                                        00003000
* %IF IRARMCTZ_INCLUDED = '' %THEN                                      00004000
* %DO;                                                                  00005000
*%/* Start of PL/X PreProlog Code */;                                   00006000
*/********************************************************************/ 00007000
*%/* End of PL/X PreProlog Code */;                                     00008000
*/* Macro made bi-lingual on 19324. CBGEN compile date 19044         */ 00009000
*% /*                                                                   00010000
         MACRO                                                          00011000
         IRARMCTZ &DSECT=YES,&LIST=YES,&TITLE=YES,&RMCTZ=YES            00012000
                      GBLC  &IRARMCTZ_INCLUDED                          00013000
                      GBLC  &ZCBPRINT                                   00014000
&IRARMCTZ_INCLUDED    SETC  'YES'                                       00015000
                      AIF   ('&LIST' EQ 'NONE').P0                      00016000
                      AIF   ('&TITLE' EQ 'NO').P5                       00017000
 TITLE                'IRARMCTZ  - Resources Manager Control Table Exte*00018000
               ns. 3  '                                                 00019000
.P5                   ANOP                                              00020000
**/ IRARMCTZ_1:;                                                        00021000
*/* START OF SPECIFICATIONS                                          */ 00022000
*/*                                                                  */ 00023000
*/*01* PROPRIETARY STATEMENT=                                        */ 00024000
*/*                                                                  */ 00025000
*/*      LICENSED MATERIALS - PROPERTY OF IBM                        */ 00026000
*/*      5650-ZOS COPYRIGHT IBM CORP. 2010, 2021             @LHWCONC*/ 00027000
*/*                                                                  */ 00028000
*/*    STATUS = HBB77D0                                      @LHWCONC*/ 00029000
*/*                                                                  */ 00030000
*/**** END_OF_PROPRIETARY_STATEMENT **********************************/ 00031000
*/*                                                                  */ 00032000
*/*01* EXTERNAL CLASSIFICATION: PI                                   */ 00033000
*/*01* END OF EXTERNAL CLASSIFICATION:                               */ 00034000
*/*                                                                  */ 00035000
*/*                                                                  */ 00036000
*/*01* Descriptive Name:  Resources Manager Control Table Extens. 3  */ 00037000
*/*02*  Acronym:  IRARMCTZ                                           */ 00038000
*/*                                                                  */ 00039000
*/*01* Macro Name:  IRARMCTZ                                         */ 00040000
*/*                                                                  */ 00041000
*/*01* DSECT Name:  Rmctz                                            */ 00042000
*/*                                                                  */ 00043000
*/*01* Component:  SYSTEMS RESOURCE MANAGER (SC1CX)                  */ 00044000
*/*                                                                  */ 00045000
*/*01* Eye-Catcher:  IRARMCTZ                                        */ 00046000
*/*02*  OFFSET:  0                                                   */ 00047000
*/*02*  LENGTH:  8                                                   */ 00048000
*/*                                                                  */ 00049000
*/*01* Storage Attributes:   (same as RMCT)                          */ 00050000
*/*02*  Subpool:  245                                                */ 00051000
*/*02*  Key:        0                                                */ 00052000
*/*02*  Residency:  Above 16M line                                   */ 00053000
*/*02*  Main Storage:  ESQA                                          */ 00054000
*/*02*  Auxiliary Storage:                                           */ 00055000
*/*02*  Virtual Storage:                                             */ 00056000
*/*                                                                  */ 00057000
*/*01* Size:  1260 bytes                                     @LRMFCPU*/ 00058000
*/*                                                                  */ 00059000
*/*01* Created by:  IEAVNP10                                         */ 00060000
*/*                                                                  */ 00061000
*/*01* Pointed to by: RMCTX3                                         */ 00062000
*/*                                                                  */ 00063000
*/*01* Serialization:  NONE                                          */ 00064000
*/*                                                                  */ 00065000
*/*01* Function:                                                     */ 00066000
*/*                                                                  */ 00067000
*/*         This block contains programming interface data needed    */ 00068000
*/*         for customer use e.g. for RMF or vendor products         */ 00069000
*/*                                                                  */ 00070000
*/*                                                                  */ 00071000
*/*01* Method of Access:                                             */ 00072000
*/*                                                                  */ 00073000
*/*            RMCT field RMCTX3                                     */ 00074000
*/*                                                                  */ 00075000
*/*02*  PL/X:                                                        */ 00076000
*/*            The RMCT must be included to use this mapping.        */ 00077000
*/*                                                                  */ 00078000
*/*------------------------------------------------------------------*/ 00079000
*/*                                                                  */ 00080000
*/*01* Change Activity:                                              */ 00081000
*/*                                                                  */ 00082000
*/*    $LPOWSM     HBB7770  090227 3214JS: Juergen Schneider LI1947  */ 00083000
*/*                                        initial version 1.00      */ 00084000
*/*    $LRMFCPU    HBB7770  090618 3214JS: Juergen Schneider LI791   */ 00085000
*/*                                        RMF WEB Queue support     */ 00086000
*/*    $LRMFCPU    HBB7770  091008 3214JS: Juergen Schneider LI791   */ 00087000
*/*                                        RMF WEB Queue support     */ 00088000
*/*                                        after code review, remove */ 00089000
*/*                                        RMCTZ_sampling_first_time */ 00090000
*/*    $ME17802    HBB7770  091125 3214JS: Juergen Schneider  OA31201*/ 00091000
*/*                                        relocate RMCTY_CEC_       */ 00092000
*/*                                        capacity and RMCTY adjc_  */ 00093000
*/*                                        CEC into IRARMCTZ ,       */ 00094000
*/*                                        increase version number   */ 00095000
*/*                                        of RMCTZ                  */ 00096000
*/*    $ME18235    HBB7770 100125 3241RS:  Ralf Streit               */ 00097000
*/*                                        Non shell server          */ 00098000
*/*                                        management: Transfer      */ 00099000
*/*                                        service times of non      */ 00100000
*/*                                        enclave work into origin  */ 00101000
*/*                                        ESP                       */ 00102000
*/*    $LCPOPT     HBB7780 100208 3241DW:  Dieter Wellerdiek         */ 00103000
*/*                                        CBGEN generation enhanced */ 00104000
*/*    $LSLEDR     HBB7780 100209 3241AK:  Anette Kempfert           */ 00105000
*/*                                        Sledrunner Support        */ 00106000
*/*    $ME19085    HBB7770 100430 3214AK:  Anette Kempfert           */ 00107000
*/*                                        CCR 0 now valid           */ 00108000
*/*    $OA34801     HBB7780 101104 3241RS: Ralf Streit               */ 00109000
*/*                                        Report transaction        */ 00110000
*/*                                        completions               */ 00111000
*/*    $ME20643    HBB7780 101220 3241KHH: K.-H. Holder              */ 00112000
*/*                                        move Rmcty_FullPreSystem  */ 00113000
*/*                                        to IRARMCTZ for access by */ 00114000
*/*                                        RMF.                      */ 00115000
*/*    $LCRTME     HBB7780 110210 3241IS:  Irene Stahl               */ 00116000
*/*                                        CICS Response Time        */ 00117000
*/*                                        Management Enhancement    */ 00118000
*/*                                        Disable REPORTCOMPLETIONS */ 00119000
*/*    $OA35428    HBB7780 110418 3241IS:  Irene Stahl       @LCRTME */ 00120000
*/*                                        CICS Response Time        */ 00121000
*/*                                        Management Enhancement    */ 00122000
*/*                                        Remove REPORTCOMPLETIONS  */ 00123000
*/*    $OA35428    HBB7780 110608 3241IS:  Irene Stahl       @LCRTME */ 00124000
*/*                                        CICS Response Time        */ 00125000
*/*                                        Management Enhancement    */ 00126000
*/*                                        Change comment for        */ 00127000
*/*                                        RMCTZ_ABN_OPT             */ 00128000
*/*    $OA39437    HBB7790 120615 3241GV:  Guenter Vater             */ 00129000
*/*                                        Set RMCTZ_Last_PA_TOD     */ 00130000
*/*    $OA40613    HBB7790 121030 3241JS:  Juergen Schneider         */ 00131000
*/*                                        add RMCTZ_routing_PI_     */ 00132000
*/*                                        Factor_percentage         */ 00133000
*/*                                        increase version number   */ 00134000
*/*                                        of RMCTZ                  */ 00135000
*/*    $ME25132    HBB7790 121109 3241AK:  Anette Kempfert           */ 00136000
*/*    $LDYSMT     HBB7790 120919 3241RS:  Ralf Streit               */ 00137000
*/*                                        Dynamic SMT support       */ 00138000
*/*    $OA49201    HBB77A0 151026 3241AB:  Armin Buechler            */ 00139000
*/*                                        ABSMSUCAPPING     @Permcap*/ 00140000
*/*    $OA48478    HBB77A0 151028 3241AB:  Armin Buechler            */ 00141000
*/*                                        5 digit CPU serial number */ 00142000
*/*                                        SYSZWLMxxxxxyyyy str name */ 00143000
*/*    $LRTCAP     HBB77B0 150722 3241AK:  Anette Kempfert           */ 00144000
*/*                                        Routing Enhancemnts for   */ 00145000
*/*                                        Soft capping              */ 00146000
*/*    $OA50291    HBB77A0 160322 3241IS:  Irene Stahl               */ 00147000
*/*                                        Suppress ICH70001I message*/ 00148000
*/*    $WI164354   HBB77B0 170328 3241AK:  Anette Kempfert  @OA52608 */ 00149000
*/*                                        Routing Enhancemnts for   */ 00150000
*/*                                        Soft capping              */ 00151000
*/*    $LHWCON     HBB77C0 180110 3241MG:  Matthias Gubitz           */ 00152000
*/*                                        zCBP support              */ 00153000
*/*    $LHWCON     HBB77C0 180208 3241AK:  Anette Kempfert           */ 00154000
*/*                                        zCBP support              */ 00155000
*/*    $OA55218    HBB77B0 180328 3241AB:  Armin Buechler            */ 00156000
*/*                                        Offset of WLMIRDSTRUC     */ 00157000
*/*                                        field moved in z/OS 2.3   */ 00158000
*/*    $LBOOST     HBB77D0 190718 3241AK:  Anette Kempfert           */ 00159000
*/*                                        System Recovery Boost and */ 00160000
*/*                                        add space for future use  */ 00161000
*/*    $204BIR     HBB77C0 190826 3241AB:  Armin Buechler            */ 00162000
*/*                                        Diagnose 204 busy         */ 00163000
*/*                                        indication                */ 00164000
*/*    $LBOOS2     HBB77D0 191031 3241AK:  Anette Kempfert           */ 00165000
*/*                                        System Recovery Boost     */ 00166000
*/*                                        stage 2                   */ 00167000
*/*                                                                  */ 00168000
*/** END OF SPECIFICATIONS *******************************************/ 00169000
*% /*                                                                   00170000
.P0                   ANOP                                              00171000
                      AIF   ('&ZCBPRINT' EQ 'NO').P1                    00172000
                      AIF   ('&LIST' EQ 'YES').P2                       00173000
.P1                   ANOP                                              00174000
                      PUSH  PRINT                                       00175000
                      PRINT OFF                                         00176000
.P2                   ANOP                                              00177000
                      AIF   ('&RMCTZ' EQ 'NO').L0002                    00178000
                      AIF   ('&DSECT' EQ 'YES').L0003                   00179000
                      AIF   ('&RMCTZ' NE 'YES').L0002                   00180000
RMCTZ                 DS    0D                                          00181000
                      AGO   .L0004                                      00182000
.L0003                ANOP                                              00183000
RMCTZ                 DSECT                                             00184000
.L0004                ANOP                                              00185000
RMCTZ_Name            DS    CL8    Control block acronym                00186000
RMCTZ_Version         DS    X      Version                              00187000
                      DS    X      Reserved                             00188000
RMCTZ_Length          DS    H      Size of RMCTZ                        00189000
RMCTZ_LPAR_Flags      DS    B      LPAR Management flags updated by    *00190000
                                   SRM                                  00191000
*  Bit definitions:                                                     00192000
RMCTZ_LPARMgmt_Enabled EQU  X'80'  When on, WLM LPAR Management        *00193000
                                   processing is enabled                00194000
RMCTZ_LPAR_VaryCPU_Enabled EQU X'40' When on, VARYCPU optio is turned  *00195000
                                   on either by default or is          *00196000
                                   explicitly set ON                    00197000
RMCTZ_Flag1           DS    B      Flag byte 1                          00198000
*  Bit definitions:                                                     00199000
RMCTZ_ABN_OPT         EQU   X'80'  When on, ABNORMALTERM option set to *00200000
                                   NO                                   00201000
RMCTZ_Manage_NonEnclave_Work EQU X'40' When on, manage address space   *00202000
                                   transaction work of enclave servers  00203000
RMCTZ_Flag1_Rsvd1     EQU   X'3F'  Reserved                             00204000
RMCTZ_Flag2           DS    B      Flag byte 2                          00205000
*  Bit definitions:                                                     00206000
RMCTZ_VCM_OPT         EQU   X'80'  When on, VCM specified               00207000
RMCTZ_VCM             EQU   X'40'  When on, running in vertical CP     *00208000
                                   management mode                      00209000
RMCTZ_IOMS            EQU   X'20'  When on, I/O management support     *00210000
                                   turned on                            00211000
RMCTZ_FullPreSystem   EQU   X'10'  When on, FullPreSystem specified     00212000
RMCTZ_ABSMSUCAPPING   EQU   X'08'  When on, ABSMSUCAPPING               00213000
RMCTZ_SUPPSAFINFOMSG  EQU   X'04'  When on, SUPPSAFINFOMSG              00214000
RMCTZ_Flag2_Rsvd1     EQU   X'03'  Reserved                             00215000
RMCTZ_Rsvd1           DS    B      Reserved                             00216000
RMCTZ_INITIMP_DP      DS    H      Initiator dispatching priority       00217000
RMCTZ_INITIMP         DS    H      INITIMP value specified in in       *00218000
                                   IEAOPTxx member                      00219000
RMCTZ_Lpar_WtMgmt     DS    CL1    LPAR weight mgmt section             00220000
                      ORG   RMCTZ_Lpar_WtMgmt                           00221000
RMCTZ_Lpar_VaryCpuMin DS    X      Minimum number of CPs which must    *00222000
                                   stay online                          00223000
RMCTZ_WasRoutingLevel DS    X      Status of WASROUTINGLEVEL IEAOPT    *00224000
                                   parameter. If routing level is 0,   *00225000
                                   WLM uses the newest routing         *00226000
                                   algorithm which is supported by all *00227000
                                   systems in the sysplex. A level of  *00228000
                                   1 activates ROUNDROBIN algorithm.   *00229000
                                   Level 2 uses only available CP      *00230000
                                   capacity for routing                *00231000
                                   recommendations and level 3 uses    *00232000
                                   CP, AAP and IIP capacity for         00233000
*                                  routing decisions.                   00234000
                      DS    CL2    Reserved                             00235000
RMCTZ_Capacity_Change_Time DS BL8  Time when the capacity was last     *00236000
                                   channged                             00237000
RMCTZ_Capacity_Adjustment_Indication DS X When zero, indication is not *00238000
                                   reported. When in the range 1-99,   *00239000
                                   some amount of reduction is         *00240000
                                   indicated. When 100, the machine is *00241000
                                   operating at its normal capacity.   *00242000
                                   Primary CPUs and all secondary-type *00243000
                                   CPUs are similarly affected          00244000
RMCTZ_Capacity_Change_Reason DS X  Indicates the reason which is       *00245000
                                   associated with the present value   *00246000
                                   contained in                        *00247000
                                   RMCTZ_Capacity_Adjustment_          *00248000
                                   Indication                           00249000
RMCTZ_CAI_IPL         DS    X      Capacity adjustment indication at   *00250000
                                   IPL                                  00251000
RMCTZ_CCR_IPL         DS    X      Capacity change reason at IPL        00252000
RMCTZ_nominal_CPMP    DS    F      Nominal CPU adjustment factor       *00253000
                                   (similar to RMCTCPMP but for        *00254000
                                   nominal speed)                       00255000
RMCTZ_RMF_CPU_sampling_index DS F  Index of RMF CPU samling area        00256000
RMCTZ_Adjc_CEC        DS    F      CPU rate adjustment factor based on *00257000
                                   the number of physical CPUs         *00258000
                                   available for the logical           *00259000
                                   partitions to share, excluding      *00260000
                                   speed boost                          00261000
RMCTZ_CEC_capacity    DS    F      Total CEC capacity derivated from   *00262000
                                   rmctz_adjc_CEC service units per 10 *00263000
                                   seconds. The value is based on the  *00264000
                                   number of physical CPUs available   *00265000
                                   for the logical partitions to share *00266000
                                   and does not include boost capacity  00267000
RMCTZ_IOMS_OPT        DS    X      STORAGESERVERMGT OPT parameter:     *00268000
                                   0=NO, 1=YES                          00269000
                      DS    CL3    Reserved                             00270000
RMCTZ_Last_PA_TOD     DS    BL8    Time when last PA interval finished  00271000
RMCTZ_Unused          DS    CL192  Reserved                             00272000
RMCTZ_RMF_CPU_sampling_area DS CL24 Area contains 40 CPU samplingtable *00273000
                                   entries which where updated in      *00274000
                                   IRASAPRO using IEAVEWDI. One entry  *00275000
                                   contains CPU using and delay data   *00276000
                                   per processor type (CP, zCBP or     *00277000
                                   IFA, SUP). The value 40 = (10       *00278000
                                   seconds * (4 * 250 milliseconds)).  *00279000
                                   One entry= 24 (6 * 4).               00280000
                      ORG   RMCTZ_RMF_CPU_sampling_area                 00281000
RMCTZ_RMF_CPU_sampling_entry DS CL24 Sampling entry containing CP,     *00282000
                                   zCBP or IFA, SUP using and delay    *00283000
                                   samples                              00284000
                      ORG   RMCTZ_RMF_CPU_sampling_entry                00285000
RMCTZ_RMF_CP_using_samples DS F                                         00286000
RMCTZ_RMF_zCBP_using_samples DS F                                       00287000
                      ORG   RMCTZ_RMF_zCBP_using_samples                00288000
RMCTZ_RMF_IFA_using_samples DS F                                        00289000
RMCTZ_RMF_SUP_using_samples DS F                                        00290000
RMCTZ_RMF_CP_delay_samples DS F                                         00291000
RMCTZ_RMF_zCBP_delay_samples DS F                                       00292000
                      ORG   RMCTZ_RMF_zCBP_delay_samples                00293000
RMCTZ_RMF_IFA_delay_samples DS F                                        00294000
RMCTZ_RMF_SUP_delay_samples DS F                                        00295000
                      ORG   RMCTZ_RMF_CPU_sampling_area+960             00296000
RMCTZ_SRM_Queues_Counter DS CL44   Counters for all SRM queues          00297000
                      ORG   RMCTZ_SRM_Queues_Counter                    00298000
RMCTZ_SRM_out_wait_queue_count DS F Counter of SRM wait-queue           00299000
RMCTZ_SRM_logical_out_wait_queue_count DS F Counter of SRM             *00300000
                                   logical-swap- wait queue             00301000
RMCTZ_SRM_out_ready_queue_count DS F Counter of SRM out-queue           00302000
RMCTZ_SRM_logical_out_ready_queue_count DS F Counter of SRM out-queue  *00303000
                                   for logical swapped out AS's         00304000
RMCTZ_SRM_in_queue_count DS F      Counter of SRM in-queue              00305000
RMCTZ_SRM_inready_queue_count DS F Counter of SRM in-queue with        *00306000
                                   processor using and delays in the   *00307000
                                   address space                        00308000
RMCTZ_AS_Class_Counters DS  CL20   Address space counter per class      00309000
                      ORG   RMCTZ_AS_Class_Counters                     00310000
RMCTZ_STC_count       DS    F                                           00311000
RMCTZ_OMVS_count      DS    F                                           00312000
RMCTZ_ASCH_count      DS    F                                           00313000
RMCTZ_BTCH_count      DS    F                                           00314000
RMCTZ_TSO_count       DS    F                                           00315000
RMCTZ_routing_PI_Factor_percentage DS X How much % of the PI should we *00316000
                                   use in the routing calculation       00317000
RMCTZ_BoostInfo       DS    B      WLM view of boost information        00318000
*  Bit definitions:                                                     00319000
RMCTZ_zIIPBoost_Active EQU  X'80'                                       00320000
RMCTZ_SpeedBoost_Active EQU X'40'                                       00321000
RMCTZ_IPLBoost_Activated EQU X'20' IPL boost has been activated. Once  *00322000
                                   set, this flag never gets reset      00323000
RMCTZ_SDBoost_Activated EQU X'10'  Shutdown boost has been activated.  *00324000
                                   Once set, this flag never gets      *00325000
                                   reset                                00326000
RMCTZ_RPBoost_Activated EQU X'08'  Recovery Process Boost has been     *00327000
                                   activated. This bit will be turned  *00328000
                                   off once the boost ends              00329000
RMCTZ_BoostClass      EQU   X'07'  See RMCTZ_BoostClass_xxx equates.   *00330000
                                   Valid only when one of the boosts   *00331000
                                   is active                            00332000
                      DS    CL2    Reserved                             00333000
RMCTZ_MT_Area         DS    CL12   SMT section                          00334000
                      ORG   RMCTZ_MT_Area                               00335000
RMCTZ_MT_Flags        DS    B      SMT flags                            00336000
*  Bit definitions:                                                     00337000
RMCTZ_Procview        EQU   X'80'  When on, core                        00338000
RMCTZ_MT              EQU   X'40'  When on, multiple threads per core   00339000
                      DS    CL3    Reserved                             00340000
RMCTZ_MT_Stat         DS    F      Current status for                   00341000
                      ORG   RMCTZ_MT_Stat                               00342000
RMCTZ_MT_CP           DS    X      CPs                                  00343000
RMCTZ_MT_zAAP         DS    X      zAAPs                                00344000
RMCTZ_MT_zIIP         DS    X      zIIPs                                00345000
                      DS    X      Reserved                             00346000
RMCTZ_MT_OPT          DS    F      OPT for                              00347000
                      ORG   RMCTZ_MT_OPT                                00348000
RMCTZ_MT_OPT_CP       DS    X      CPs                                  00349000
RMCTZ_MT_OPT_zAAP     DS    X      zAAPs                                00350000
RMCTZ_MT_OPT_zIIP     DS    X      zIIPs                                00351000
                      DS    X      Reserved                             00352000
RMCTZ_CpuAlivePrevOptCoreMode DS A                                      00353000
RMCTZ_WLMIRDSTRUC     DS    H      If RMCTZ_WLMIRDSTRUC_SET is ON,     *00354000
                                   represents the value of OPT         *00355000
                                   parameter WLMIRDSTRUC: 0 means      *00356000
                                   NONE, 1 means 4DIGITS, and 2 means  *00357000
                                   5DIGITS has been specified           00358000
RMCTZ_FLAGS           DS    B                                           00359000
*  Bit definitions:                                                     00360000
RMCTZ_WLMIRDSTRUC_SET EQU   X'80'  WLMIRDSTRUC flag                     00361000
RMCTZ_reserved        DS    CL5    Reserved                             00362000
RMCTZ_RTCapLeadTime   DS    F      OPT parameter RTCapLeadTime:        *00363000
                                   Specifies how long in advance an    *00364000
                                   upcoming cap should influence       *00365000
                                   routing recommendations (in         *00366000
                                   minutes)                             00367000
RMCTZ_Time_To_Cap     DS    H      Estimated remaining time (in        *00368000
                                   seconds) before the image will be   *00369000
                                   capped                               00370000
RMCTZ_Time_To_Cap_Group DS  H      Estimated remaining time (in        *00371000
                                   seconds) before the group will be   *00372000
                                   capped                               00373000
RMCTZ_DIAG204_Failure_Count DS F   Number of diagnose 204 invocations  *00374000
                                   that have been unsuccessful (since  *00375000
                                   IPL)                                 00376000
                      DS    CL28   reserved                             00377000
RMCTZEnd              DS    0C                                          00378000
*                                                                       00379000
* ********************************************************************  00380000
* * Constants                                                        *  00381000
* ********************************************************************  00382000
*                                                                       00383000
*                                                                       00384000
RMCTZ_EYECATCHER_0TO3 EQU   C'IRAR' This is the first 4-byte segment   *00385000
                                   of an 8-byte constant.               00386000
RMCTZ_EYECATCHER_4TO7 EQU   C'MCTZ' This is the second 4-byte segment  *00387000
                                   of an 8-byte constant.               00388000
RMCTZ_CVERSION        EQU   7                                           00389000
RMCTZ_RMF_CPU_sampling_table_value EQU 40 Value of RMF CPU sampling    *00390000
                                   table entries. Based on sampling    *00391000
                                   cycle 250 of milli- seconds, which  *00392000
                                   is 4 samples in a second. So there  *00393000
                                   are 40 entries in a 10 second RMF   *00394000
                                   sampling interval                    00395000
RMCTZ_CAI_no_indication EQU 0      Capacity adjustment indication is   *00396000
                                   not reported                         00397000
RMCTZ_CAI_normal      EQU   100    Machine is operating at its normal  *00398000
                                   capacity                             00399000
RMCTZ_CCR_normal      EQU   0      When the capacity adjustment        *00400000
                                   indication is non- zero, the system *00401000
                                   is running at nominal capacity       00402000
RMCTZ_CCR_manual      EQU   1      The capacity change is due solely   *00403000
                                   to the setting of a manual control  *00404000
                                   (e.g. Power Savings Mode)            00405000
RMCTZ_CCR_machine_exception EQU 2  The capacity change is due to a     *00406000
                                   machine exception condition (e.g.   *00407000
                                   MRU hard failure)                    00408000
RMCTZ_CCR_machine_non_exception EQU 3 The capacity change is due to a  *00409000
                                   non-exception machine condition     *00410000
                                   (e.g. firmware update)               00411000
RMCTZ_CCR_external_exception EQU 4 The capacity change is due to an    *00412000
                                   exception condition external to the *00413000
                                   machine (e.g ambient temperature    *00414000
                                   exceeded specified maximum value)    00415000
*                                                                       00416000
* ********************************************************************  00417000
* * Boost Class equates. "AND" the byte with this mask and compare   *  00418000
* * the result to the equate if you want to check the class             00419000
* ********************************************************************  00420000
*                                                                       00421000
*                                                                       00422000
RMCTZ_BoostClass_Mask EQU   X'07'                                       00423000
RMCTZ_BoostClass_IPL  EQU   X'01'                                       00424000
RMCTZ_BoostClass_ShutDown EQU X'02'                                     00425000
RMCTZ_BoostClass_RP   EQU   X'03'                                       00426000
RMCTZ_Len             EQU   *-RMCTZ                                     00427000
.L0002                ANOP                                              00428000
                      AIF   ('&ZCBPRINT' EQ 'NO').P3                    00429000
                      AIF   ('&LIST' EQ 'YES').P4                       00430000
.P3                   ANOP                                              00431000
                      POP   PRINT                                       00432000
.P4                   ANOP                                              00433000
.P_EXIT               ANOP                                              00434000
                      MEND                                              00435000
**/ IRARMCTZ_2:;                                                        00436000
* %IRARMCTZ_INCLUDED = 'YES';                                           00437000
* %DCL ZCBPRINT CHAR EXT;                                               00438000
* %DEACTIVATE ZCBPRINT;                                                 00439000
* %DCL IRARMCTZ_LIST CHAR EXT;                                          00440000
* %DEACTIVATE IRARMCTZ_LIST;                                            00441000
* %IF IRARMCTZ_LIST = 'NO' !                                            00442000
*    ZCBPRINT = 'NO' %THEN                                              00443000
* %DO;                                                                  00444000
*   @LIST PUSH NOECHO;                                                  00445000
*   @LIST NOASSEMBLE NOECHO;                                            00446000
*   @LIST OFF C NOECHO;                                                 00447000
* %END;                                                                 00448000
*/* Start of PL/X Source                                             */ 00449000
*Declare                                                                00450000
*  1  RMCTZ  Based(RMCTX3) Bdy(DWord),                                  00451000
*   3  RMCTZ_Name     Char(8),        /* Control block acronym       */ 00452000
*   3  RMCTZ_Version  Fixed(8),       /* Version                     */ 00453000
*   3  *              Fixed(8),       /* Reserved                    */ 00454000
*   3  RMCTZ_Length   Fixed(15),      /* Size of RMCTZ               */ 00455000
*   3  RMCTZ_LPAR_Flags      Bit(8),  /* LPAR Management flags          00456000
*                                        updated by SRM              */ 00457000
*    5  RMCTZ_LPARMgmt_Enabled Bit(1), /* When on, WLM LPAR Management  00458000
*                                        processing is enabled       */ 00459000
*    5  RMCTZ_LPAR_VaryCPU_Enabled Bit(1), /* When on, VARYCPU optio    00460000
*                                        is turned on either by default 00461000
*                                        or is explicitly set ON     */ 00462000
*   3  RMCTZ_Flag1           Bit(8),  /* Flag byte 1                 */ 00463000
*    5  RMCTZ_ABN_OPT        Bit(1),  /* When on, ABNORMALTERM option   00464000
*                                        set to NO           @LCRTMEC*/ 00465000
*    5  RMCTZ_Manage_NonEnclave_Work Bit(1), /* When on, manage address 00466000
*                                        space transaction work of      00467000
*                                        enclave servers     @ME18235*/ 00468000
*    5  RMCTZ_Flag1_Rsvd1    Bit(6),  /* Reserved            @LCRTMEC*/ 00469000
*   3  RMCTZ_Flag2           Bit(8),  /* Flag byte 2                 */ 00470000
*    5  RMCTZ_VCM_OPT        Bit(1),  /* When on, VCM specified      */ 00471000
*    5  RMCTZ_VCM            Bit(1),  /* When on, running in vertical   00472000
*                                        CP management mode          */ 00473000
*    5  RMCTZ_IOMS           Bit(1),  /* When on, I/O management        00474000
*                                        support turned on   @LSLEDRA*/ 00475000
*    5  RMCTZ_FullPreSystem  Bit(1),  /* When on, FullPreSystem         00476000
*                                        specified          @ME20643A*/ 00477000
*    5  RMCTZ_ABSMSUCAPPING  Bit(1),  /* When on, ABSMSUCAPPING         00478000
*                                                            @OA49201*/ 00479000
*    5  RMCTZ_SUPPSAFINFOMSG Bit(1),  /* When on, SUPPSAFINFOMSG        00480000
*                                                            @OA50291*/ 00481000
*    5  RMCTZ_Flag2_Rsvd1    Bit(2),  /* Reserved            @OA50291*/ 00482000
*   3  RMCTZ_Rsvd1           Bit(8),  /* Reserved                    */ 00483000
*   3  RMCTZ_INITIMP_DP   Fixed(15),  /* Initiator dispatching          00484000
*                                        priority                    */ 00485000
*   3  RMCTZ_INITIMP      Fixed(16),  /* INITIMP value specified in     00486000
*                                        in IEAOPTxx member          */ 00487000
*   3  RMCTZ_Lpar_WtMgmt,             /* LPAR weight mgmt section    */ 00488000
*    5  RMCTZ_Lpar_VaryCpuMin Fixed(8), /* Minimum number of CPs        00489000
*                                        which must stay online      */ 00490000
*   3  RMCTZ_WasRoutingLevel Fixed(8), /* Status of WASROUTINGLEVEL     00491000
*                                        IEAOPT parameter. If routing   00492000
*                                        level is 0, WLM uses the       00493000
*                                        newest routing algorithm       00494000
*                                        which is supported by all      00495000
*                                        systems in the sysplex.        00496000
*                                        A level of 1 activates         00497000
*                                        ROUNDROBIN algorithm.          00498000
*                                        Level 2 uses only available    00499000
*                                        CP capacity for routing        00500000
*                                        recommendations and level 3    00501000
*                                        uses CP, AAP and IIP capacity  00502000
*                                        for routing decisions.      */ 00503000
*   3  *                   Char(2),   /* Reserved            @ME25132*/ 00504000
*   3  RMCTZ_Capacity_Change_Time Bit(64), /* Time when the capacity    00505000
*                                        was last channged   @OA30968*/ 00506000
*   3  RMCTZ_Capacity_Adjustment_Indication Fixed(8), /* When zero,     00507000
*                                        indication is not reported.    00508000
*                                        When in the range 1-99, some   00509000
*                                        amount of reduction is         00510000
*                                        indicated. When 100, the       00511000
*                                        machine is operating at its    00512000
*                                        normal capacity. Primary CPUs  00513000
*                                        and all secondary-type CPUs    00514000
*                                        are similarly affected         00515000
*                                                            @OA30968*/ 00516000
*   3  RMCTZ_Capacity_Change_Reason Fixed(8), /* Indicates the reason   00517000
*                                        which is associated with the   00518000
*                                        present value contained in     00519000
*                                        RMCTZ_Capacity_Adjustment_     00520000
*                                        Indication          @OA30968*/ 00521000
*   3  RMCTZ_CAI_IPL Fixed(8),        /* Capacity adjustment            00522000
*                                        indication at IPL   @OA30968*/ 00523000
*   3  RMCTZ_CCR_IPL Fixed(8),        /* Capacity change reason at IPL  00524000
*                                                            @OA30968*/ 00525000
*   3  RMCTZ_nominal_CPMP Fixed(31),  /* Nominal CPU adjustment factor  00526000
*                                        (similar to RMCTCPMP but for   00527000
*                                        nominal speed)      @OA30968*/ 00528000
*   3  RMCTZ_RMF_CPU_sampling_index Fixed(32), /* Index of RMF CPU      00529000
*                                         samling area       @LRMFCPU*/ 00530000
*   3  RMCTZ_Adjc_CEC Fixed(32),      /* CPU rate adjustment factor     00531000
*                                        based on the number of         00532000
*                                        physical CPUs available for    00533000
*                                        the logical partitions to      00534000
*                                        share, excluding speed         00535000
*                                        boost               @LBOOSTC*/ 00536000
*   3  RMCTZ_CEC_capacity Fixed(32),  /* Total CEC capacity derivated   00537000
*                                        from rmctz_adjc_CEC service    00538000
*                                        units per 10 seconds. The      00539000
*                                        value is based on the number   00540000
*                                        of physical CPUs available     00541000
*                                        for the logical partitions     00542000
*                                        to share and does not include  00543000
*                                        boost capacity      @LBOOSTC*/ 00544000
*   3  RMCTZ_IOMS_OPT Fixed(8),       /* STORAGESERVERMGT OPT           00545000
*                                        parameter: 0=NO, 1=YES         00546000
*                                                            @ME25132*/ 00547000
*   3  *              Char(3),        /* Reserved            @LHWCONC*/ 00548000
*   3  RMCTZ_Last_PA_TOD  BIT(64),    /* Time when last PA interval     00549000
*                                        finished            @OA39437*/ 00550000
*   3  RMCTZ_Unused   Char(192),      /* Reserved            @OA39437*/ 00551000
*   3  RMCTZ_RMF_CPU_sampling_area(40), /* Area contains 40 CPU         00552000
*                                        samplingtable entries which    00553000
*                                        where updated in IRASAPRO      00554000
*                                        using IEAVEWDI. One entry      00555000
*                                        contains CPU using and delay   00556000
*                                        data per processor type        00557000
*                                        (CP, zCBP or IFA, SUP).        00558000
*                                        The value 40 = (10 seconds *   00559000
*                                        (4 * 250 milliseconds)).       00560000
*                                        One entry= 24 (6 * 4).      */ 00561000
*    5  RMCTZ_RMF_CPU_sampling_entry, /* Sampling entry containing      00562000
*                                        CP, zCBP or IFA, SUP using     00563000
*                                        and delay samples   @LHWCONC*/ 00564000
*     7  RMCTZ_RMF_CP_using_samples   Fixed(32), /*          @LRMFCPU*/ 00565000
*     7  RMCTZ_RMF_zCBP_using_samples Fixed(32), /*          @LHWCONA*/ 00566000
*      9  RMCTZ_RMF_IFA_using_samples Fixed(32), /*          @LRMFCPU*/ 00567000
*     7  RMCTZ_RMF_SUP_using_samples  Fixed(32), /*          @LRMFCPU*/ 00568000
*     7  RMCTZ_RMF_CP_delay_samples   Fixed(32), /*          @LRMFCPU*/ 00569000
*     7  RMCTZ_RMF_zCBP_delay_samples Fixed(32), /*          @LHWCONA*/ 00570000
*      9  RMCTZ_RMF_IFA_delay_samples Fixed(32), /*          @LRMFCPU*/ 00571000
*     7  RMCTZ_RMF_SUP_delay_samples  Fixed(32), /*          @LRMFCPU*/ 00572000
*   3  RMCTZ_SRM_Queues_Counter,      /* Counters for all SRM queues    00573000
*                                                            @LRMFCPU*/ 00574000
*     5 RMCTZ_SRM_out_wait_queue_count Fixed(32), /*                    00575000
*                                        Counter of SRM wait-queue      00576000
*                                                            @LRMFCPU*/ 00577000
*     5 RMCTZ_SRM_logical_out_wait_queue_count Fixed(32), /*            00578000
*                                        Counter of SRM logical-swap-   00579000
*                                        wait queue          @LRMFCPU*/ 00580000
*     5 RMCTZ_SRM_out_ready_queue_count Fixed(32), /*                   00581000
*                                        Counter of SRM out-queue       00582000
*                                                            @LRMFCPU*/ 00583000
*     5 RMCTZ_SRM_logical_out_ready_queue_count Fixed(32), /*           00584000
*                                        Counter of SRM out-queue       00585000
*                                        for logical swapped out AS's   00586000
*                                                            @LRMFCPU*/ 00587000
*     5 RMCTZ_SRM_in_queue_count Fixed(32), /*                          00588000
*                                        Counter of SRM in-queue        00589000
*                                                            @LRMFCPU*/ 00590000
*     5 RMCTZ_SRM_inready_queue_count Fixed(32), /*                     00591000
*                                        Counter of SRM in-queue with   00592000
*                                        processor using and delays in  00593000
*                                        the address space   @LRMFCPU*/ 00594000
*     5 RMCTZ_AS_Class_Counters,      /* Address space counter per      00595000
*                                        class               @LRMFCPU*/ 00596000
*      7  RMCTZ_STC_count  Fixed(32), /*                     @LRMFCPU*/ 00597000
*      7  RMCTZ_OMVS_count Fixed(32), /*                     @LRMFCPU*/ 00598000
*      7  RMCTZ_ASCH_count Fixed(32), /*                     @LRMFCPU*/ 00599000
*      7  RMCTZ_BTCH_count Fixed(32), /*                     @LRMFCPU*/ 00600000
*      7  RMCTZ_TSO_count  Fixed(32), /*                     @LRMFCPU*/ 00601000
*    3  RMCTZ_routing_PI_Factor_percentage Fixed(8), /* How much % of   00602000
*                                        the PI should we use in the    00603000
*                                        routing calculation @OA40613*/ 00604000
*    3  RMCTZ_BoostInfo   Bit(8),     /* WLM view of boost information  00605000
*                                                            @LBOOSTA*/ 00606000
*     5  RMCTZ_zIIPBoost_Active   Bit(1), /*                 @LBOOSTA*/ 00607000
*     5  RMCTZ_SpeedBoost_Active  Bit(1), /*                 @LBOOSTA*/ 00608000
*     5  RMCTZ_IPLBoost_Activated Bit(1), /* IPL boost has been         00609000
*                                        activated. Once set, this      00610000
*                                        flag never gets reset          00611000
*                                                            @LBOOSTA*/ 00612000
*     5  RMCTZ_SDBoost_Activated  Bit(1), /* Shutdown boost has         00613000
*                                        been activated. Once set,      00614000
*                                        this flag never gets reset     00615000
*                                                            @LBOOSTA*/ 00616000
*     5  RMCTZ_RPBoost_Activated  Bit(1), /* Recovery Process Boost has 00617000
*                                        been activated. This bit will  00618000
*                                        be turned off once the boost   00619000
*                                        ends                @LBOOS2A*/ 00620000
*     5  RMCTZ_BoostClass   Bit(3),   /* See RMCTZ_BoostClass_xxx       00621000
*                                        equates. Valid only when one   00622000
*                                        of the boosts is active        00623000
*                                                            @LBOOSTA*/ 00624000
*    3  *                Char(2),     /* Reserved            @LBOOSTC*/ 00625000
*    3  RMCTZ_MT_Area,                /* SMT section         @LDYSMTA*/ 00626000
*     5  RMCTZ_MT_Flags Bit(8),       /* SMT flags           @LDYSMTA*/ 00627000
*      7  RMCTZ_Procview Bit(1),      /* When on, core       @LDYSMTA*/ 00628000
*      7  RMCTZ_MT       Bit(1),      /* When on, multiple threads      00629000
*                                        per core            @LDYSMTA*/ 00630000
*      7  *              Bit(6),      /* For future use      @LDYSMTA*/ 00631000
*     5  *            Char(3),        /* Reserved            @LDYSMTA*/ 00632000
*     5  RMCTZ_MT_Stat   Fixed(32),   /* Current status for  @LDYSMTA*/ 00633000
*      7  RMCTZ_MT_CP    Fixed(8),    /* CPs                 @LDYSMTA*/ 00634000
*      7  RMCTZ_MT_zAAP  Fixed(8),    /* zAAPs               @LDYSMTA*/ 00635000
*      7  RMCTZ_MT_zIIP  Fixed(8),    /* zIIPs               @LDYSMTA*/ 00636000
*      7  *              Fixed(8),    /* Reserved            @LDYSMTA*/ 00637000
*     5  RMCTZ_MT_OPT    Fixed(32),   /* OPT for             @LDYSMTA*/ 00638000
*      7  RMCTZ_MT_OPT_CP   Fixed(8), /* CPs                 @LDYSMTA*/ 00639000
*      7  RMCTZ_MT_OPT_zAAP Fixed(8), /* zAAPs               @LDYSMTA*/ 00640000
*      7  RMCTZ_MT_OPT_zIIP Fixed(8), /* zIIPs               @LDYSMTA*/ 00641000
*      7  *                 Fixed(8), /* Reserved            @LDYSMTA*/ 00642000
*    3  RMCTZ_CpuAlivePrevOptCoreMode Ptr(31), /*            @LDYSMTA*/ 00643000
*    3  RMCTZ_WLMIRDSTRUC Fixed(16),  /* If RMCTZ_WLMIRDSTRUC_SET is    00644000
*                                        ON, represents the value of    00645000
*                                        OPT parameter WLMIRDSTRUC:     00646000
*                                        0 means NONE, 1 means 4DIGITS, 00647000
*                                        and 2 means 5DIGITS has been   00648000
*                                        specified           @OA55218*/ 00649000
*    3  RMCTZ_FLAGS       Bit(8),     /*                     @OA55218*/ 00650000
*     5   RMCTZ_WLMIRDSTRUC_SET Bit(1), /* WLMIRDSTRUC flag  @OA55218*/ 00651000
*     5   *                     Bit(7), /*                   @OA55218*/ 00652000
*    3  RMCTZ_reserved     Char(5),   /* Reserved            @OA55218*/ 00653000
*    3  RMCTZ_RTCapLeadTime Fixed(31), /* OPT parameter RTCapLeadTime:  00654000
*                                        Specifies how long in          00655000
*                                        advance an upcoming cap        00656000
*                                        should influence routing       00657000
*                                        recommendations (in minutes)   00658000
*                                                            @LRTCAPA*/ 00659000
*    3  RMCTZ_Time_To_Cap Fixed(16),  /* Estimated remaining time (in   00660000
*                                        seconds) before the image      00661000
*                                        will be capped     @WI164354*/ 00662000
*    3  RMCTZ_Time_To_Cap_Group Fixed(16), /* Estimated remaining       00663000
*                                        time (in seconds) before       00664000
*                                        the group will be capped       00665000
*                                                           @WI164354*/ 00666000
*    3  RMCTZ_DIAG204_Failure_Count FIXED(32), /* Number of diagnose    00667000
*                                        204 invocations that have been 00668000
*                                        unsuccessful (since IPL)       00669000
*                                                             @204BIR*/ 00670000
*    3  *                 Char(28),   /* reserved             @204BIR*/ 00671000
*    3  RMCTZEnd          Char(0) Bdy(DWord);                           00672000
*                                                                       00673000
*/********************************************************************/ 00674000
*/* Constants                                                        */ 00675000
*/********************************************************************/ 00676000
*Declare                                                                00677000
*  RMCTZ_EYECATCHER Char(8) Constant('IRARMCTZ'),                       00678000
*  RMCTZ_CVERSION   Fixed(8) Constant(7),  /*                @LBOOSTC*/ 00679000
*  RMCTZ_RMF_CPU_sampling_table_value Fixed(8) Constant(40), /*         00680000
*                                        Value of RMF CPU sampling      00681000
*                                        table entries. Based on        00682000
*                                        sampling cycle 250 of milli-   00683000
*                                        seconds, which is 4 samples    00684000
*                                        in a second. So there are 40   00685000
*                                        entries in a 10 second RMF     00686000
*                                        sampling interval   @LRMFCPU*/ 00687000
*  RMCTZ_CAI_no_indication Fixed(8) Constant(0), /*                     00688000
*                                        Capacity adjustment indication 00689000
*                                        is not reported     @OA30968*/ 00690000
*  RMCTZ_CAI_normal Fixed(8) Constant(100), /* Machine is operating at  00691000
*                                        its normal capacity @OA30968*/ 00692000
*  RMCTZ_CCR_normal Fixed(8) Constant(0), /* When the capacity          00693000
*                                        adjustment indication is non-  00694000
*                                        zero, the system is running    00695000
*                                        at nominal capacity @ME19085*/ 00696000
*  RMCTZ_CCR_manual Fixed(8) Constant(1), /* The capacity change is     00697000
*                                        due solely to the setting of   00698000
*                                        a manual control (e.g. Power   00699000
*                                        Savings Mode)       @OA30968*/ 00700000
*  RMCTZ_CCR_machine_exception Fixed(8) Constant(2), /* The capacity    00701000
*                                        change is due to a machine     00702000
*                                        exception condition (e.g.      00703000
*                                        MRU hard failure)   @OA30968*/ 00704000
*  RMCTZ_CCR_machine_non_exception Fixed(8) Constant(3), /* The         00705000
*                                        capacity change is due to      00706000
*                                        a non-exception machine        00707000
*                                        condition (e.g. firmware       00708000
*                                        update)             @OA30968*/ 00709000
*  RMCTZ_CCR_external_exception Fixed(8) Constant(4); /* The capacity   00710000
*                                        change is due to an exception  00711000
*                                        condition external to the      00712000
*                                        machine (e.g ambient           00713000
*                                        temperature exceeded specified 00714000
*                                        maximum value)      @OA30968*/ 00715000
*/********************************************************************/ 00716000
*/* Boost Class equates. "AND" the byte with this mask and compare   */ 00717000
*/* the result to the equate if you want to check the class  @LBOOSTA*/ 00718000
*/********************************************************************/ 00719000
*Declare                                                                00720000
*  RMCTZ_BoostClass_Mask     Bit(8) Constant('07'x),      /* @LBOOSTA*/ 00721000
*  RMCTZ_BoostClass_IPL      Bit(8) Constant('01'x),      /* @LBOOSTA*/ 00722000
*  RMCTZ_BoostClass_ShutDown Bit(8) Constant('02'x),      /* @LBOOSTA*/ 00723000
*  RMCTZ_BoostClass_RP       Bit(8) Constant('03'x);      /* @LBOOS2A*/ 00724000
*@LOGIC;                                                                00725000
*#PRAGMA TOOL=CBGEN.                                                    00726000
*#USEORG.                                                               00727000
*#ALIGNOP.                                                              00728000
*#NOTUPPER.                                                             00729000
*#LINE.Dcl RMCTX3 Pointer(31);                                          00730000
*#LINE.%INCLUDE SYSLIB(IRARMCTZ);                                       00731000
*#EPRAGMA.                                                              00732000
*@ENDLOGIC;                                                             00733000
*/* End of PL/X Source                                               */ 00734000
* %IF IRARMCTZ_LIST = 'NO' !                                            00735000
*    ZCBPRINT = 'NO' %THEN                                              00736000
* %DO;                                                                  00737000
*   @LIST POP NOECHO;                                                   00738000
* %END;                                                                 00739000
* %END;                                                                 00740000
