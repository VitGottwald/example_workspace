*%/*                                                                    00010000
         MACRO                                                          00020000
&NAME    SDUMPX &HDR=,&HDRAD=,&DCB=,&ASID=,&ASIDLST=,&ECB=,&SDATA=,    X00030000
               &STORAGE=,&LIST=,&SUMLIST=,&BUFFER=,&QUIESCE=,&BRANCH=, X00040000
               &LISTA=,&TYPE=,&SUMLSTA=,&SUSPEND=,&SUBPLST=,&KEYLIST=, X00050000
               &MF=,&SRB=,&SUMLSTL=,&LISTD=,&STRLIST=,                 X00060000
               &INTOKEN=,&REMOTE=,&PROBDESC=,                          X00070000
               &JOBLIST=,&DSPLIST=,&LIST64=,&SUMLIST64=,&UTOKEN=,      X00080000
               &ID=,&IDAD=,&SYMREC=,&PSWREGS=,&PLISTVER=          @LHC  00090000
.********************************************************************** 00100000
.*   MACRO NAME = SDUMPX                                              * 00110000
.*                                                                    * 00120000
.*   DESCRIPTIVE NAME = SDUMPX EXECUTABLE MACRO                       * 00130000
.*                                                                    * 00140000
.*   STATUS = HBB77A0                                             @LFC* 00150000
.*                                                                    * 00160000
.*   COPYRIGHT =                                                      * 00170000
.*               LICENSED MATERIALS - PROPERTY OF IBM                 * 00180000
.*               5650-ZOS COPYRIGHT IBM CORP. 1980, 2015              * 00190000
.*                                                                    * 00200000
.*   EXTERNAL CLASSIFICATION:  PI                                 @LGA* 00210000
.*   END OF EXTERNAL CLASSIFICATION:                              @LEA* 00220000
.*                                                                    * 00230000
.*   FUNCTION = PROVIDES THE INTERFACE BETWEEN THE CALLER AND SVC     * 00240000
.*              DUMP.  LIST AND EXECUTE FORMS EXIST TO GENERATE       * 00250000
.*              THE SDUMPX PARAMETER LIST AND PROPER LINKAGE TO THE   * 00260000
.*              SVC DUMP SERVICE.                                     * 00270000
.*                                                                    * 00280000
.*   NOTES = THE PARAMETER LIST GENERATED BY THE STANDARD AND LIST    * 00290000
.*           FORMS OF THIS MACRO IS 112 BYTES IN LENGTH.              * 00300000
.*           IF MDUMP OPTIONS ARE SPECIFIED, THE PARAMETER LIST       * 00310000
.*             IS 128 BYTES.                                          * 00320000
.*           IF STRLIST, INTOKEN, REMOTE, PROBDESC, JOBLIST, DSPLIST, * 00330000
.*           UTOKEN IS SPECIFIED, THE PARAMETER LIST              @LHC* 00340000
.*             IS 184 BYTES.                                          * 00350000
.*           IF ECB IS SPECIFIED WITH THE TCBOWNS OPTION, THE         * 00352000
.*             STANDARD AND EXECUTE PARAMETER LIST IS 184 BYTES, THE  * 00354000
.*             LIST FORM MUST MANUALLY INCLUDE PLISTVER=3         @02x* 00356000
.*                                                                    * 00360000
.*   CHANGE ACTIVITY = FIX PROBLEM WITH ECB OPTION 6/22/79    @ZMB0025* 00370000
.*                     OS/VS2 JBB1226:                        @G383P1U* 00380000
.*                     1. SUPPORT FOR NEW KEYWORDS:                   * 00390000
.*                        LISTA,SUMLSTA,TYPE=XMEM             @G383P1U* 00400000
.*                     2. SUPPORT FOR NEW KEYWORD                     * 00410000
.*                        SUSPEND= YES OR NO                          * 00420000
.*                        SUPPORT FOR SDUMP EXITS             @G386P31* 00430000
.*                     3. SUPPORT FOR NEW KEYWORD: TYPE=XMEME @G38AP31* 00440000
.*                     4. SUPPORT FOR NEW KEYWORD: SUMLSTL        @L5A* 00450000
.*                     APAR OZ51194 - MF=(E,(1)) ON EXECUTE   @ZA51194* 00460000
.*                        FORM WITH NO OTHER PARAMETERS       @ZA51194* 00470000
.*                        GENERATES AN OR IMMEDIATE.          @ZA51194* 00480000
.*                     OS/VS2 JBB1326:                            @L1A* 00490000
.*                     @L1= RAS JBB1326 810130 PD31:PAGE PROTECT  @L1A* 00500000
.*                     OS/VS2 HBB2102:                        @G860P31* 00510000
.*                     1. SUPPORT ALLNUC, SUBPLST, KEYLIST            * 00520000
.*                     2. ADD RESERVED FIELDS FOR SLIP AND SYSMDUMP   * 00530000
.*                     3. ADD BLOCK COMMENTS TO AID DEBUGGING         * 00540000
.*                     4. SUPPORT SPLEVEL                     @G860P1X* 00550000
.*                     5. ADD TYPE=NOLOCAL PARAMETER TO PREVENT       * 00560000
.*                        SDUMP FROM OBTAINING A LOCAL LOCK.  @ZMC2707* 00570000
.*  FLAG  REASON  RELEASE   DATA  ORIGIN                          @L2A* 00580000
.*  $L2=  RASENH  JBB2220  841119  PD2F: SUPPORT TYPE=FAILRC      @L2A* 00590000
.*  $L3=    AR    HBB3310  850901  PDXB: AR SUPPORT                   * 00600000
.*  $L4=  RTMRAS  HBB3310  860728  PDA8: SLIP SYNCHRONOUS SVC DUMP    * 00610000
.*  $P1= PC40145  HBB3310  860829  PD2F: CORRECT SPELLING IN MESG2E   * 00620000
.*  $P2= PC40810  HBB3310  870312  PDA8: SRB KEYWORD PROCESSING       * 00630000
.*  $T1= OY21535  JBB2220  890331  PDXB: MDUMP SUPPORT                * 00640000
.*  $T2= OY21535  HBB3310  890331  PDXB: MDUMP SUPPORT                * 00650000
.*  $T3= OY21535  HBB3310  890331  PDXB: MDUMP SUPPORT FOR SDUMPX     * 00660000
.*  $L5= DATASPAC HBB3310  861029  PDAY: SUMLSTL KEYWORD SUPPORT  @L5A* 00670000
.*  $L6= DATASPAC HBB3310  861029  PDQ6: LISTD   KEYWORD SUPPORT  @L6A* 00680000
.*  $L7= COUPLSDU HBB4410  870116  PDQ6: SDATA COUPLE             @L7A* 00690000
.*  $L8= DATACAPT HBB4420  900226  PDHT: UPGRADED SYNTAX FOR ECB &    * 00700000
.*                                       SRB KEYWORDS             @L8A* 00710000
.*  $L9= SYSLK    HBB5510  900904  PDHP: SDATA IXLDATA            @L9A* 00720000
.*  $D1= DH30150  HBB4420  901024  PDHR: SRB CAPTURE DEFAULT          * 00730000
.*  $LA= SYSLK    HBB5510  910311  PDHT: XESDATA INSTEAD OF IXLDATA   * 00740000
.*                                                                @LAA* 00750000
.*  $LB= SYSLKD   HBB5510  910930  PDCV: Support for dumping SES      * 00760000
.*                                        facility                @LBA* 00770000
.*  $LC= SDMPE    HBB5510  921230  PDXB: REMOTE                       * 00780000
.*  $P3= PIG1380  HBB5510  920405  PDXB: Fix syntax                   * 00790000
.*  $LD= WLMI     HBB5510  930415  PDHT: WLM dump exit            @LDA* 00800000
.*  $01= OW13112  HBB4430  950512  PDKV: Fix HDR ALET offset      @01A* 00810000
.*  $LE= TSVCD    JBB6607  980413  PDHT: Tailored SVC Dump        @LEA* 00820000
.*  $LF= V64BIT   HBB7705  000831  PDPS: SDUMP 64-bit virt capture    * 00830000
.*  $LG= SDHCSA   HBB77A0  131121  PDPS: HVCOMMON solution (ME26734)  * 00840000
.*                                       Define new SDATA options for * 00850000
.*                                       high CSA                     * 00860000
.*  $LH= SDUTKN   HBB77A0  140405  PDPS: UserToken Support (ME27196)  * 00870000
.*                                       Initialize UTOKEN pointer    * 00880000
.*  $02= OA53780  HBB7790  170918  PDKV: Support TCB owned ECBs       * 00885000
.*  $03= OA54542  HBB7790  171214  PDKV: Correct TCB owned check      * 00886002
.*                                                                    * 00890000
.********************************************************************** 00900000
.*                                                                      00910000
.*       DEFINE SET SYMBOLS                                             00920000
.*                                                                      00930000
         GBLC  &SYSSPLV           SYSTEM/MACRO LIBRARY LEVEL   @G860P1X 00940000
         GBLC  &SDPLVER     SET ACCORDING TO HIGHEST PLISTVER     @T1P  00950000
         LCLA  &SDFLAG0           SDFLAG0 FIELD OF PARAMETER LIST       00960000
         LCLA  &SDFLAG1           SDFLAG1 FIELD OF PARAMETER LIST       00970000
         LCLA  &SDFLAG2           SDFLAG2 PARAMETER LIST FIELD @G383P1U 00980000
         LCLA  &SDATAF1,&SDATAF2  SDATA FIELD OF PARAMETER LIST         00990000
         LCLA  &SDATAF3,&SDATAF4  SDATA EXIT FIELDS PARM LIST      @LEC 01000000
         LCLA  &SDAT3             SDUSDAT3 FIELD OF PARM LIST      @T1P 01010000
         LCLA  &SDUFLAG3          SDUFLAG3 FIELD OF PARM LIST      @LFA 01020000
         LCLA  &SDCNTL1           CONTROL FLAGS FOR IDENTIFYING NEW     01030000
.*                                RELEASES AND EXPANDED PARAMETER LIST  01040000
.*                                LENGTHS                      @G860P31 01050000
         LCLA  &SDTYPF1           TYPE FIELD OF PARAMETER LIST @G383P1U 01060000
         LCLA  &CTR1,&CTR2        COUNTERS FOR LOOP CONTROL, INDEX      01070000
         LCLA  &HDRCTR            NUMBER OF PAIRED APOSTROPHES          01080000
         LCLA  &IDCTR             NUMBER OF PAIRED APOSTROPHES     @T1P 01090000
         LCLA  &DISP              DISPLACEMENT FOR STORING ADDRESSES    01100000
         LCLA  &DISP1             DISPLACEMENT FOR STOR LIST@G860P31    01110000
         LCLA  &DISP2             DISPLACEMENT FOR HDR DATA    @G860P31 01120000
         LCLA  &STRCNT            COUNT OF STOR ADDRESSES      @G860P31 01130000
         LCLC  &GNAME             SYMBOLIC NAME-BRANCH AROUND CONSTANTS 01140000
         LCLC  &TEMP              TEMPORARY VARIABLE               @T1P 01150000
         LCLB  &SDDCB             SET IF DCB ADDRESS IS SPECIFIED       01160000
         LCLB  &SDBUFF            SET IF BUFFER IS TO BE DUMPED         01170000
         LCLB  &SDSTOR            SET IF STORAGE OR LIST IS SPECIFIED   01180000
         LCLB  &SDHDR             SET IF HDR OR HDRAD IS SPECIFIED      01190000
         LCLB  &SDECB             SET IF AN ECB ADDRESS IS SUPPLIED     01200000
         LCLB  &SDECBWR           SET IF THE ECB IS TO BE POSTED AFTER  01210000
.*                                THE WRITE PHASE HAS COMPLETED    @D1A 01220000
         LCLB  &SDSTRLI           SET IF AN STRLIST ADDRESS IS SUPPLIED 01230000
.*                                                                 @LBA 01240000
         LCLB  &SDSRB            SET IF AN SRB ADDRESS IS SUPPLIED @L4A 01250000
         LCLB  &SDSRBWR         SET IF THE SRB IS TO BE SCHEDULED AFTER 01260000
.*                                THE WRITE PHASE HAS COMPLETED    @D1A 01270000
         LCLB  &SDWRITE           SET IF THE ECB IS TO BE POSTED OR     01280000
.*                                THE SRB IS TO BE SCHEDULED AFTER      01290000
.*                                THE WRITE PHASE HAS COMPLETED    @D1A 01300000
         LCLB  &SDASID            SET IF AN ASID IS SPECIFIED           01310000
         LCLB  &SDASIDL           SET IF AN ASIDLIST IS SPECIFIED       01320000
.*                                                             @G33VPHD 01330000
         LCLB  &SDQUIET           SET IF SYSTEM IS TO BE QUIESCED       01340000
         LCLB  &SDBRNCH           SET IF INTERFACE IS BRANCH ENTRY      01350000
         LCLB  &DUMPTYP           ALWAYS SET FOR SVC DUMP               01360000
         LCLB  &SDALPSA           SET IF ALL PSA IN SYSTEM TO BE DUMPED 01370000
         LCLB  &SDPSA             SET IF CURRENT PSA IS TO BE DUMPED    01380000
         LCLB  &SDNUC             SET IF NUCLEUS IS TO BE DUMPED        01390000
         LCLB  &SDSQA             SET IF SQA IS TO BE DUMPED            01400000
         LCLB  &SDLSQA            SET IF LSQA IS TO BE DUMPED           01410000
         LCLB  &SDRGN             SET IF VIRTUAL MEMORY IS TO BE DUMPED 01420000
         LCLB  &SDLPA             SET IF ACTIVE LPA MOD FOR MEMORY REQ  01430000
         LCLB  &SDTRT             SET IF GTF INCORE TRACE BUFFERS  REQ  01440000
         LCLB  &SDCSA             SET IF CSA SUBPOOLS ARE TO BE DUMPED  01450000
         LCLB  &SDSWA             SET IF SWA FOR MEMORY TO BE DUMPED    01460000
.*                                                                      01470000
         LCLB  &SDSUMLT           SET IF SUMLIST SPECIFIED     @G33VPHD 01480000
         LCLB  &SDSMDMP           SET IF SUMDUMP SPECIFIED     @G33VPHD 01490000
         LCLB  &SDNSMDP           SET IF NO SUMDUMP SPECIFIED  @G33VPHD 01500000
         LCLB  &SDNSQA            SET IF NO SQA SPECIFIED      @G33VPHD 01510000
         LCLB  &SDNAPSA           SET IF NOALLPSA IS SPECIFIED @G33VPHD 01520000
         LCLB  &SDNEW             SET IF ENHANCED SVC DUMP     @G33VPHD 01530000
         LCLB  &SDSE3PM         SET IF JBB1226 PARMS SPECIFIED @G383P1U 01540000
         LCLB  &SDGRSQ            SET IF SDATA=GRSQ SPECIFIED  @G383P1U 01550000
         LCLB  &SDCOUPL           SET IF SDATA=COUPLE SPECIFIED    @L7A 01560000
         LCLB  &SDXES             SET IF SDATA=XESDATA SPECIFIED   @LAC 01570000
         LCLB  &SDWLM             SET IF SDATA=WLM SPECIFIED       @LDA 01580000
         LCLB  &SDTSVCD           SET IF SDATA=SERVERS SPECIFIED   @LEA 01590000
         LCLB  &SDHCAS            SET IF SDATA=HCSABYASID SPECIFIED     01600000
.*                                                                 @LGA 01610000
         LCLB  &SDHCNO            SET IF SDATA=HCSANOOWNER SPECIFIED    01620000
.*                                                                 @LGA 01630000
         LCLB  &SDHCSY            SET IF SDATA=HCSASYSOWNER SPECIFIED   01640000
.*                                                                 @LGA 01650000
.********************************************************************** 01660000
.* FOR EACH NEW SDUMP EXIT, ADD A NEW VARIABLE DEFINED SIMILAR TO       01670000
.* SDGRSQ.                                                     @G386P31 01680000
.********************************************************************** 01690000
         LCLB  &SDLISTA           SET IF LISTA PARM SPECIFIED  @G383P1U 01700000
         LCLB  &SDLISTD           SET IF LISTD PARM SPECIFIED      @L6A 01710000
         LCLB  &SDLST64           SET IF LIST64 PARM SPECIFIED     @LFA 01720000
         LCLB  &SDSMLTA           SET IF SUMLSTA SPECIFIED     @G383P1U 01730000
         LCLB  &SDSMLTL           SET IF SUMLSTL SPECIFIED         @L5A 01740000
         LCLB  &SDSLT64           SET IF SUMLIST64 SPECIFIED       @LFA 01750000
         LCLB  &SDSPEND           SET IF SUSPEND=YES SPECIFIED @G386P31 01760000
         LCLB  &SDTYPXM           SET IF TYPE=XMEM SPECIFIED   @ZMB0025 01770000
         LCLB  &SDTPXME           SET IF TYPE=XMEME SPECIFIED  @G38AP31 01780000
         LCLB  &SDALLNC           SET IF ALLNUC SPECIFIED      @G860P31 01790000
         LCLB  &SDSPLST           SET IF SUBPLST SPECIFIED     @G860P31 01800000
         LCLB  &SDKYLST           SET IF KEYLIST SPECIFIED     @G860P31 01810000
         LCLB  &SDSP21P           SET IF HBB2102 PARM LIST     @G860P31 01820000
         LCLB  &SDVRSNB           SET IF VERSION NUMBER IN LIST    @T1P 01830000
         LCLB  &SDTYPNL          SET IF TYPE=NOLOCAL SPECIFIED @ZMC2707 01840000
         LCLB  &SDTYPRC           SET IF TYPE=FAILRC SPECIFIED     @L2A 01850000
.* FLAGS FOR MDUMP OPTIONS                                              01860000
         LCLC  &PLVER             PLISTVER                         @T1P 01870000
         LCLB  &SDPREG            SET IF PSWREG SPECIFIED          @T1P 01880000
         LCLB  &SDSYMR            SET IF SYMREC SPECIFIED          @T1P 01890000
         LCLB  &SDID              SET IF ID OR IDAD SPECIFIED      @T1P 01900000
         LCLB  &SDIDAD            SET IF IDAD SPECIFIED            @T1P 01910000
         LCLB  &SDDEFS            SET IF DEFAULTS/DEFS SPECIFIED   @T1P 01920000
         LCLB  &SDNODEF           SET IF NODEFAULTS/NODEFS         @T1P 01930000
         LCLB  &SDIO              SET IF IO SPECIFIED              @T1P 01940000
         LCLB  &SDOWNEC           SET IF TCBOWNS SPECIFIED         @02A 01945000
.*                                                                      01950000
.********************************************************************** 01960000
.* IF ANY POSITIONAL PARAMETERS WERE SPECIFIED, THE MACRO IS            01970000
.* SPECIFIED INCORRECTLY AND IS PROBABLY MISSING A SET OF               01980000
.* PARENTHESIS.                                                @G860P1X 01990000
.********************************************************************** 02000000
.*                                                                      02010000
.INVKSP2 ANOP                                                  @G860P1X 02020000
         LCLC  &LA                      "LA" OR "LAE" VIA SYSSTATE @L3A 02030000
         GBLC  &SYSASCE                                            @L3A 02040000
         GBLC  &SYSAM64                                            @LFA 02050000
         SYSSTATE TEST                  TEST ASC ENVIRONMENT       @L3A 02060000
&LA      SETC  'LA'                     MUST USE LA INSTRUCTION    @L3A 02070000
         AIF   ('&SYSASCE' EQ 'P').NOLAE                           @L3A 02080000
&LA      SETC  'LAE'                    MUST USE LAE               @L3A 02090000
.NOLAE   ANOP                                                      @L3A 02100000
         AIF  ('&SYSLIST(1)' NE '').MESG1A                     @G860P1X 02110000
.*                                                                      02120000
.********************************************************************** 02130000
.*                                                                      02140000
.*         SYNTAX CHECK FOR MUTUALLY EXCLUSIVE OPTIONS                  02150000
.*                                                             @G860P31 02160000
.********************************************************************** 02170000
.*                                                                      02180000
         AIF   ('&HDR' NE '' AND '&HDRAD' NE '').MESG2A     MUTUALLY    02190000
         AIF   ('&ID' NE '' AND '&IDAD' NE '').MESG2F              @T1P 02200000
         AIF   ('&STORAGE' NE '' AND '&LIST' NE '').MESG2B   EXCLUSIVE  02210000
.*       TEST STORAGE AND LISTA - MUTUALLY EXCLUSIVE           @G383P1U 02220000
         AIF   ('&STORAGE' NE '' AND '&LISTA' NE '').MESG2C    @G383P1U 02230000
.*       TEST LIST AND LISTA - MUTUALLY EXCLUSIVE              @G383P1U 02240000
         AIF   ('&LIST' NE '' AND '&LISTA' NE '').MESG2D       @G383P1U 02250000
.*       TEST LISTD AND LIST64 - MUTUALLY EXCLUSIVE                     02260000
         AIF   ('&LISTD' NE '' AND '&LIST64' NE '').MESG2G         @LFA 02270000
.*       TEST SUMLIST AND SUMLSTA - MUTUALLY EXCLUSIVE         @G383P1U 02280000
         AIF   ('&SUMLIST' NE '' AND '&SUMLSTA' NE '').MESG2E  @G383P1U 02290000
.*       TEST SUMLSTL AND SUMLIST64 - MUTUALLY EXCLUSIVE                02300000
         AIF   ('&SUMLSTL' NE '' AND '&SUMLIST64' NE '').MESG2H    @LFA 02310000
.*       TEST ASID AND ASIDLST - MUTUALLY EXCLUSIVE            @G386P31 02320000
         AIF   ('&ASID' NE '' AND '&ASIDLST' NE '').MESG10     @G383P1U 02330000
.*                                                                      02340000
.********************************************************************** 02350000
.*                                                                      02360000
.*    PARSE THE HDR PARAMETER FOR INVALID LENGTH AFTER ACCOUNTING       02370000
.*    FOR STARTING, ENDING, AND PAIRED APOSTROPHES.                     02380000
.*                                                             @G860P31 02390000
.********************************************************************** 02400000
.*                                                                      02410000
         AIF   ('&HDR' EQ '').SD3I          HDR SPECIFIED          @T1P 02420000
         AIF   ('&HDR'(1,1) NE '''').MESG9  IS FIRST CHAR APOSTROPHE    02430000
&CTR1    SETA  K'&HDR-1                     LENGTH OF USER DATA +1      02440000
         AIF   (&CTR1 LT 2).MESG9A          INVALID HDR SPECIFICATION   02450000
.*                                                            @ZMC0399  02460000
&HDRCTR  SETA  0                            NUMBER OF PAIRED APOSTROHES 02470000
&CTR2    SETA  2                            INDEX FIRST CHAR-USER DATA  02480000
.SDLOOP  ANOP                                                           02490000
         AIF   (&CTR2 GE &CTR1).SD2              END OF SCAN            02500000
         AIF   ('&HDR'(&CTR2,2) EQ '''''').SD1   PAIRED APOSTROPHES     02510000
&CTR2    SETA  &CTR2+1                           UPDATE INDEX BY 1      02520000
         AGO   .SDLOOP                           CONTINUE LOOP          02530000
.SD1     ANOP                                                           02540000
&HDRCTR  SETA  &HDRCTR+1                    ONE MORE PAIRED APOSTROPHES 02550000
&CTR2    SETA  &CTR2+2                      UPDATE INDEX BY 2           02560000
         AGO   .SDLOOP                      CONTINUE LOOP               02570000
.SD2     ANOP                                                           02580000
&CTR1    SETA  K'&HDR-2-&HDRCTR             LENGTH OF USER DATA         02590000
         AIF   (&CTR1 GT 100).MESG8         USER DATA TOO LONG          02600000
.********************************************************************** 02610000
.*                                                                      02620000
.*    PARSE THE ID PARAMETER FOR INVALID LENGTH AFTER ACCOUNTING        02630000
.*    FOR STARTING, ENDING, AND PAIRED APOSTROPHES.                     02640000
.*                                                                 @T1P 02650000
.********************************************************************** 02660000
.*                                                                      02670000
.SD3I    AIF   ('&ID' EQ '').SD3            ID SPECIFIED           @T1P 02680000
         AIF   ('&ID'(1,1) NE '''').MESG9I  FIRST CHAR APOSTROPHE  @T1P 02690000
&CTR1    SETA  K'&ID-1                      LENGTH+1               @T1P 02700000
         AIF   (&CTR1 LT 2).MESG9AI         INVALID ID SPECIFICATION   *02710000
                                                                   @T1P 02720000
&IDCTR   SETA  0                            PAIRED APOSTROPHES     @T1P 02730000
&CTR2    SETA  2                            INDEX FIRST CHAR       @T1P 02740000
.SDLOOPI ANOP                                                      @T1P 02750000
         AIF   (&CTR2 GE &CTR1).SD2I             END OF SCAN       @T1P 02760000
         AIF   ('&ID'(&CTR2,2) EQ '''''').SD1I   PAIRED            @T1P 02770000
&CTR2    SETA  &CTR2+1                           UPDATE INDEX BY 1 @T1P 02780000
         AGO   .SDLOOPI                          CONTINUE LOOP     @T1P 02790000
.SD1I    ANOP                                                      @T1P 02800000
&IDCTR   SETA  &IDCTR+1                     ONE MORE               @T1P 02810000
&CTR2    SETA  &CTR2+2                      UPDATE INDEX BY 2      @T1P 02820000
         AGO   .SDLOOPI                     CONTINUE LOOP          @T1P 02830000
.SD2I    ANOP                                                      @T1P 02840000
&CTR1    SETA  K'&ID-2-&IDCTR               LENGTH OF USER DATA    @T1P 02850000
         AIF   (&CTR1 GT 50).MESG8I         USER DATA TOO LONG     @T1P 02860000
.*                                                                      02870000
.********************************************************************** 02880000
.*                                                                      02890000
.*    CHECK FOR INVALID PARAMETERS SPECIFIED WITH MF=L                  02900000
.*                                                             @G860P31 02910000
.********************************************************************** 02920000
.*                                                                      02930000
.SD3     AIF   ('&MF' NE 'L').SD5           IS MF STANDARD OR EXECUTE   02940000
         AIF   ('&ASID' NE '').MESG5A       ASID INVALID W/MF=L         02950000
         AIF   ('&ECB' NE '').MESG5B        ECB INVALID W/MF=L          02960000
         AIF   ('&SRB' NE '').MESG5F        SRB INVALID W/MF=L     @L4A 02970000
         AIF   ('&BRANCH' NE '').MESG5C     BRANCH INVALID W/MF=L       02980000
         AIF   ('&ASIDLST' NE '').MESG5D   ASID INV W/MF=L     @G33VPHD 02990000
.*                                                                      03000000
.********************************************************************** 03010000
.*                                                                      03020000
.*  CHECK FOR VALID OPERANDS (YES OR NO) ON BUFFER, BRANCH, AND QUIESCE 03030000
.*                                                             @G860P31 03040000
.********************************************************************** 03050000
.*                                                                      03060000
.SD5     AIF   ('&BUFFER' EQ '').SD9        IS BUFFER SPECIFIED         03070000
.*                                                             @G33VPHD 03080000
         AIF   ('&BUFFER' NE 'YES' AND '&BUFFER' NE 'NO').MESG4B        03090000
.*                                                             @G33VPHD 03100000
.SD9     AIF   ('&BRANCH' EQ '').SD11       IS BRANCH SPECIFIED         03110000
         AIF   ('&BRANCH' NE 'YES' AND '&BRANCH' NE 'NO').MESG4C        03120000
.SD11    AIF   ('&QUIESCE' EQ '').SD13      IS QUIESCE SPECIFIED        03130000
         AIF   ('&QUIESCE' NE 'YES' AND '&QUIESCE' NE 'NO').MESG4D      03140000
.*                                                                      03150000
.********************************************************************** 03160000
.*                                                                      03170000
.*  CHECK FOR AN EVEN NUMBER OF STORAGE RANGES.                         03180000
.*                                                             @G860P31 03190000
.********************************************************************** 03200000
.*                                                                      03210000
.SD13    AIF   ('&STORAGE' EQ '').SD15      IS STORAGE SPECIFIED        03220000
&CTR1    SETA  N'&STORAGE/2                 NUMBER OF ADDRESS PAIRS     03230000
&CTR2    SETA  (N'&STORAGE-1)/2             NUMBER OF PAIRS MINUS 1     03240000
         AIF   (&CTR1 EQ &CTR2).MESG6       ODD NUMBER OF ADDRESSES     03250000
.SD15    ANOP                                                           03260000
.*                                                                      03270000
.********************************************************************** 03280000
.*                                                                      03290000
.*       SDFLAG0 PROCESSING                                             03300000
.*                                                             @G860P31 03310000
.********************************************************************** 03320000
.*                                                                      03330000
&SDDCB   SETB  ('&DCB' NE '')                IF DCB SPECIFIED           03340000
&SDBUFF  SETB  ('&BUFFER' EQ 'YES')          IF BUFFER TO BE DUMPED     03350000
&SDSTOR  SETB  ('&STORAGE' NE '' OR '&LIST' NE '')    STORAGE ADDR LIST 03360000
&SDHDR   SETB  ('&HDR' NE '' OR '&HDRAD' NE '')       USER DATA         03370000
         AIF   ('&ECB' NE '' AND '&SRB' NE '').MESG13B SRB AND ECB ARE X03380000
               MUTUALLY EXCLUSIVE                                  @L4A 03390000
&SDECB   SETB  ('&ECB' NE '')               IF ECB SPECIFIED            03400000
         AIF   ('&ECB(2)' NE '' AND '&ECB(2)' NE 'WRITE' AND '&ECB(2)' X03410000
               NE 'CAPTURE').MESG3B                                @L8A 03420000
         AIF   ('&ECB(3)' NE '' AND '&ECB(3)' NE 'TCBOWNS').MESG3BO     03423000
*                                                                  @02A 03426000
&SDECBWR SETB  ('&ECB(2)' EQ 'WRITE')       IS THE ECB TO BE POSTED    X03430000
               WHEN THE WRITE PHASE HAS COMPLETED                  @D1C 03440000
         AIF   (&SDDCB EQ 0 OR &SDECB EQ 0 OR &SDECBWR EQ 1).SD20      X03450000
               IF NOT (DCB & ECB & CAPTURE REQUEST/DEFAULTED) DON'T    X03460000
               ISSUE INFORMATIONAL AND OVERRIDE REQUEST            @D1C 03470000
         MNOTE 0,'ECB POST TIME FORCED TO WRITE BECAUSE THE DCB KEYWORDX03480000
                SPECIFIED'                                         @L8A 03490000
&SDECBWR SETB  1                            FORCE TO WRITE PHASE   @D1A 03500000
.SD20    ANOP                                                      @L8A 03510000
&SDSRB   SETB  ('&SRB' NE '')                IF SRB SPECIFIED      @L4A 03520000
         AIF   ('&SRB(2)' NE '' AND '&SRB(2)' NE 'WRITE' AND '&SRB(2)' X03530000
               NE 'CAPTURE').MESG3B                                @L8A 03540000
&SDSRBWR SETB  ('&SRB(2)' EQ 'WRITE')       IS THE SRB TO BE SCHEDULED X03550000
               WHEN THE CAPTURE PHASE HAS COMPLETED                @D1C 03560000
         AIF   (&SDDCB EQ 0 OR &SDSRB EQ 0 OR &SDSRBWR EQ 1).SD21      X03570000
               IF NOT (DCB & SRB & CAPTURE REQUEST/DEFAULTED) DON'T    X03580000
               ISSUE INFORMATIONAL AND OVERRIDE REQUEST            @D1C 03590000
         MNOTE 0,'SRB SCHEDULE TIME FORCED TO WRITE BECAUSE THE DCB KEYX03600000
               WORD SPECIFIED'                                     @D1C 03610000
&SDSRBWR SETB  1                            FORCE TO WRITE PHASE   @D1A 03620000
.SD21    ANOP                                                      @D1A 03630000
&SDASID  SETB  ('&ASID' NE '')               IF ASID SPECIFIED          03640000
&SDQUIET SETB  ('&QUIESCE' NE 'NO')          IF SYSTEM TO BE QUIESCED   03650000
.*             SDQUIET IS SET FOR QUIESCE=YES OR DEFAULTED TO YES       03660000
.*             THE DEFAULT ONLY APPLIES TO THE LIST AND STANDARD FORM,  03670000
.*             AND MUST BE COMPENSATED FOR ON THE EXECUTE FORM.         03680000
&SDBRNCH SETB  ('&BRANCH' EQ 'YES')          IF LINKAGE BY BRANCH ENTRY 03690000
&SDFLAG0 SETA  128*&SDDCB+64*&SDBUFF+32*&SDSTOR+16*&SDHDR+8*&SDECB+4*&SX03700000
               DASID+2*&SDQUIET+1*&SDBRNCH                              03710000
.*                                                                      03720000
.********************************************************************** 03730000
.*                                                                      03740000
.*       SDFLAG1 PROCESSING                                             03750000
.*                                                             @G860P31 03760000
.********************************************************************** 03770000
.*                                                                      03780000
&DUMPTYP SETB  1                  ALWAYS ON FOR SVC DUMP                03790000
&SDNEW   SETB  1                  ALWAYS SET TO 1 FOR NEW SDUMP MACRO   03800000
.*                                                             @G33VPHD 03810000
&SDASIDL SETB  ('&ASIDLST' NE '') IF ASIDLIST WAS SPECIFIED             03820000
.*                                                             @G33VPHD 03830000
&SDSUMLT SETB  ('&SUMLIST' NE '') IF SUMLIST WAS SPECIFIED              03840000
.*                                                             @G33VPHD 03850000
&SDFLAG1 SETA  128*&DUMPTYP+32*&SDNEW+16*&SDASIDL+8*&SDSUMLT            03860000
.*                                                                      03870000
.********************************************************************** 03880000
.*                                                                      03890000
.*       SDFLAG2 PROCESSING                                             03900000
.*                                                             @G860P31 03910000
.********************************************************************** 03920000
.*                                                                      03930000
&SDLISTA SETB  ('&LISTA' NE '')   SET IF LISTA IS SPECIFIED    @G383P1U 03940000
&SDLISTD SETB  ('&LISTD' NE '')   SET IF LISTD IS SPECIFIED        @L6A 03950000
&SDSMLTA SETB  ('&SUMLSTA' NE '') SET IF SUMLSTA SPECIFIED     @G383P1U 03960000
&SDSMLTL SETB  ('&SUMLSTL' NE '') SET IF SUMLSTL SPECIFIED         @L5A 03970000
&SDFLAG2 SETA  128*&SDLISTA+64*&SDSMLTA+2*&SDLISTD+&SDSMLTL        @L6C 03980000
.*                                                                      03990000
.********************************************************************** 04000000
.*                                                                      04010000
.*       SDUFLAG3 PROCESSING                                            04020000
.*                                                                 @LFA 04030000
.********************************************************************** 04040000
.*                                                                      04050000
&SDLST64 SETB  ('&LIST64' NE '')  SET IF LIST64 IS SPECIFIED       @LFA 04060000
&SDSLT64 SETB  ('&SUMLIST64' NE '') SET IF SUMLIST64 SPECIFIED     @LFA 04070000
.* No ECB or correct ECB parameters entered                             04081900
&SDOWNEC SETB  ('&ECB(3)' NE '')          May turn on Owns ECB bit @02A 04083900
&SDUFLAG3 SETA 128*&SDLST64+64*&SDSLT64+1*&SDOWNEC                 @02C 04085900
.*                                                                      04090000
.********************************************************************** 04100000
.*                                                                      04110000
.*       SDCNTL1 PROCESSING                                             04120000
.*                                                                 @T1P 04130000
.********************************************************************** 04140000
.*                                                                      04150000
&SDPREG  SETB  ('&PSWREGS' NE '')   SET FOR PSWREGS                @T1P 04160000
&SDSRS   SETB  ('&SYMREC' NE '')    SET FOR SYMREC                 @T1P 04170000
&SDID    SETB  ('&ID' NE '' OR '&IDAD' NE '')         ID DATA      @T1P 04180000
&SDIDAD  SETB  ('&IDAD' NE '')      SET FOR IDAD                   @T1P 04190000
&SDSTRLI SETB  ('&STRLIST' NE '')   SET FOR STRLIST                @LBA 04200000
&SDCNTL1 SETA  32*&SDPREG+16*&SDSRS+8*&SDID+2*&SDSTRLI             @LBC 04210000
.*                                                                      04220000
.********************************************************************** 04230000
.*                                                                      04240000
.*       SDATA PROCESSING FOR ONLY 1 SDATA OPTION SPECIFIED.            04250000
.*                                                             @G860P31 04260000
.********************************************************************** 04270000
.*                                                                      04280000
         AIF   ('&SDATA' EQ '').SD80        IS SDATA SPECIFIED          04290000
         AIF   ('&SDATA'(1,1) EQ '(').SD60  MORE THAN 1 OPTION, IN ()   04300000
&CTR1    SETA  0                                                        04310000
&SDALPSA SETB  ('&SDATA' EQ 'ALLPSA')       SET IF ALLPSA SPECIFIED     04320000
&SDPSA   SETB  ('&SDATA' EQ 'PSA')          SET IF PSA SPECIFIED        04330000
&SDNUC   SETB  ('&SDATA' EQ 'NUC')          SET IF NUC SPECIFIED        04340000
&SDSQA   SETB  ('&SDATA' EQ 'SQA')          SET IF SQA SPECIFIED        04350000
&SDLSQA  SETB  ('&SDATA' EQ 'LSQA')         SET IF LSQA SPECIFIED       04360000
&SDRGN   SETB  ('&SDATA' EQ 'RGN')          SET IF RGN SPECIFIED        04370000
&SDLPA   SETB  ('&SDATA' EQ 'LPA')          SET IF LPA SPECIFIED        04380000
&SDTRT   SETB  ('&SDATA' EQ 'TRT')          SET IF TRT SPECIFIED        04390000
&SDCSA   SETB  ('&SDATA' EQ 'CSA')          SET IF CSA SPECIFIED        04400000
&SDSWA   SETB  ('&SDATA' EQ 'SWA')          SET IF SWA SPECIFIED        04410000
&SDSMDMP SETB  ('&SDATA' EQ 'SUMDUMP' OR '&SDATA' EQ 'SUM')             04420000
.*                         SET IF SUMDUMP OR SUM ARE SPECIFIED @G33VPHD 04430000
&SDNSQA  SETB  ('&SDATA' EQ 'NOSQA')        SET IF NOSQA SPECIFIED      04440000
.*                                                             @G33VPHD 04450000
&SDNAPSA SETB  ('&SDATA' EQ 'NOALLPSA' OR '&SDATA' EQ 'NOALL')          04460000
.*                          SET IF NOALLPSA OR NOALL SPECIFIED @G33VPHD 04470000
&SDNSMDP SETB  ('&SDATA' EQ 'NOSUMDUMP' OR '&SDATA' EQ 'NOSUM')         04480000
&SDALLNC SETB  ('&SDATA' EQ 'ALLNUC')                          @G860P31 04490000
&SDGRSQ  SETB  ('&SDATA' EQ 'GRSQ')  SET IF GRSQ SPECIFIED     @G383P1U 04500000
&SDCOUPL SETB  ('&SDATA' EQ 'COUPLE') SET IF COUPLE SPECIFIED      @L7A 04510000
&SDIO    SETB  ('&SDATA' EQ 'IO')    SET IF IO SPECIFIED           @T1P 04520000
&SDDEFS  SETB  ('&SDATA' EQ 'DEFS' OR '&SDATA' EQ 'DEFAULTS')      @T1P 04530000
&SDNODEF SETB  ('&SDATA' EQ 'NODEFS' OR '&SDATA' EQ 'NODEFAULTS')  @T1P 04540000
&SDXES   SETB  ('&SDATA' EQ 'XESDATA') SET IF XESDATA SPECIFIED    @LAC 04550000
&SDWLM   SETB  ('&SDATA' EQ 'WLM')     SET IF WLM SPECIFIED        @LDA 04560000
&SDTSVCD SETB  ('&SDATA' EQ 'SERVERS') SET IF SERVERS SPECIFIED    @LEA 04570000
&SDHCAS  SETB  ('&SDATA' EQ 'HCSABYASID' OR '&SDATA' EQ 'HCAS')         04580000
.*                         Set if HCsaByAsid or HCAS specified     @LGA 04590000
&SDHCNO  SETB  ('&SDATA' EQ 'HCSANOOWNER' OR '&SDATA' EQ 'HCNO')        04600000
.*                         Set if HCsaNoOwner or HCNO specified    @LGA 04610000
&SDHCSY  SETB  ('&SDATA' EQ 'HCSASYSOWNER' OR '&SDATA' EQ 'HCSY')       04620000
.*                         Set if HCsaSysOwner or HCSY specified   @LGA 04630000
.********************************************************************** 04640000
.* FOR EACH NEW SDUMP EXIT, ADD A 'SETB' INSTRUCTION SIMILAR TO THE ONE 04650000
.* ABOVE AND ADD THE EXIT VARIABLE INTO THE FOLLOWING SETA.    @G386P31 04660000
.********************************************************************** 04670000
&CTR1    SETA  &SDALPSA+&SDPSA+&SDNUC+&SDSQA+&SDLSQA+&SDRGN+&SDLPA+&SDTX04680000
               RT+&SDCSA+&SDSWA+&SDSMDMP+&SDNSMDP+&SDNSQA+&SDNAPSA+&SDGX04690000
               RSQ+&SDALLNC+&SDIO+&SDDEFS+&SDNODEF+&SDCOUPL+&SDXES+&SDWX04700000
               LM+&SDHCAS+&SDHCNO+&SDHCSY                          @LGC 04710000
&CTR2    SETA  1                            IF INVALID, MESG PRINTS IT  04720000
         AIF   ('&CTR1' EQ '0').MESG4A      IS SPECIFIED OPTION VALID   04730000
         AGO   .SD80                        SDATA OPTION PROCESSED      04740000
.*                                                                      04750000
.********************************************************************** 04760000
.*                                                                      04770000
.*       SDATA PROCESSING FOR 1 OR MORE SDATA OPTIONS IN PARENTHESIS.   04780000
.*                                                             @G860P31 04790000
.********************************************************************** 04800000
.*                                                                      04810000
.SD60    ANOP                     SDATA OPTIONS IN PARENTHESIS          04820000
&CTR1    SETA  N'&SDATA           NUMBER OF OPTIONS ON SDATA PARAMETER  04830000
&CTR2    SETA  0                  NUMBER BY POSITION OPERAND WORKING ON 04840000
.LOOPA1  ANOP                                                           04850000
&CTR2    SETA  &CTR2+1            NUMBER OF NEXT OPTION TO WORK ON      04860000
         AIF   ('&SDATA(&CTR2)' EQ 'ALLPSA').SETAPSA                    04870000
         AIF   ('&SDATA(&CTR2)' EQ 'PSA').SETPSA                        04880000
         AIF   ('&SDATA(&CTR2)' EQ 'NUC').SETNUC                        04890000
         AIF   ('&SDATA(&CTR2)' EQ 'SQA').SETSQA                        04900000
         AIF   ('&SDATA(&CTR2)' EQ 'LSQA').SETLSQA                      04910000
         AIF   ('&SDATA(&CTR2)' EQ 'RGN').SETRGN                        04920000
         AIF   ('&SDATA(&CTR2)' EQ 'LPA').SETLPA                        04930000
         AIF   ('&SDATA(&CTR2)' EQ 'TRT').SETTRT                        04940000
         AIF   ('&SDATA(&CTR2)' EQ 'CSA').SETCSA                        04950000
         AIF   ('&SDATA(&CTR2)' EQ 'SWA').SETSWA                        04960000
         AIF   ('&SDATA(&CTR2)' EQ 'SUMDUMP').SETSUM SUMDUMP SPEC       04970000
.*                                                             @G33VPHD 04980000
         AIF   ('&SDATA(&CTR2)' EQ 'SUM').SETSUM  SET IF SUM SPECIFIED  04990000
.*                                                             @G33VPHD 05000000
         AIF   ('&SDATA(&CTR2)' EQ 'NOSUMDUMP').SETNSUM SET IF          05010000
.*                                   NO SUMDUMP IS SPECIFIED   @G33VPHD 05020000
         AIF   ('&SDATA(&CTR2)' EQ 'NOSUM').SETNSUM  SET IF NOSUM IS    05030000
.*                                                   SPECIFIED          05040000
.*                                                             @G33VPHD 05050000
         AIF   ('&SDATA(&CTR2)' EQ 'NOSQA').SETNSQA  SET IF NOSQA SPEC  05060000
.*                                                             @G33VPHD 05070000
         AIF   ('&SDATA(&CTR2)' EQ 'NOALLPSA').SETNAPA                  05080000
.*                                                             @G33VPHD 05090000
         AIF   ('&SDATA(&CTR2)' EQ 'NOALL').SETNAPA                     05100000
.*                                                             @G33VPHD 05110000
         AIF   ('&SDATA(&CTR2)' EQ 'ALLNUC').SETANUC                    05120000
.*                                                             @G860P31 05130000
         AIF   ('&SDATA(&CTR2)' EQ 'GRSQ').SETGRSQ SET IF GRSQ @G383P1U 05140000
         AIF   ('&SDATA(&CTR2)' EQ 'COUPLE').SETCOUPL SET IF COUPLE     05150000
.*                                                                @L7A  05160000
         AIF   ('&SDATA(&CTR2)' EQ 'IO').SETIO                     @T1P 05170000
         AIF   ('&SDATA(&CTR2)' EQ 'DEFS').SETDEFS                 @T1P 05180000
         AIF   ('&SDATA(&CTR2)' EQ 'DEFAULTS').SETDEFS             @T1P 05190000
         AIF   ('&SDATA(&CTR2)' EQ 'NODEFS').SETNODF               @T1P 05200000
         AIF   ('&SDATA(&CTR2)' EQ 'NODEFAULTS').SETNODF           @T1P 05210000
         AIF   ('&SDATA(&CTR2)' EQ 'XESDATA').SETXES SET IF XESDATA     05220000
.*                                                                @LAC  05230000
         AIF   ('&SDATA(&CTR2)' EQ 'WLM').SETWLM       SET IF WLM @LDA  05240000
         AIF   ('&SDATA(&CTR2)' EQ 'SERVERS').SETTSVC             @LEA  05250000
         AIF   ('&SDATA(&CTR2)' EQ 'HCSABYASID').SETHCAS                05260000
.*                                Set if HCsaByAsid is specified   @LGA 05270000
         AIF   ('&SDATA(&CTR2)' EQ 'HCAS').SETHCAS                      05280000
.*                                Set if HCAS is specified         @LGA 05290000
         AIF   ('&SDATA(&CTR2)' EQ 'HCSANOOWNER').SETHCNO               05300000
.*                                Set if HCsaNoOwner is specified  @LGA 05310000
         AIF   ('&SDATA(&CTR2)' EQ 'HCNO').SETHCNO                      05320000
.*                                Set if HCNO is specified         @LGA 05330000
         AIF   ('&SDATA(&CTR2)' EQ 'HCSASYSOWNER').SETHCSY              05340000
.*                                Set if HCsaSysOwner is specified @LGA 05350000
         AIF   ('&SDATA(&CTR2)' EQ 'HCSY').SETHCSY                      05360000
.*                                Set if HCSY is specified         @LGA 05370000
.********************************************************************** 05380000
.* FOR EACH NEW SDUMP EXIT, ADD AN 'AIF' INSTRUCTION SIMILAR TO THE ONE 05390000
.* ABOVE AND ADD THE NEW LABEL FOR THE SET.                    @G386P31 05400000
.********************************************************************** 05410000
         AGO   .MESG4A                 SDATA OPTION IS INVALID          05420000
.LOOPA2  AIF   (&CTR1 NE &CTR2).LOOPA1 MORE OPTIONS, CONTINUE LOOP      05430000
         AGO   .SD80                   ALL OPTIONS PROCESSED            05440000
.SETAPSA ANOP                          ALLPSA SPECIFIED                 05450000
         AIF   (&SDNAPSA EQ 1).MESG13  NOALLPSA AND ALLPSA IS ERROR     05460000
.*                                                             @G33VPHD 05470000
&SDALPSA SETB  1                       SET INDICATOR                    05480000
         AGO   .LOOPA2                 CONTINUE LOOP                    05490000
.SETPSA  ANOP                          PSA SPECIFIED                    05500000
&SDPSA   SETB  1                       SET INDICATOR                    05510000
         AGO   .LOOPA2                 CONTINUE LOOP                    05520000
.SETNUC  ANOP                          NUC SPECIFIED                    05530000
&SDNUC   SETB  1                       SET INDICATOR                    05540000
         AGO   .LOOPA2                 CONTINUE LOOP                    05550000
.SETSQA  ANOP                          SQA SPECIFIED                    05560000
         AIF   (&SDNSQA EQ 1).MESG12   SQA AND NOSQA IS ERROR           05570000
.*                                                             @G33VPHD 05580000
&SDSQA   SETB  1                       SET INDICATOR                    05590000
         AGO   .LOOPA2                 CONTINUE LOOP                    05600000
.SETLSQA ANOP                          LSQA SPECIFIED                   05610000
&SDLSQA  SETB  1                       SET INDICATOR                    05620000
         AGO   .LOOPA2                 CONTINUE LOOP                    05630000
.SETRGN  ANOP                          RGN SPECIFIED                    05640000
&SDRGN   SETB  1                       SET INDICATOR                    05650000
         AGO   .LOOPA2                 CONTINUE LOOP                    05660000
.SETLPA  ANOP                          LPA SPECIFIED                    05670000
&SDLPA   SETB  1                       SET INDICATOR                    05680000
         AGO   .LOOPA2                 CONTINUE LOOP                    05690000
.SETTRT  ANOP                          TRT SPECIFIED                    05700000
&SDTRT   SETB  1                       SET INDICATOR                    05710000
         AGO   .LOOPA2                 CONTINUE LOOP                    05720000
.SETCSA  ANOP                          CSA SPECIFIED                    05730000
&SDCSA   SETB  1                       SET INDICATOR                    05740000
         AGO   .LOOPA2                 CONTINUE LOOP                    05750000
.SETSWA  ANOP                          SWA SPECIFIED                    05760000
&SDSWA   SETB  1                       SET INDICATOR                    05770000
         AGO  .LOOPA2                  CONTINUE LOOP                    05780000
.SETSUM  ANOP                          SUMDUMP OR SUM SPECIFIED         05790000
.*                                                             @G33VPHD 05800000
         AIF   (&SDNSMDP EQ 1).MESG11  NOSUMDUMP AND SUMDUMP IS ERROR   05810000
.*                                                             @G33VPHD 05820000
&SDSMDMP SETB  1                       SET SUMDUMP INDICATOR            05830000
.*                                                             @G33VPHD 05840000
         AGO   .LOOPA2                 CONTINUE LOOP                    05850000
.*                                                             @G33VPHD 05860000
.SETNSUM ANOP                          NOSUMDUMP OR NOSUM SPECIFIED     05870000
.*                                                             @G33VPHD 05880000
         AIF   (&SDSMDMP EQ 1).MESG11  NOSUMDUMP AND SUMDUMP IS ERROR   05890000
.*                                                             @G33VPHD 05900000
&SDNSMDP SETB  1                       SET NOSUMDUMP INDICATOR          05910000
.*                                                             @G33VPHD 05920000
         AGO   .LOOPA2                 CONTINUE LOOP                    05930000
.*                                                             @G33VPHD 05940000
.SETNSQA ANOP                          NOSQA SPECIFIED                  05950000
.*                                                             @G33VPHD 05960000
         AIF   (&SDSQA EQ 1).MESG12    SQA AND NOSQA IS AN ERROR        05970000
.*                                                             @G33VPHD 05980000
&SDNSQA  SETB  1                       SET NOSQA INDICATOR              05990000
.*                                                             @G33VPHD 06000000
         AGO   .LOOPA2                 CONTINUE LOOP                    06010000
.*                                                             @G33VPHD 06020000
.SETNAPA ANOP                          NOALLPSA OR NOALL SPECIFIED      06030000
.*                                                             @G33VPHD 06040000
         AIF   (&SDALPSA EQ 1).MESG13  NOALLPSA AND ALLPSA IS ERROR     06050000
.*                                                             @G33VPHD 06060000
&SDNAPSA SETB  1                       SET NOALLPSA INDICATOR           06070000
.*                                                             @G33VPHD 06080000
         AGO   .LOOPA2                 CONTINUE LOOP                    06090000
.*                                                             @G33VPHD 06100000
.SETANUC ANOP                          ALLNUC OPTION SPECIFIED @G860P31 06110000
&SDALLNC SETB  1                       ALLNUC OPTION SET       @G860P31 06120000
         AGO   .LOOPA2                 CONTINUE LOOP           @G386P31 06130000
.SETGRSQ ANOP                          GRSQ OPTION SPECIFIED   @G383P1U 06140000
&SDGRSQ  SETB  1                       GRSQ OPTION SPECIFIED   @G383P1U 06150000
         AGO   .LOOPA2                 CONTINUE LOOP           @G383P1U 06160000
.SETCOUPL ANOP                         COUPLE OPTION SPECIFIED     @L7A 06170000
&SDCOUPL SETB 1                        SET COUPLE INDICATOR        @L7A 06180000
         AGO   .LOOPA2                 CONTINUE LOOP               @L7A 06190000
.SETIO   ANOP                          IO OPTION SPECIFIED         @T1P 06200000
&SDIO    SETB  1                       IO OPTION SPECIFIED         @T1P 06210000
         AGO   .LOOPA2                 CONTINUE LOOP               @T1P 06220000
.SETDEFS ANOP                          DEFS OPTION SPECIFIED       @T1P 06230000
&SDDEFS  SETB  1                       DEFS OPTION SPECIFIED       @T1P 06240000
         AGO   .LOOPA2                 CONTINUE LOOP               @T1P 06250000
.SETNODF ANOP                          NODEFS OPTION SPECIFIED     @T1P 06260000
&SDNODEF SETB  1                       NODEFS OPTION SPECIFIED     @T1P 06270000
         AGO   .LOOPA2                 CONTINUE LOOP               @T1P 06280000
.SETXES   ANOP                         XESDATA OPTION SPECIFIED    @LAC 06290000
&SDXES   SETB 1                        SET XESDATA INDICATOR       @LAC 06300000
         AGO   .LOOPA2                 CONTINUE LOOP               @L9A 06310000
.SETWLM  ANOP                          WLM OPTION SPECIFIED        @LDA 06320000
&SDWLM   SETB 1                        SET WLM INDICATOR           @LDA 06330000
         AGO   .LOOPA2                 CONTINUE LOOP               @LDA 06340000
.SETTSVC ANOP                          SERVERS OPTION SPECIFIED    @LEA 06350000
&SDTSVCD SETB 1                        SET SERVERS INDICATOR       @LEA 06360000
         AGO   .LOOPA2                 CONTINUE LOOP               @LDA 06370000
.SETHCAS ANOP                          HCsaByAsid specified?       @LGA 06380000
&SDHCAS  SETB 1                        Set HCsaByAsid specified    @LGA 06390000
         AGO   .LOOPA2                 CONTINUE LOOP               @LGA 06400000
.SETHCNO ANOP                          HCsaNoOwer specified?       @LGA 06410000
&SDHCNO  SETB 1                        Set HCsaNoOwner specified   @LGA 06420000
         AGO   .LOOPA2                 CONTINUE LOOP               @LGA 06430000
.SETHCSY ANOP                          HCsaSysOwner specified?     @LGA 06440000
&SDHCSY  SETB 1                        Set HCsaSysOwner specified  @LGA 06450000
         AGO   .LOOPA2                 CONTINUE LOOP               @LEA 06460000
.********************************************************************** 06470000
.* FOR EACH NEW SDUMP EXIT, ADD A SET OF 3 INSTRUCTIONS SIMILAR TO THE  06480000
.* 3 PREVIOUS INSTRUCTIONS.                                    @G386P31 06490000
.********************************************************************** 06500000
.SD80    ANOP         ALL SDATA OPTIONS PROCESSED,BUILD SDATA  @G33VPHD 06510000
         AIF   (&SDNODEF EQ 0 OR &SDDEFS EQ 0).SDDEFOK             @T1P 06520000
         MNOTE 12,'DEFAULTS AND NODEFAULTS ARE MUTUALLY EXCLUSIVE' @T1P 06530000
         MEXIT                                                     @T1P 06540000
.SDDEFOK ANOP                                                      @T1P 06550000
.*                                                                      06560000
.********************************************************************** 06570000
.*                                                                      06580000
.*       PLISTVER PROCESSING -- DETERMINE SPECIFIED AND/OR              06590000
.*       NECESSARY PLISTVER PROCESSING                                  06600000
.*                                                                 @T1P 06610000
.********************************************************************** 06620000
         AIF   ('&PLISTVER' EQ '').PLV01                           @T1P 06630000
         AIF   ('&PLISTVER' EQ '1' OR '&PLISTVER' EQ '2').PLV00    @T3C 06640000
         AIF   ('&PLISTVER' EQ '3').PLV00                          @LBA 06650000
         MNOTE 12,'PLISTVER MUST BE 1, 2 OR 3'                     @LBC 06660000
         MEXIT                                                     @T1P 06670000
.PLV00   ANOP                                                      @T1P 06680000
&PLVER   SETC  '&PLISTVER'                                         @T1P 06690000
         AGO   .PLV02                                              @T1P 06700000
.* PLISTVER OMITTED - determine PLISTVER value from supplied parms @LFA 06710000
.PLV01   ANOP                                                      @T1P 06720000
         AIF   ('&STRLIST' NE '').PLVSET3                          @LBA 06730000
         AIF   ('&LIST64'  NE '').PLVSET3                          @LFA 06740000
         AIF   ('&SUMLIST64' NE '').PLVSET3                        @LFA 06750000
         AIF   ('&INTOKEN' NE '').PLVSET3                          @LCA 06760000
         AIF   ('&REMOTE' NE '').PLVSET3                           @LCA 06770000
         AIF   ('&PROBDESC' NE '').PLVSET3                         @LCA 06780000
         AIF   ('&JOBLIST' NE '').PLVSET3                          @LCA 06790000
         AIF   ('&DSPLIST' NE '').PLVSET3                          @LCA 06800000
         AIF   ('&UTOKEN' NE '').PLVSET3                           @LHA 06810000
         AIF   (&SDOWNEC).PLVSET3                                  @03C 06815001
         AIF   ('&ID' NE '' OR '&IDAD' NE '' OR '&PSWREGS' NE '' OR '&S*06820000
               YMREC' NE '').PLVSET2                               @T1P 06830000
         AIF   (&SDIO NE 0 OR &SDDEFS NE 0 OR &SDNODEF NE 0).PLVSET2   *06840000
                                                                   @T1P 06850000
&PLVER   SETC  '1'                                                 @T1P 06860000
         AGO   .PLV02                                              @T1P 06870000
.PLVSET2 ANOP                                                      @T1P 06880000
&PLVER   SETC  '2'                                                 @T1P 06890000
         AGO   .PLV02                                              @LBA 06900000
.PLVSET3 ANOP                                                      @LBA 06910000
&PLVER   SETC  '3'                                                 @LBA 06920000
.PLV02   ANOP                                                      @T1P 06930000
         AIF   ('&PLVER' EQ '3').PLVOK                             @LBA 06940000
         AIF   ('&SUMLIST64' NE '').PLVBAD2                        @LFA 06950000
         AIF   ('&LIST64' NE '').PLVBAD2                           @LFA 06960000
         AIF   ('&STRLIST' NE '').PLVBAD2                          @LBA 06970000
         AIF   ('&INTOKEN' NE '').PLVBAD2                          @LCA 06980000
         AIF   ('&REMOTE' NE '').PLVBAD2                           @LCA 06990000
         AIF   ('&PROBDESC' NE '').PLVBAD2                         @LCA 07000000
         AIF   ('&JOBLIST' NE '').PLVBAD2                          @LCA 07010000
         AIF   ('&DSPLIST' NE '').PLVBAD2                          @LCA 07020000
         AIF   ('&UTOKEN' NE '').PLVBAD2                           @LHA 07030000
         AIF   ('&PLVER' EQ '2').PLVOK                             @T1P 07040000
         AIF   ('&ID' NE '' OR '&IDAD' NE '' OR '&PSWREGS' NE '' OR '&S*07050000
               YMREC' NE '').PLVBAD1                               @T1P 07060000
         AIF   (&SDIO NE 0 OR &SDDEFS NE 0 OR &SDNODEF NE 0).PLVBAD1   *07070000
                                                                   @T1P 07080000
         AGO   .PLVOK                                              @T1P 07090000
.PLVBAD1 ANOP                                                      @T1P 07100000
         MNOTE 12,'SPECIFIED KEYWORD(S) REQUIRE PLISTVER=2 OR PLISTVER=*07110000
               3'                                                  @LBC 07120000
         MEXIT                                                     @T1P 07130000
.PLVBAD2 ANOP                                                      @LBA 07140000
         MNOTE 12,'SPECIFIED KEYWORD(S) REQUIRE PLISTVER=3'        @LBA 07150000
         MEXIT                                                     @LBA 07160000
.PLVOK   ANOP                                                      @T1P 07170000
.*       PLVER IS SET TO THE HIGHEST PLVER NEEDED SO FAR                07180000
         AIF   ('&MF' EQ '').PLV03                                 @T1P 07190000
         AIF   ('&SDPLVER' NE '' AND '&SDPLVER' GE '&PLVER').PLV04 @LBC 07200000
&SDPLVER SETC  '&PLVER'                                            @T1P 07210000
         AGO   .PLV03                                              @LBA 07220000
.PLV04   ANOP                                                      @LBA 07230000
         AIF   ('&PLISTVER' NE '').PLV03                           @LBA 07240000
&PLVER   SETC  '&SDPLVER'                                          @LBA 07250000
.PLV03   ANOP                                                      @T1P 07260000
.*                                                                      07270000
.********************************************************************** 07280000
.*                                                                      07290000
.*   AFTER PROCESSING ALL SDATA OPTIONS, BUILD THE SDATA FLAG BYTES.    07300000
.*                                                             @G860P31 07310000
.********************************************************************** 07320000
.*                                                                      07330000
&SDATAF1 SETA  128*&SDALPSA+64*&SDPSA+32*&SDNUC+16*&SDSQA+8*&SDLSQA+4*&X07340000
               SDRGN+2*&SDLPA+1*&SDTRT                                  07350000
&SDATAF2 SETA  128*&SDCSA+64*&SDSWA+32*&SDSMDMP+16*&SDNSMDP+8*&SDNAPSA+X07360000
               4*&SDNSQA+2*&SDALLNC+&SDDEFS                        @T1P 07370000
&SDATAF3 SETA  128*&SDGRSQ+16*&SDCOUPL+8*&SDXES+2*&SDWLM           @LDC 07380000
.*                                       CALC EXIT FLAG VALUE      @L9A 07390000
&SDATAF4 SETA  32*&SDTSVCD                                         @LEA 07400000
&SDAT3   SETA  128*&SDNODEF+64*&SDIO+32*&SDHCAS+16*&SDHCNO+8*&SDHCSY    07410000
.*                                                                 @LGC 07420000
.*                                                                      07430000
.********************************************************************** 07440000
.*                                                                      07450000
.*     SUSPEND KEYWORD PROCESSING                                       07460000
.*                                                             @G860P31 07470000
.********************************************************************** 07480000
.*                                                                      07490000
         AIF   ('&SUSPEND' EQ '').SD73  CHECK IF SUSPEND       @G386P31 07500000
.*                      PARAMETER SPECIFIED ?                  @G386P31 07510000
         AIF   ('&SUSPEND' EQ 'NO').SD73  SUSPEND=NO IS SAME   @G386P31 07520000
.*                      AS NOT SPECIFYING THE SUSPEND KEYWORD  @G386P31 07530000
         AIF   ('&SUSPEND' NE 'YES').MESG16A  INVALID SUSPEND  @G386P31 07540000
.* SUSPEND=YES REQUIRES BRANCH=YES AND SUMDUMP                 @G386P31 07550000
         AIF   ('&BRANCH' NE 'YES').MESG16B    NO BRANCH=YES   @G386P31 07560000
         AIF   (&SDNSMDP EQ 1).MESG16C    NOSUMDUMP INVALID    @G386P31 07570000
&SDSPEND SETB  1             TURN ON SUSPEND=YES BIT           @G386P31 07580000
.*                                                                      07590000
.********************************************************************** 07600000
.*                                                                      07610000
.*   CHECK FOR NOSUM INVALID WITH SUMLIST/A/L                           07620000
.*                                                             @G860P31 07630000
.********************************************************************** 07640000
.*                                                                      07650000
.SD73    AIF   (&SDNSMDP  EQ  0).SD74  IF NOSUM NOT SPECIFIED  @G860P31 07660000
         AIF   (&SDSUMLT  EQ  1).MESG15  NOSUM AND SUMLIST     @G860P31 07670000
         AIF   (&SDSMLTA  EQ  1).MESG15A  NOSUM AND SUMLSTA    @G860P31 07680000
         AIF   (&SDSMLTL  EQ  1).MESG15B  NOSUM AND SUMLSTL        @L5A 07690000
         AIF   (&SDSLT64  EQ  1).MESG15C  NOSUM AND SUMLIST64      @LFA 07700000
.*                                                                      07710000
.********************************************************************** 07720000
.*                                                                      07730000
.*   TYPE PARAMETER PROCESSING FOR SINGLE TYPE OPTION                   07740000
.*                                                             @G860P31 07750000
.********************************************************************** 07760000
.*                                                                      07770000
.SD74    AIF   ('&TYPE' EQ '').SD90    IS TYPE PARAMETER SPEC  @G860P31 07780000
         AIF   ('&TYPE'(1,1) EQ '(').SD75 MORE THAN ONE OPTION @G383P1U 07790000
&CTR1    SETA  0              INITIALIZE LOOP COUNTER          @G383P1U 07800000
&SDTYPXM SETB  ('&TYPE' EQ 'XMEM')  SET IF TYPE=XMEM SPECIFIED @G383P1U 07810000
&SDTPXME SETB  ('&TYPE' EQ 'XMEME') SET IF TYPE=XMEME          @G38AP1U 07820000
&SDTYPNL SETB  ('&TYPE' EQ 'NOLOCAL') SET IF TYPE=NOLOCAL      @ZMC2707 07830000
&SDTYPRC SETB  ('&TYPE' EQ 'FAILRC') SET IF TYPE=FAILRC            @L2A 07840000
&CTR1    SETA  &SDTYPXM+&SDTPXME+&SDTYPNL+&SDTYPRC   CALCULATE     @L2C 07850000
.*                           VALID OPTIONS                         @L2A 07860000
&CTR2    SETA  1             INITIALIZE FOR MNOTE              @G383P1U 07870000
         AIF   ('&CTR1'  EQ  '0').MESG4E  NO VALID OPTIONS     @G383P1U 07880000
         AGO   .SD90         TYPE OPTION PROCESSED             @G383P1U 07890000
.*                                                                      07900000
.********************************************************************** 07910000
.*                                                                      07920000
.*   TYPE PARAMETER PROCESSING FOR TYPE OPTIONS IN PARENTHESIS          07930000
.*                                                             @G860P31 07940000
.********************************************************************** 07950000
.*                                                                      07960000
.SD75    ANOP         TYPE PARAMETERS IN PARENTHESIS           @G383P1U 07970000
&CTR1    SETA  N'&TYPE       NUMBER OF TYPE PARAMETERS         @G383P1U 07980000
&CTR2    SETA  0             INDEX OF OPERAND ADDRESSED        @G383P1U 07990000
.SD76    ANOP                TOP OF OPTION LOOP                @G383P1U 08000000
&CTR2    SETA  &CTR2+1       INDEX NEXT OPTION TO WORK ON      @G383P1U 08010000
         AIF    ('&TYPE(&CTR2)' EQ 'XMEM').SETTPXM   XMEM SPEC @G383P1U 08020000
         AIF    ('&TYPE(&CTR2)' EQ 'XMEME').SETTXME XMEME SPEC @G38AP1U 08030000
         AIF    ('&TYPE(&CTR2)' EQ 'NOLOCAL').SETTPNL NOLOCAL SPEC      08040000
.*                                                             @ZMC2707 08050000
         AIF    ('&TYPE(&CTR2)' EQ 'FAILRC').SETTPRC FAILRC SPEC   @L2A 08060000
         AGO    .MESG4E      EXIT PARAMETER INVALID            @G383P1U 08070000
.SETTPXM ANOP                XMEM SPECIFIED                    @G383P1U 08080000
&SDTYPXM SETB  1             SET INDICATOR                     @G383P1U 08090000
         AGO   .SD77         GOTO CHECK FOR END OF TYPE LOOP   @G38AP31 08100000
.SETTPNL ANOP                NOLOCAL SPECIFIED                 @ZMC2707 08110000
&SDTYPNL SETB  1             SET INDICATOR                     @ZMC2707 08120000
         AGO   .SD77         GOTO CHECK FOR END OF TYPE LOOP   @G38AP31 08130000
.SETTPRC ANOP                FAILRC SPECIFIED                      @L2A 08140000
&SDTYPRC SETB  1             SET INDICATOR                         @L2A 08150000
         AGO   .SD77         GOTO CHECK FOR END OF TYPE LOOP       @L2A 08160000
.SETTXME ANOP                XMEME SPECIFIED                   @G38AP31 08170000
&SDTPXME SETB  1             SET INDICATOR                     @G38AP31 08180000
.SD77    AIF   (&CTR1 NE &CTR2).SD76  MORE OPTIONS CONTINUE    @G38AP31 08190000
         AIF   (&SDTYPXM EQ 1 AND &SDTPXME EQ 1).MESG4F    CHECK FOR    08200000
.*                          MUTUALLY EXCLUSIVE TYPE PARAMETERS @G38AP31 08210000
.SD90    ANOP               BUILD TYPE FLAG BYTES              @G383P1U 08220000
&SDTYPF1 SETA  128*&SDTYPXM+64*&SDTPXME+32*&SDTYPNL+16*&SDTYPRC         08230000
.*                                        CALC TYPE FLAG VALUE     @L2C 08240000
.*                                                                      08250000
.********************************************************************** 08260000
.*                                                                      08270000
.*   PROCESS SUBPLST AND KEYLIST OPERANDS                               08280000
.*                                                             @G860P31 08290000
.********************************************************************** 08300000
.*                                                                      08310000
         AIF   ('&KEYLIST' NE '' AND '&SUBPLST' EQ '').MESG17A @G860P31 08320000
.*             KEYLIST IS INVALID WITHOUT SUBPLST              @G860P31 08330000
&SDKYLST SETB  ('&KEYLIST' NE '')            SET KEYLIST FLAG  @G860P31 08340000
&SDSPLST SETB  ('&SUBPLST' NE '')            SET SUBPLST FLAG  @G860P31 08350000
&SDSP21P SETB  1         SET HBB2102 PARMAMETER LIST INDICATOR @G860P31 08360000
&SDSE3PM SETB  1      DEFAULT JBB1226 WHEN HBB2102 IS PRESENT  @G860P31 08370000
.*                                                                      08380000
.********************************************************************** 08390000
.*                                                                      08400000
.*   MAKE FINAL CORRECTIONS TO THE SDFLAG BYTES.                        08410000
.*                                                             @G860P31 08420000
.********************************************************************** 08430000
.*                                                                      08440000
.*       RESET SDFLAG1 FOR JBB1226 BIT                         @G383P1U 08450000
&SDFLAG1 SETA  &SDFLAG1+1*&SDSE3PM  SET SDFLAG1 FOR JBB1226 PARMS       08460000
.*                                                             @G383P1U 08470000
.*       RESET SDFLAG2 FOR JBB1226 SUSPEND PARAMETER           @G386P31 08480000
&SDFLAG2 SETA  &SDFLAG2+32*&SDSPEND+16*&SDSPLST+8*&SDKYLST     @G860P31 08490000
.*       SET SDFLAG2 FOR JBB1226 AND HBB2102 PARAMETERS        @G860P31 08500000
&SDWRITE SETB  (&SDECBWR EQ 1 OR &SDSRBWR EQ 1)                    @D1C 08510000
&SDCNTL1 SETA  &SDCNTL1+128+64+4*&SDWRITE+&SDSRB                   @D1C 08520000
.*       SET SDCNTL1 FOR HBB2102 PARMS + LATER ADDITIONS       @G860P31 08530000
.*                                                                      08540000
.********************************************************************** 08550000
.*                                                                      08560000
.*  SET UP DISPLACEMENTS AND LENGTHS FOR THE 3 TYPES OF EXPANSIONS.     08570000
.*                                                                      08580000
.*  1. CALCULATE THE NUMBER OF ADDRESSES SPECIFIED WITH STORAGE.        08590000
.*  2. CALCULATE LENGTH OF THE FIXED PART OF THE PARAMETER LIST.        08600000
.*  3. CALCULATE THE DISPLACEMENT OF THE STORAGE LIST.                  08610000
.*  4. CALCULATE THE DISPLACEMENT OF THE USER DATA (HDR).               08620000
.*                                                             @G860P31 08630000
.********************************************************************** 08640000
.*                                                                      08650000
&STRCNT  SETA  0                  DEFAULT COUNT OF 0           @G860P31 08660000
         AIF   ('&STORAGE' EQ '').SD91 CHECK FOR STORAGE       @G860P31 08670000
&STRCNT  SETA  N'&STORAGE         NUMBER OF STORAGE ADDRESSES  @G860P31 08680000
.SD91    ANOP                     NOW CALC DISPLACEMENTS       @G860P31 08690000
&DISP1   SETA  112                SP310 DEFAULT PARM LIST LEN      @L3C 08700000
         AIF   ('&PLVER' NE '2').SD92                              @T3A 08710000
&DISP1   SETA  128                SP310-MDUMP PARM LIST LEN        @T3A 08720000
         AGO   .SD93                                               @LBA 08730000
.SD92    ANOP                                                      @T3A 08740000
         AIF   ('&PLVER' NE '3').SD93                              @LBA 08750000
&DISP1   SETA  184                SPXLS-VERSION 3 PARM LIST LENGTH @LCC 08760000
.SD93    ANOP                                                      @LBA 08770000
&DISP2   SETA  &DISP1+(4*&STRCNT) THE USER DATA STARTS AFTER   @G860P31 08780000
.*                                THE STORAGE LIST             @G860P31 08790000
.*                                                                      08800000
.********************************************************************** 08810000
.*                                                                      08820000
.*   DETERMINE WHICH MACRO FORMAT EXPANSION TO DO.                      08830000
.*   STANDARD FORM, EXECUTE OR LIST.                                    08840000
.*                                                             @G860P31 08850000
.********************************************************************** 08860000
.*                                                                      08870000
         AIF   ('&MF' EQ '').STFORM          IS IT STANDARD FORM        08880000
         AIF   ('&MF' EQ 'L').LSTFORM        IS IT LIST FORM            08890000
         AIF   ('&MF'(1,3) NE '(E,').MESG7   ELSE, IF NOT EXECUTE, ERR  08900000
.*                                                                      08910000
.*                                                                      08920000
.*                                                                      08930000
.********************************************************************** 08940000
.*                                                                      08950000
.*       EXECUTE FORM EXPANSION OF MACRO                                08960000
.*                                                             @G860P31 08970000
.********************************************************************** 08980000
.*                                                                      08990000
.*                                                                      09000000
.*                                                                      09010000
         AIF   ('&NAME' EQ '').SDEX2        IS NAME SPECIFIED           09020000
&NAME    DS    0H                                                       09030000
.SDEX2   AIF   ('&MF(2)' EQ '').MESG5E      ERROR IF MISSING   @G860P31 09040000
         IHBSETR   &MF(2),1                 LOAD REG 1 WITH LIST ADDR   09050000
.************************* EXECUTE FORM  ****************************** 09060000
.*                                                                      09070000
.* MAKE SURE NO STORAGE IS ALTERED ON AN EXECUTE FORM OF THE            09080000
.*  SDUMP MACRO WHEN THE ONLY PARAMETER SPECIFIED IS MF.                09090000
.*                                                            @ZA51194  09100000
.********************************************************************** 09110000
         AIF   ('&HDR' NE '' OR  '&HDRAD' NE '' OR '&DCB' NE '' OR '&AS*09120000
               ID' NE '' OR '&ASIDLST' NE '' OR '&ECB' NE '' OR '&SDATA*09130000
               ' NE '' OR '&STORAGE' NE '' OR '&LIST' NE '').SDEX2A     09140000
.*                                                             @ZA51194 09150000
         AIF   ('&SUMLIST' NE '' OR '&BUFFER' NE '' OR '&QUIESCE' NE ''*09160000
               OR '&LISTA' NE '' OR '&TYPE' NE '' OR '&SUMLSTA' NE '' O*09170000
               R '&SUSPEND' NE '' OR '&BRANCH' NE '').SDEX2A       @LFC 09180000
         AIF   ('&SUMLSTL' NE '' OR '&LISTD' NE '').SDEX2A         @LFC 09190000
         AIF   ('&SUMLIST64' NE '' OR '&LIST64' NE '').SDEX2A      @LFA 09200000
         AIF   ('&SUSPEND' NE '' OR '&SUBPLST' NE '' OR '&KEYLIST' NE '*09210000
               ' OR '&SRB' NE '').SDEX2A                           @L4C 09220000
         AIF   ('&SYMREC' NE '' OR '&ID' NE '' OR '&IDAD' NE '' OR '&PS*09230000
               WREGS' NE '' OR '&STRLIST' NE '').SDEX2A            @LBC 09240000
         AIF   ('&INTOKEN' NE '' OR '&REMOTE' NE '').SDEX2A        @P3C 09250000
         AIF   ('&PROBDESC' NE '').SDEX2A                          @LCA 09260000
         AIF   ('&JOBLIST' NE '' OR '&DSPLIST' NE '').SDEX2A       @P3C 09270000
         AIF   ('&UTOKEN' NE '').SDEX2A                            @LHA 09280000
.*                                                                      09290000
.*       THE PLISTVER TEST MUST BE LAST                                 09300000
.*                                                                      09310000
         AIF   ('&PLISTVER' EQ '').SDEX49                          @T1P 09320000
         MVI   43(1),&PLVER                 SET VERSION NUMBER     @T1P 09330000
         AGO   .SDEX49                                         @ZA51194 09340000
.*                                                             @ZA51194 09350000
.SDEX2A  ANOP                                                           09360000
.*                                                                      09370000
.*                                                                      09380000
.************************* EXECUTE FORM  ****************************** 09390000
.*                                                                      09400000
.*       PROCESS 1ST 4 FLAG BYTES                                       09410000
.*                                                             @G860P31 09420000
.********************************************************************** 09430000
.*                                                                      09440000
         MVI   43(1),&PLVER                 SET VERSION NUMBER     @T1P 09450000
         AIF   ('&QUIESCE' NE '').SDEX3     IS QUIESCE SPECIFIED        09460000
&SDFLAG0 SETA  &SDFLAG0-2                   NO, LEAVE AS SPECIFIED ON L 09470000
.*             SUBTRACT 2 TO REMOVE THE DEFAULTED QUIESCE=YES  @G860P31 09480000
.SDEX3   AIF   ('&SDFLAG0' EQ '0').SDEX3A   ANY OPTIONS TO TURN ON      09490000
         OI    0(1),&SDFLAG0                SET OPTION FLAGS            09500000
.SDEX3A  AIF   ('&BUFFER' EQ 'NO').SDEX4    BUFFER NOT REQUESTED        09510000
         AGO   .SDEX6                       GO CHECK FOR QUIESCE        09520000
.SDEX4   ANOP                                                           09530000
         NI    0(1),X'BF'                   TURN OFF BUFFER FLAG        09540000
.SDEX6   AIF   ('&QUIESCE' EQ 'NO').SDEX8   QUIESCE NOT REQUESTED       09550000
         AGO   .SDEX10                      GO SET SVC DUMP FLAG        09560000
.SDEX8   ANOP                                                           09570000
         NI    0(1),X'FD'                   TURN OFF QUIESCE FLAG       09580000
.SDEX10  ANOP                                                           09590000
         AIF  ('&SDFLAG1' EQ '0').SDEX11 ANY OPTIONS TO TURN ON         09600000
.*                                                             @G383P1U 09610000
         OI    1(1),&SDFLAG1                SET OPTION BITS             09620000
.SDEX11  ANOP                                                  @G33VPHD 09630000
         AIF   ('&SDATA' EQ '').SDEX12      IS SDATA OPTIONS SPECIFIED  09640000
         MVI   2(1),&SDATAF1                SET OPTION FLAGS            09650000
         MVI   3(1),&SDATAF2                SET OPTION FLAGS            09660000
         MVI   46(1),&SDAT3                 SET OPTION FLAGS            09670000
.*                                                                      09680000
.************************* EXECUTE FORM  ****************************** 09690000
.*                                                                      09700000
.*       PROCESS DCB OPTION                                             09710000
.*                                                             @G860P31 09720000
.********************************************************************** 09730000
.*                                                                      09740000
.SDEX12  AIF   ('&DCB' EQ '').SDEX15        IS DCB SPECIFIED            09750000
         IHBSETR   &DCB,0                   LOAD REG 0 WITH DCB ADDR    09760000
         ST    0,4(0,1)               ADDR OF DCB INTO PARAM LIST  @L3C 09770000
         AIF   ('&SYSASCE' EQ 'P').NOAR1                           @L3A 09780000
         STAM  0,0,60(1)              SAVE DCB ALET                @L3A 09790000
.NOAR1   ANOP                                                      @L3A 09800000
.SDEX15  ANOP                                                           09810000
.*                                                                      09820000
.************************* EXECUTE FORM  ****************************** 09830000
.*                                                                      09840000
.*       PROCESS LIST, LISTA, STORAGE, LISTD or LIST64 OPTIONS          09850000
.*                                                                 @LFC 09860000
.********************************************************************** 09870000
.*                                                                      09880000
         AIF   ('&LIST' EQ '').SDEX16       IS LIST SPECIFIED  @G383P1U 09890000
         IHBSETR   &LIST,0                  LOAD REG 0 WITH LIST ADDR   09900000
         ST    0,8(0,1)               ADDR OF LIST INTO PARAM LST  @L3C 09910000
         AIF   ('&SYSASCE' EQ 'P').NOAR2                           @L3A 09920000
         STAM  0,0,64(1)              SAVE LIST ALET               @L3A 09930000
.NOAR2   ANOP                                                      @L3A 09940000
         AGO   .SDEX23                GO CHECK FOR LISTD or LIST64 @LFC 09950000
.SDEX16  ANOP                LISTA OPTION PROCESSING           @G383P1U 09960000
         AIF   ('&LISTA' EQ '').SDEX20   IS LISTA SPECIFIED    @G383P1U 09970000
         IHBSETR    &LISTA,0      LOAD R0 WITH LISTA ADDRESS   @G383P1U 09980000
         ST    0,8(,1)            PUT LISTA ADDR IN PARM LIST      @L3C 09990000
         AIF   ('&SYSASCE' EQ 'P').NOAR3                           @L3A 10000000
         STAM  0,0,64(1)              SAVE LISTA ALET              @L3A 10010000
.NOAR3   ANOP                                                      @L3A 10020000
         AGO   .SDEX23            GO CHECK FOR LISTD or LIST64     @LFC 10030000
.SDEX20  AIF   ('&STORAGE' EQ '').SDEX23    IS STORAGE SPECIFIED        10040000
         &LA   15,&DISP1.(,1)     NEW ADDRESS OF THE STORAGE LIST AT   *10050000
                                  THE END OF THE PARAMETER LIST POINTED*10060000
                                  TO BY MF=(E,PARM ADDRESS)        @L3C 10070000
         ST    15,8(,1)           PLACE NEW STORAGE LIST ADDRESS IN THE 10080000
.*                                PARAMETER LIST               @G860P31 10090000
         AIF   ('&SYSASCE' EQ 'P').NOAR4                           @L3A 10100000
         STAM  15,15,64(1)            SAVE STORAGE ALET            @L3A 10110000
.NOAR4   ANOP                                                      @L3A 10120000
&DISP    SETA  -4                 DISPLACEMENT OF ADDR IN STORAGE LIST  10130000
&CTR1    SETA  N'&STORAGE         NUMBER OF ADDRESSES SPECIFIED         10140000
&CTR2    SETA  0                  POSITION NUMBER OF ADDR WORKING ON    10150000
.LOOPC1  ANOP                                                           10160000
&DISP    SETA  &DISP+4                 DISP OF NEXT ADDR IN STORAGE LST 10170000
&CTR2    SETA  &CTR2+1                 POSITION NUMBER OF NEXT ADDRESS  10180000
         IHBSETR   &STORAGE(&CTR2),0   PUT STORAGE ADDRESS IN REG 0     10190000
         ST    0,&DISP.(0,15)          STORAGE ADDR INTO STORAGE LIST   10200000
&CTR1    SETA  &CTR1-1                 NUMBER OF REMAINING ADDRESSES    10210000
         AIF   (&CTR1 NE 0).LOOPC1   ANY MORE ADDRESSES                 10220000
         OI    &DISP.(15),X'80'      SET END OF LIST INDICATOR          10230000
.SDEX23  ANOP                     LISTD & LIST64 PROCESSING        @LFC 10240000
.* Process LISTD or LIST64.  LISTD and LIST64 are mutually exclusive.   10250000
.* The address and alets for both are stored in the same locations.     10260000
.* LISTD                                                                10270000
         AIF   ('&LISTD' EQ '').SDEX24   IS LISTD SPECIFIED        @L6A 10280000
         IHBSETR    &LISTD,0      LOAD R0 WITH LISTD ADDRESS       @L6A 10290000
         ST    0,88(,1)          PUT LISTD ADDR IN PARM LIST       @L6A 10300000
         AIF   ('&SYSASCE' EQ 'P').NOAR4C                          @L6A 10310000
         STAM  0,0,92(1)              SAVE LISTD ALET              @L6A 10320000
.NOAR4C  ANOP                                                      @L6A 10330000
         AGO   .SDEX25            GO CHECK FOR USER PARAMETERS     @L6A 10340000
.* LIST64                                                               10350000
.SDEX24  ANOP                     LIST64 OPTION PROCESSING         @LFA 10360000
         AIF   ('&LIST64' EQ '').SDEX25  IS LIST64 SPECIFIED?      @LFA 10370000
         IHBSETR    &LIST64,0     LOAD R0 WITH LIST64 ADDRESS      @LFA 10380000
         ST    0,88(,1)           PUT LIST64 ADDR IN PARM LIST     @LFA 10390000
         AIF   ('&SYSASCE' EQ 'P').NOAR4D                          @LFA 10400000
         STAM  0,0,92(1)          SAVE LIST64 ALET                 @LFA 10410000
.NOAR4D  ANOP                                                      @LFA 10420000
         AGO   .SDEX25            GO CHECK FOR USER PARAMETERS     @L6A 10430000
.*                                                                      10440000
.************************* EXECUTE FORM  ****************************** 10450000
.*                                                                      10460000
.*       PROCESS USER DATA, HDR OR HDRAD                                10470000
.*                                                             @G860P31 10480000
.********************************************************************** 10490000
.*                                                                      10500000
.SDEX25  AIF   ('&HDRAD' EQ '').SDEX30      IS HDRAD SPECIFIED          10510000
         IHBSETR   &HDRAD,0                 LOAD REG0 WITH HDR RCD ADDR 10520000
         ST    0,12(0,1)              ADDR OF HDRAD INTO LIST      @L3C 10530000
         AIF   ('&SYSASCE' EQ 'P').NOAR5                           @L3A 10540000
         STAM  0,0,68(1)              SAVE HDRAD ALET              @L3A 10550000
.NOAR5   ANOP                                                      @L3A 10560000
         AGO   .SDEX35                      GO CHECK FOR ECB            10570000
.SDEX30  AIF   ('&HDR' EQ '').SDEX35        IS HDR SPECIFIED            10580000
&GNAME   SETC  'IHB'.'&SYSNDX'              GET A UNIQUE SYMBOL         10590000
         BAL   15,&GNAME                    BRANCH AROUND USER DATA     10600000
&CTR1    SETA  K'&HDR-2-&HDRCTR             LENGTH OF USER DATA         10610000
         DC    AL1(&CTR1)                   LENGTH OF USER DATA         10620000
         DC    C&HDR                        USER DATA                   10630000
.*       CNOP  2,4                                                      10640000
&GNAME   DS    0H                                                       10650000
         ST    15,12(0,1)             ADDR OF HEADER INTO LIST     @L3C 10660000
         AIF   ('&SYSASCE' EQ 'P').NOAR6                           @L3A 10670000
         SLR   15,15                  STORAGE IS IN PRIMARY        @L3A 10680000
         ST    15,68(0,1)             SAVE HDR ALET                @01C 10690000
.NOAR6   ANOP                                                      @L3A 10700000
.*                                                                      10710000
.************************* EXECUTE FORM  ****************************** 10720000
.*                                                                      10730000
.*       PROCESS ECB OPTION                                             10740000
.*                                                             @G860P31 10750000
.********************************************************************** 10760000
.*                                                                      10770000
.SDEX35  AIF   ('&ECB' EQ '').SDEX38        IS ECB SPECIFIED       @L4C 10780000
         AIF   (N'&ECB GT 1).SDEX37B IS MORE THAN 1 PARM PRESENT   @L8A 10790000
         AIF   ('&ECB'(1,1) EQ '(').SDEX37A IS ECB ADDR IN A REG   @L8C 10800000
         L     15,&ECB                      ADDRESS OF ECB              10810000
         ST    15,16(0,1)             ADDR OF ECB INTO PARAM LIST  @L3C 10820000
         AGO   .SDEX40                      GO CHECK FOR ASID           10830000
.SDEX37A ST    &ECB(1),16(0,1)        ADDR OF ECB INTO PARAM LIST  @L8C 10840000
         AGO   .SDEX40                      GO CHECK FOR ASID      @L8A 10850000
.SDEX37B AIF   ('&ECB(1)'(1,1) EQ '(').SDEX37C IS THE ADDRESS OF THE   X10860000
               ECB IN A REGISTER                                   @L8A 10870000
         L     15,&ECB(1)                   ADDRESS OF ECB         @L8A 10880000
         ST    15,16(0,1)             ADDR OF ECB INTO PARAM LIST  @L8A 10890000
         AGO   .SDEX40                      GO CHECK FOR ASID      @L8A 10900000
.SDEX37C ST    &ECB(1,1),16(0,1)      ADDR OF ECB INTO PARAM LIST  @L8A 10910000
         AGO   .SDEX40                      GO CHECK FOR ASID      @L8A 10920000
.*                                                                      10930000
.************************* EXECUTE FORM  ****************************** 10940000
.*                                                                      10950000
.*       PROCESS SRB OPTION                                             10960000
.*                                                                 @L4A 10970000
.********************************************************************** 10980000
.*                                                                 @L4A 10990000
.SDEX38  AIF   ('&SRB' EQ '').SDEX40        IS SRB SPECIFIED       @L4A 11000000
         AIF   (N'&SRB GT 1).SDEX39B IS MORE THAN 1 PARM PRESENT   @L8A 11010000
         AIF   ('&SRB'(1,1) EQ '(').SDEX39A   IS SRB ADDR IN A REG @L8C 11020000
         L     15,&SRB                      ADDRESS OF SRB         @L4A 11030000
         ST    15,16(0,1)             ADDR OF SRB INTO PARAM LIST  @L4A 11040000
         AGO   .SDEX40                      GO CHECK FOR ASID      @L4A 11050000
.SDEX39A ST    &SRB(1),16(0,1)        ADDR OF SRB INTO PARAM LIST  @L8C 11060000
         AGO   .SDEX40                      GO CHECK FOR ASID      @L8A 11070000
.SDEX39B AIF   ('&SRB(1)'(1,1) EQ '(').SDEX39C IS THE ADDRESS OF THE   X11080000
               SRB IN A REGISTER                                   @L8A 11090000
         L     15,&SRB(1)                   ADDRESS OF SRB         @L8A 11100000
         ST    15,16(0,1)             ADDR OF SRB INTO PARAM LIST  @L8A 11110000
         AGO   .SDEX40                      GO CHECK FOR ASID      @L8A 11120000
.SDEX39C ST    &SRB(1,1),16(0,1)      ADDR OF SRB INTO PARAM LIST  @L8A 11130000
.*                                                                 @L4A 11140000
.************************* EXECUTE FORM  ****************************** 11150000
.*                                                                      11160000
.*       PROCESS ASID OR ASIDLST OPTION                                 11170000
.*                                                             @G860P31 11180000
.********************************************************************** 11190000
.*                                                                      11200000
.SDEX40  AIF   ('&ASID' EQ '').SDEX45       IS ASID SPECIFIED           11210000
         AIF   ('&ASID'(1,1) EQ '(').SDEX42 IS ASID IN A REGISTER       11220000
         LH    0,&ASID                      ASID OF MEMORY TO BE DUMPED 11230000
         STH   0,22(0,1)              ASID INTO PARAMETER LIST     @L3C 11240000
         AGO   .SDEX47                  GO CHECK FOR SUMLIST   @GXXXPXX 11250000
.*                                                             @G33VPHD 11260000
.SDEX42  ANOP                                                           11270000
         STH   &ASID,22(0,1)          ASID INTO PARAMETER LIST     @L3C 11280000
         AGO   .SDEX47                      GO CHECK FOR SUMLIST        11290000
.*                                                             @G33VPHD 11300000
.SDEX45  AIF   ('&ASIDLST' EQ '').SDEX47 IF ASIDLIST SPECIFIED          11310000
.*                                                             @G33VPHD 11320000
         IHBSETR   &ASIDLST,0           LOAD REG 0 WITH ASIDLIST ADDR   11330000
.*                                                             @G33VPHD 11340000
         ST    0,24(0,1)                ADDR ASIDLIST INTO PARM LIST *  11350000
         AIF   ('&SYSASCE' EQ 'P').NOAR7                           @L3A 11360000
         STAM  0,0,72(1)              SAVE ASIDLST ALET            @L3A 11370000
.NOAR7   ANOP                                                      @L3A 11380000
.*                                                                      11390000
.************************* EXECUTE FORM  ****************************** 11400000
.*                                                                      11410000
.*       PROCESS SUMLIST, SUMLSTA, SUMLSTL or SUMLIST64 OPTION          11420000
.*                                                             @G860P31 11430000
.********************************************************************** 11440000
.*                                                                      11450000
.SDEX47  AIF   ('&SUMLIST' EQ '').SDEX48 IF SUMLIST SPECIFIED  @G383P1U 11460000
         IHBSETR   &SUMLIST,0           LOAD REG 0 WITH SUMLIST ADDR    11470000
.*                                                             @G33VPHD 11480000
         ST    0,28(0,1)                ADDR SUMLIST IN PARM LIST  @L3C 11490000
         AIF   ('&SYSASCE' EQ 'P').NOAR8A                          @L3A 11500000
         STAM  0,0,76(1)              SAVE SUMLIST ALET            @L3A 11510000
.NOAR8A  ANOP                                                      @L3A 11520000
         AGO   .SDEX48L           SUMLIST/SUMLSTA processing done  @LFA 11530000
.SDEX48  ANOP                                                  @G383P1U 11540000
         AIF   ('&SUMLSTA' EQ '').SDEX48L IS SUMLSTA SPECIFIED @G383P1U 11550000
         IHBSETR    &SUMLSTA,0    LOAD R0 WITH SUMLSTA ADDRESS @G383P1U 11560000
         ST    0,28(0,1)         MOVE SUMLSTA ADDR TO PARMLIST     @L3C 11570000
         AIF   ('&SYSASCE' EQ 'P').NOAR8                           @L3A 11580000
         STAM  0,0,76(1)              SAVE SUMLSTA ALET            @L3A 11590000
.NOAR8   ANOP                                                      @L3A 11600000
.* Process SUMLSTL                                                      11610000
.SDEX48L ANOP                                                      @L5A 11620000
         AIF   ('&SUMLSTL' EQ '').SDEX48Z IS SUMLSTL SPECIFIED     @L5A 11630000
         IHBSETR    &SUMLSTL,0    LOAD R0 WITH SUMLSTL ADDRESS     @L5A 11640000
         ST    0,96(0,1)         MOVE SUMLSTL ADDR TO PARMLIST     @L5A 11650000
         AIF   ('&SYSASCE' EQ 'P').NOARL                           @L5A 11660000
         STAM 0,0,100(1)             SAVE SUMLSTL ALET             @L5A 11670000
.NOARL   ANOP                                                      @L5A 11680000
         AGO   .SDEX48A            Done with SUMLSTL/SUMLIST64          11690000
.* Process SUMLIST64                                                    11700000
.SDEX48Z ANOP                                                      @LFA 11710000
         AIF   ('&SUMLIST64' EQ '').SDEX48A SUMLIST64 SPECIFIED?   @LFA 11720000
         IHBSETR    &SUMLIST64,0   LOAD R0 WITH SUMLIST64 ADDRESS  @LFA 11730000
         ST    0,96(0,1)         MOVE SUMLIST64 ADDR TO PARMLIST   @LFA 11740000
         AIF   ('&SYSASCE' EQ 'P').NOARLZ                          @LFA 11750000
         STAM  0,0,100(1)          SAVE SUMLIST64 ALET             @LFA 11760000
.NOARLZ  ANOP  ,                                                   @LFA 11770000
.*                                                                      11780000
.************************* EXECUTE FORM  ****************************** 11790000
.*                                                                      11800000
.*       PROCESS FLAG BYTES FOR SDFLAG2, TYPE OPTION, AND EXITS.        11810000
.*                                                             @G860P31 11820000
.********************************************************************** 11830000
.*                                                                      11840000
.SDEX48A AIF   ('&SDFLAG2' EQ '0').SDEX48B  ANY FLAG2 FIELDS   @G383P1U 11850000
         OI    40(1),&SDFLAG2    SET OPTION FLAGS              @G383P1U 11860000
.SDEX48B AIF   ('&SDCNTL1' EQ '0').SDEX48C  ANY CNTL OPTIONS   @G860P31 11870000
         OI    41(1),&SDCNTL1               SET CONTROL FLAGS  @G860P31 11880000
.SDEX48C AIF   ('&SDTYPF1' EQ '0').SDEX48D  ANY TYPE OPTIONS   @G383P1U 11890000
         OI    42(1),&SDTYPF1               SET TYPE FLAGS     @G383P1U 11900000
.SDEX48D AIF   ('&SDATAF3' EQ '0').SDEX48E  ANY EXIT OPTIONS   @G383P1U 11910000
         OI    44(1),&SDATAF3               SET EXIT FLAGS     @G383P1U 11920000
.SDEX48E AIF   ('&SDATAF4' EQ '0').SDEX48F  ANY EXIT OPTIONS       @LEA 11930000
         OI    45(1),&SDATAF4               SET EXIT FLAGS         @LEA 11940000
.*                                                                      11950000
.************************* EXECUTE FORM  ****************************** 11960000
.*                                                                      11970000
.*       PROCESS  SUBPLST  AND  KEYLIST  OPTIONS.                       11980000
.*                                                             @G860P31 11990000
.********************************************************************** 12000000
.*                                                                      12010000
.SDEX48F AIF   (&SDSPLST EQ 0).SDEXM00 IS SUBPLST SPECIFIED        @LEC 12020000
         IHBSETR &SUBPLST,0           LOAD SUBPLST ADDRESS     @G860P31 12030000
         ST    0,48(0,1)                    STORE SUBPLST ADDR     @L3C 12040000
         AIF   ('&SYSASCE' EQ 'P').NOAR9                           @L3A 12050000
         STAM  0,0,80(1)              SAVE SUBPLST ALET            @L3A 12060000
.NOAR9   ANOP                                                      @L3A 12070000
         AIF   (&SDKYLST EQ 0).SDEXM00 IS KEYLIST SPECIFIED        @T1P 12080000
         IHBSETR &KEYLIST,0           LOAD KEYLIST ADDRESS     @G860P31 12090000
         ST    0,52(0,1)              STORE KEYLIST ADDRESS        @L3C 12100000
         AIF   ('&SYSASCE' EQ 'P').NOAR10                          @L3A 12110000
         STAM  0,0,84(1)              SAVE KEYLIST ALET            @L3A 12120000
.NOAR10  ANOP                                                      @L3A 12130000
.*                                                                      12140000
.************************* EXECUTE FORM  ****************************** 12150000
.*                                                                      12160000
.*       PROCESS  PSWREGS OPTION                                        12170000
.*                                                                 @T1P 12180000
.********************************************************************** 12190000
.*                                                                      12200000
.SDEXM00 AIF   (&SDPREG EQ 0).SDEXM01 IS PSWREGS SPECIFIED         @T1P 12210000
         IHBSETR &PSWREGS,0           LOAD PSWREGS ADDRESS         @T1P 12220000
         ST    0,104(,1)                    STORE PSWREGS ADDR     @T1P 12230000
         AIF   ('&SYSASCE' EQ 'P').NOAR22                          @T3A 12240000
         STAM  0,0,108(1)                   SAVE PSWREGS ALET      @T3A 12250000
.NOAR22  ANOP                                                      @T3A 12260000
.*                                                                      12270000
.************************* EXECUTE FORM  ****************************** 12280000
.*                                                                      12290000
.*       PROCESS  SYMREC OPTION                                         12300000
.*                                                                 @T1P 12310000
.********************************************************************** 12320000
.*                                                                      12330000
.SDEXM01 AIF   (&SDSRS EQ 0).SDEXM02  IS SYMREC SPECIFIED          @T1P 12340000
         IHBSETR &SYMREC,0            LOAD SYMREC ADDRESS          @T1P 12350000
         ST    0,112(,1)                    STORE SYMREC ADDR      @T1P 12360000
         AIF   ('&SYSASCE' EQ 'P').NOAR23                          @T3A 12370000
         STAM  0,0,116(1)                   SAVE SYMREC ALET       @T3A 12380000
.NOAR23  ANOP                                                      @T3A 12390000
.*                                                                      12400000
.************************* EXECUTE FORM  ****************************** 12410000
.*                                                                      12420000
.*       PROCESS ID/IDAD                                                12430000
.*                                                                 @T1P 12440000
.********************************************************************** 12450000
.*                                                                      12460000
.SDEXM02 AIF   ('&IDAD' EQ '').SDEXM03      IS IDAD SPECIFIED      @T1P 12470000
         IHBSETR   &IDAD,0                  GET ADDRESS OF ID      @T1P 12480000
         ST    0,120(0,1)                   SAVE IDAD INTO LIST    @T1P 12490000
         AIF   ('&SYSASCE' EQ 'P').NOAR24                          @T3A 12500000
         STAM  0,0,124(1)                   SAVE IDAD ALET         @T3A 12510000
.NOAR24  ANOP                                                      @T3A 12520000
         AGO   .SDEXM04                     CHECK FURTHER          @T1P 12530000
.SDEXM03 AIF   ('&ID' EQ '').SDEXM04        IS ID SPECIFIED        @T1P 12540000
&GNAME   SETC  'IHB'.'&SYSNDX.'.'A'         GET A UNIQUE SYMBOL    @T1P 12550000
         BAL   15,&GNAME                    BRANCH AROUND DATA     @T1P 12560000
&CTR1    SETA  K'&ID-2-&IDCTR               LENGTH OF USER DATA    @T1P 12570000
&TEMP    SETC  'IHB'.'&SYSNDX.'.'I'                                @T1P 12580000
&TEMP    DC    AL1(&CTR1)                   LENGTH OF ID           @T1P 12590000
         DC    C&ID                         ID                     @T1P 12600000
&GNAME   DS    0H                                                  @T1P 12610000
         ST    15,120(0,1)                  SAVE IDAD INTO LIST    @T1P 12620000
         AIF   ('&SYSASCE' EQ 'P').NOAR25                          @T3A 12630000
         SLR   15,15                        STORAGE IS IN PRIMARY  @T3A 12640000
         ST    15,124(,1)                   SAVE ID ALET           @T3A 12650000
.NOAR25  ANOP                                                      @T3A 12660000
.*                                                                      12670000
.************************* EXECUTE FORM  ****************************** 12680000
.*                                                                      12690000
.*       PROCESS STRLIST                                                12700000
.*                                                                 @LBA 12710000
.********************************************************************** 12720000
.*                                                                      12730000
.SDEXM04 ANOP                                                      @T1P 12740000
         AIF   ('&STRLIST' EQ '').SDEXM05  IS STRLIST SPECIFIED    @LBA 12750000
         IHBSETR    &STRLIST,0             LOAD R0 W/ STRLIST ADDR @LBA 12760000
         ST    0,128(,1)               STRLIST ADDR INTO PARM LIST @LBA 12770000
         AIF   ('&SYSASCE' EQ 'P').NOAR29                               12780000
         STAM  0,0,132(1)                  SAVE STRLIST ALET       @LBA 12790000
.NOAR29  ANOP                                                      @LBA 12800000
.*                                                                      12810000
.SDEXM05 ANOP                                                      @LBA 12820000
.************************* EXECUTE FORM  ****************************** 12830000
.*                                                                      12840000
.*       PROCESS INTOKEN                                                12850000
.*                                                                 @LCA 12860000
.********************************************************************** 12870000
.*                                                                      12880000
         AIF   ('&INTOKEN' EQ '').SDEXM06  IS INTOKEN SPECIFIED    @LCA 12890000
         IHBSETR    &INTOKEN,0             LOAD R0 W/ INTOKEN ADDR @LCA 12900000
         ST    0,136(,1)               INTOKEN ADDR INTO PARM LIST @LCA 12910000
         AIF   ('&SYSASCE' EQ 'P').NOAR31                          @LCA 12920000
         STAM  0,0,140(1)                  SAVE INTOKEN ALET       @LCA 12930000
.NOAR31  ANOP                                                      @LCA 12940000
.*                                                                      12950000
.SDEXM06 ANOP                                                      @LCA 12960000
.*                                                                      12970000
.************************* EXECUTE FORM  ****************************** 12980000
.*                                                                      12990000
.*       PROCESS REMOTE                                                 13000000
.*                                                                 @LCA 13010000
.********************************************************************** 13020000
.*                                                                      13030000
         AIF   ('&REMOTE' EQ '').SDEXM07   IS REMOTE SPECIFIED     @LCA 13040000
         IHBSETR    &REMOTE,0              LOAD R0 W/ REMOTE ADDR  @LCA 13050000
         ST    0,144(,1)               REMOTE ADDR INTO PARM LIST  @LCA 13060000
         AIF   ('&SYSASCE' EQ 'P').NOAR33                          @LCA 13070000
         STAM  0,0,148(1)                  SAVE REMOTE ALET        @LCA 13080000
.NOAR33  ANOP                                                      @LCA 13090000
.*                                                                      13100000
.SDEXM07 ANOP                                                      @LCA 13110000
.*                                                                      13120000
.************************* EXECUTE FORM  ****************************** 13130000
.*                                                                      13140000
.*       PROCESS PROBDESC                                               13150000
.*                                                                 @LCA 13160000
.********************************************************************** 13170000
.*                                                                      13180000
         AIF   ('&PROBDESC' EQ '').SDEXM08 IS PROBDESC SPECIFIED   @LCA 13190000
         IHBSETR    &PROBDESC,0          LOAD R0 W/ PROBDESC ADDR  @LCA 13200000
         ST    0,152(,1)              PROBDESC ADDR INTO PARM LIST @LCA 13210000
         AIF   ('&SYSASCE' EQ 'P').NOAR35                          @LCA 13220000
         STAM  0,0,156(1)                  SAVE PROBDESC ALET      @LCA 13230000
.NOAR35  ANOP                                                      @LCA 13240000
.*                                                                      13250000
.SDEXM08 ANOP                                                      @LCA 13260000
.*                                                                      13270000
.************************* EXECUTE FORM  ****************************** 13280000
.*                                                                      13290000
.*       PROCESS JOBLIST                                                13300000
.*                                                                 @LCA 13310000
.********************************************************************** 13320000
.*                                                                      13330000
         AIF   ('&JOBLIST' EQ '').SDEXM09  IS JOBLIST SPECIFIED    @LCA 13340000
         IHBSETR    &JOBLIST,0             LOAD R0 W/ JOBLIST ADDR @LCA 13350000
         ST    0,160(,1)               JOBLIST ADDR INTO PARM LIST @LCA 13360000
         AIF   ('&SYSASCE' EQ 'P').NOAR37                          @LCA 13370000
         STAM  0,0,164(1)                  SAVE JOBLIST ALET       @LCA 13380000
.NOAR37  ANOP                                                      @LCA 13390000
.*                                                                      13400000
.SDEXM09 ANOP                                                      @LCA 13410000
.*                                                                      13420000
.************************* EXECUTE FORM  ****************************** 13430000
.*                                                                      13440000
.*       PROCESS DSPLIST                                                13450000
.*                                                                 @LCA 13460000
.********************************************************************** 13470000
.*                                                                      13480000
         AIF   ('&DSPLIST' EQ '').SDEXM10  IS DSPLIST SPECIFIED    @LCA 13490000
         IHBSETR    &DSPLIST,0             LOAD R0 W/ DSPLIST ADDR @LCA 13500000
         ST    0,168(,1)               DSPLIST ADDR INTO PARM LIST @LCA 13510000
         AIF   ('&SYSASCE' EQ 'P').NOAR39                          @LCA 13520000
         STAM  0,0,172(1)                  SAVE DSPLIST ALET       @LCA 13530000
.NOAR39  ANOP                                                      @LCA 13540000
.*                                                                      13550000
.SDEXM10 ANOP                                                      @LCA 13560000
.*                                                                      13570000
.************************* EXECUTE FORM  ****************************** 13580000
.*                                                                      13590000
.*       PROCESS UTOKEN                                                 13600000
.*                                                                      13610000
.*       NOTE THAT ALET IS NOT REQUIRED FOR UTOKEN, HENCE NOT SET. @LHA 13620000
.*                                                                      13630000
.********************************************************************** 13640000
.*                                                                      13650000
         AIF   ('&UTOKEN' EQ '').SDEXM11   IS UTOKEN SPECIFIED     @LHA 13660000
         IHBSETR    &UTOKEN,0              LOAD R0 W/ UTOKEN ADDR  @LHA 13670000
         ST    0,180(,1)               UTOKEN ADDR INTO PARMLIST   @LHA 13680000
.SDEXM11 ANOP                                                      @LHA 13690000
.*                                                                      13700000
.************************* EXECUTE FORM  ****************************** 13710000
.*                                                                      13720000
.*       PROCESS SDUFLAG3 - SDUMP CONTROL FLAGS                         13730000
.*                                                                      13740000
.*         ***  WARNING ***                                             13750000
.*                                                                      13760000
.*         This flag is only valid in a VER 3 or later PLIST.           13770000
.*         Do not set or test this field without checking PLVER.   @LFA 13780000
.********************************************************************** 13790000
.*                                                                      13800000
         AIF   ('&PLVER' EQ '1').NOFLAG3                           @LFA 13810000
         AIF   ('&PLVER' EQ '2').NOFLAG3                           @LFA 13820000
.* Version 3 or later plist                                             13830000
         MVI   176(1),&SDUFLAG3  Set SDUMP Control Flags           @LFA 13840000
.NOFLAG3 ANOP                                                      @LFA 13850000
.*                                                                      13860000
.************************* EXECUTE FORM  ****************************** 13870000
.*                                                                      13880000
.*       CLOSE OUT THE EXECUTE FORM EXPANSION.                          13890000
.*                                                             @G860P31 13900000
.********************************************************************** 13910000
.*                                                                      13920000
.SDEX49  ANOP                                                  @G383P1U 13930000
         AIF   ('&BRANCH' EQ 'YES').SDEX50  IS A BRANCH ENTRY  @G383P1U 13940000
         SVC   51                           INVOKE SVC DUMP VIA SVC     13950000
         AGO   .SDEND                       GO END MACRO PROCESSING     13960000
.SDEX50  ANOP                                                           13970000
         AIF    ('&SYSAM64' NE 'YES').AM641                        @LFA 13980000
         MNOTE 8,'SDUMP ---> BRANCH=YES IS NOT VALID IN AMODE 64'  @LFA 13990000
.AM641   ANOP                                                      @LFA 14000000
         L     15,CVTPTR(0,0)               ADDRESS OF CVT       YM1995 14010000
         L     15,CVTSDMP-CVTMAP(15,0)  ADDRESS OF SVC DUMP ENTRYYM1995 14020000
         BALR  14,15                        INVOKE SVC DUMP VIA BAL     14030000
         AGO   .SDEND                       GO END MACRO PROCESSING     14040000
.*                                                                      14050000
.*                                                                      14060000
.*                                                                      14070000
.************************ LIST FORM *********************************** 14080000
.*                                                                      14090000
.*       LIST FORM EXPANSION BEGINS HERE                                14100000
.*                                                             @G860P31 14110000
.********************************************************************** 14120000
.*                                                                      14130000
.*                                                                      14140000
.*                                                                      14150000
.LSTFORM ANOP                                                           14160000
&NAME    DS    0F                           SDUMP PARAMETER LIST        14170000
.*                                                                      14180000
.************************ LIST FORM *********************************** 14190000
.*                                                                      14200000
.*       PROCESS 1ST 4 FLAG BYTES  AND  DCB                             14210000
.*                                                             @G860P31 14220000
.********************************************************************** 14230000
.*                                                                      14240000
         DC    AL1(&SDFLAG0)                FLAG BYTE                   14250000
         DC    AL1(&SDFLAG1)                FLAG BYTE                   14260000
         DC    AL1(&SDATAF1)                FLAG BYTE                   14270000
         DC    AL1(&SDATAF2)                FLAG BYTE                   14280000
         AIF   ('&DCB' EQ '').SDLST10       IS DCB SPECIFIED            14290000
         AIF   ('&DCB'(1,1) EQ '(').MESG1   IS DCB ADDRESS IN A REG     14300000
         DC    A(&DCB)                      ADDRESS OF DCB              14310000
         AGO   .SDLST15                     GO CHECK FOR STORAGE ADDR   14320000
.SDLST10 ANOP                                                           14330000
         DC    A(0)                         ADDRESS OF DCB              14340000
.*                                                                      14350000
.************************ LIST FORM *********************************** 14360000
.*                                                                      14370000
.*       PROCESS STORAGE, LIST OR LISTA OPTION.                         14380000
.*                                                             @G860P31 14390000
.********************************************************************** 14400000
.*                                                                      14410000
.SDLST15 AIF   ('&SDSTOR' NE '0').SDLST16   STORAGE/LIST SPEC @G383P1U  14420000
         AIF   ('&LISTA' EQ '').SDLST24     IS LISTA SPECIFIED @G383P1U 14430000
         AIF   ('&LISTA'(1,1) EQ '(').MESG1  CHECK FOR R FORM  @G383P1U 14440000
         DC    A(&LISTA)               ADDRESS OF STORAGE LIST @G383P1U 14450000
         AGO   .SDLST25                     LISTA OPTION DONE  @G383P1U 14460000
.SDLST16 AIF   ('&LIST' EQ '').SDLST20      IS LIST SPECIFIED           14470000
         AIF   ('&LIST'(1,1) EQ '(').MESG1  IS LIST ADDRESS IN A REG    14480000
         DC    A(&LIST)                     ADDRESS OF STORAGE LIST     14490000
         AGO   .SDLST25                     GO CHECK FOR USER DATA      14500000
.SDLST20 ANOP                               STORAGE SPECIFIED  @G860P31 14510000
         DC    A(*-8+&DISP1)        ADDRESS OF STORAGE LIST    @G860P31 14520000
.*             (*-8) POINTS TO THE FRONT OF THE PARAMETER LIST @G860P31 14530000
.*             DISP1 IS THE OFFSET TO THE END OF THE PARAMETER @G860P31 14540000
.*             LIST, WHICH IS WHERE THE STORAGE ADDRESSES ARE  @G860P31 14550000
.*             BUILT INTO THE PARAMETER LIST.                  @G860P31 14560000
         AGO   .SDLST25                SKIP NULL DECLARE       @G383P1U 14570000
.SDLST24 ANOP                                                           14580000
         DC    A(0)                         ADDRESS OF STORAGE LIST     14590000
.*                                                                      14600000
.************************ LIST FORM *********************************** 14610000
.*                                                                      14620000
.*       PROCESS USER DATA, HDR OR HDRAD OPTION.                        14630000
.*                                                             @G860P31 14640000
.********************************************************************** 14650000
.*                                                                      14660000
.SDLST25 ANOP                                                           14670000
         AIF   ('&SDHDR' EQ '0').SDLST38    IS USER DATA SPECIFIED      14680000
         AIF   ('&HDRAD' NE '').SDLST35     IS HDRAD SPECIFIED          14690000
         DC    A(*-12+&DISP2)               HDR ADDRESS        @G860P31 14700000
.*             (*-12) IS THE ADDRESS OF THE BEGINNING OF THE   @G860P31 14710000
.*             DISP2 IS THE OFFSET OF THE USER DATA (HDR) FROM @G860P31 14720000
.*             THE BEGINNING OF THE PARAMETER LIST.  DISP2     @G860P31 14730000
.*             IS EQUAL TO THE LENGTH OF THE FIXED PART OF THE @G860P31 14740000
.*             PARAMETER LIST PLUS THE LENGTH OF THE STORAGE   @G860P31 14750000
.*             ADDRESS LIST.                                   @G860P31 14760000
         AGO   .SDLST40                     GO DEFINE REST OF PARAM LST 14770000
.SDLST35 AIF   ('&HDRAD'(1,1) EQ '(').MESG1 IS ADDR OF USER DATA IN REG 14780000
         DC    A(&HDRAD)                    ADDRESS OF USER DATA        14790000
         AGO   .SDLST40                     GO DEFINE REST OF PARAM LST 14800000
.SDLST38 ANOP                                                           14810000
         DC    A(0)                         ADDRESS OF USER DATA        14820000
.*                                                                      14830000
.************************ LIST FORM *********************************** 14840000
.*                                                                      14850000
.*       SAVE SPOTS FOR ECB/SRB, ASID, AND ASIDLST.  THESE OPTIONS ARE  14860000
.*       NOT ALLOWED ON THE LIST FORM.                                  14870000
.*                                                                 @L4C 14880000
.********************************************************************** 14890000
.*                                                                      14900000
.SDLST40 ANOP                                                           14910000
         DC    A(0)                         ADDRESS OF ECB/SRB     @L4C 14920000
         DC    AL2(0)                       CURRENT ASID                14930000
         DC    AL2(0)                       OTHER ASID                  14940000
         DC    A(0)                         ADDRESS OF ASID LIST        14950000
.*                                                                      14960000
.************************ LIST FORM *********************************** 14970000
.*                                                                      14980000
.*       PROCESS SUMLIST OR SUMLSTA OPTION                              14990000
.*                                                             @G860P31 15000000
.********************************************************************** 15010000
.*                                                                      15020000
         AIF   (&SDSUMLT EQ 0).SDLST45 IF SUMLIST NO SPECIFIED @G383P1U 15030000
         AIF   ('&SUMLIST'(1,1) EQ '(').MESG1 REGISTER INVALID @G383P1U 15040000
         DC    A(&SUMLIST)                 ADDRESS OF SUMLIST  @G383P1U 15050000
         AGO   .SDLST50                                        @G383P1U 15060000
.SDLST45 ANOP                                                  @G383P1U 15070000
         AIF   (&SDSMLTA EQ 0).SDLST49 IF SUMLSTA NO SPECIFIED @G383P1U 15080000
         AIF   ('&SUMLSTA'(1,1) EQ '(').MESG1 REGISTER INVALID @G383P1U 15090000
         DC    A(&SUMLSTA)                  ADDRESS OF SUMLSTA @G383P1U 15100000
         AGO   .SDLST50                                        @G383P1U 15110000
.SDLST49 ANOP                                                  @G383P1U 15120000
         DC    A(0)           ADDRESS OF SUMLIST/SUMLSTA LIST  @G383P1U 15130000
.*                                                                      15140000
.************************ LIST FORM *********************************** 15150000
.*                                                                      15160000
.*       2 WORDS RESERVED FOR SLIP AND SYSMDUMP PURPOSES.               15170000
.*                                                             @G860P31 15180000
.********************************************************************** 15190000
.*                                                                      15200000
.SDLST50 ANOP                                                           15210000
         DC    A(0)                      RESERVED              @G33VPHD 15220000
         DC    A(0)                      RESERVED              @G33VPHD 15230000
         DC    AL1(&SDFLAG2)             FLAG BYTE             @G383P1U 15240000
         DC    AL1(&SDCNTL1)             CONTROL FLAG BYTE     @G860P31 15250000
         DC    AL1(&SDTYPF1)             TYPE FLAG BYTE        @G383P1U 15260000
         DC    AL1(&PLVER.)              VERSION                   @T1P 15270000
         DC    AL1(&SDATAF3)             EXIT FLAG BYTE        @G383P1U 15280000
         DC    AL1(&SDATAF4)             EXIT FLAG BYTE            @LEC 15290000
         DC    AL1(&SDAT3)               SDATA OPTIONS             @T1P 15300000
         DC    AL1(0)                    RESERVED SDATA OPTIONS    @T1P 15310000
         AIF   (&SDSPLST  EQ  0).SDLST55 CHECK FOR SUBPLST     @G860P31 15320000
         AIF   ('&SUBPLST'(1,1) EQ '(').MESG1 REG FORM INVALID @G860P31 15330000
         DC    A(&SUBPLST)               ADDRESS OF SUBPLST    @G860P31 15340000
         AIF   (&SDKYLST  EQ  0).SDLST56 CHECK FOR KEYLIST     @G860P31 15350000
         AIF   ('&KEYLIST'(1,1) EQ '(').MESG1 REG FORM INVALID @G860P31 15360000
         DC    A(&KEYLIST)               ADDRESS OF KEYLIST    @G860P31 15370000
         AGO   .SDLST57                  SKIP NEXT 2 DC STMTS  @G860P31 15380000
.SDLST55 ANOP                           FILL IN RESERVED SLOTS @G860P31 15390000
         DC    A(0)                      ADDRESS OF SUBPLST    @G860P31 15400000
.SDLST56 ANOP                           FILL IN RESERVED SLOTS @G860P31 15410000
         DC    A(0)                      ADDRESS OF KEYLIST    @G860P31 15420000
.SDLST57 ANOP                           FILL IN RESERVED SLOTS @G860P31 15430000
         DC    A(0)                      RESERVED                  @T1P 15440000
.*                                       RESERVED FOR SLIP              15450000
         DC    A(0)                      ALET OF DCB PARAMETER     @L3A 15460000
         DC    A(0)                      ALET OF STORAGE PARAM     @L3A 15470000
         DC    A(0)                      ALET OF HDR PARAMETER     @L3A 15480000
         DC    A(0)                      ALET OF ASIDLST PARAM     @L3A 15490000
         DC    A(0)                      ALET OF SUMLIST PARAM     @L3A 15500000
         DC    A(0)                      ALET OF SUBPLST PARAM     @L3A 15510000
         DC    A(0)                      ALET OF KEYLIST PARAM     @L3A 15520000
.*                                                                      15530000
.************************ LIST FORM *********************************** 15540000
.*                                                                      15550000
.*       PROCESS LISTD and LIST64 OPTIONS                               15560000
.*                                                                      15570000
.* LISTD and LIST64 are mutually exclusive.  The address and alets      15580000
.* for both are stored in the same locations.                           15590000
.*                                                                 @LFC 15600000
.********************************************************************** 15610000
.*                                                                      15620000
.* Check if LISTD specified                                             15630000
         AIF   ('&LISTD' EQ '').SDLT57A     IS LISTD SPECIFIED     @L6A 15640000
         AIF   ('&LISTD'(1,1) EQ '(').MESG1  CHECK FOR R FORM      @L6A 15650000
.* Save LISTD address                                                   15660000
         DC    A(&LISTD)                 ADDRESS OF LISTD          @L6A 15670000
         AGO   .SDLT57C                     LISTD OPTION DONE      @LFC 15680000
.* Check if LIST64 specified                                            15690000
.SDLT57A ANOP                                                      @LFA 15700000
         AIF   ('&LIST64' EQ '').SDLT57B     IS LIST64 SPECIFIED?  @LFA 15710000
         AIF   ('&LIST64'(1,1) EQ '(').MESG1  CHECK FOR R FORM     @LFA 15720000
.* Save LIST64 address                                                  15730000
         DC    A(&LIST64)                ADDRESS FOR LIST64        @L6C 15740000
         AGO   .SDLT57C                     LIST64 OPTION DONE     @LFC 15750000
.SDLT57B ANOP                                                      @L6A 15760000
         DC    A(0)                      No LIST64/LISTD           @LFC 15770000
.SDLT57C ANOP                                                           15780000
         DC    A(0)                      No ALET for LISTD/LIST64  @LFC 15790000
.*                                                                      15800000
.************************ LIST FORM *********************************** 15810000
.*                                                                      15820000
.*       PROCESS THE SUMLSTL and SUMLIST64 KEYWORD OPTIONS              15830000
.*                                                                      15840000
.* SUMLSTL and SUMLIST64 are mutually exclusive. The address and alets  15850000
.* for both are stored in the same locations.                           15860000
.*                                                                 @LFC 15870000
.********************************************************************** 15880000
.*                                                                      15890000
.SDLST58 ANOP                                                      @L5A 15900000
         AIF   (&SDSMLTL EQ 0).SDLT58C IF SUMLSTL NOT SPECIFIED    @LFC 15910000
         AIF   ('&SUMLSTL'(1,1) EQ '(').MESG1 REGISTER INVALID     @L5A 15920000
         DC    A(&SUMLSTL)               ADDRESS OF SUMLSTL        @L5A 15930000
         AGO   .SDLT58A                                            @L5A 15940000
.SDLT58C ANOP                                                      @LFA 15950000
         AIF   (&SDSLT64 EQ 0).SDLT58L IF SUMLIST64 NOT SPECIFIED  @LFA 15960000
         AIF   ('&SUMLIST64'(1,1) EQ '(').MESG1 REGISTER INVALID   @LFA 15970000
         DC    A(&SUMLIST64)             ADDRESS OF SUMLIST64      @LFA 15980000
         AGO   .SDLT58A                                            @LFA 15990000
.SDLT58L ANOP                                                      @L5A 16000000
         DC    A(0)                      No SUMLSTL or SUMLIST64   @LFC 16010000
.SDLT58A ANOP                                                      @L5A 16020000
         DC    A(0)                      ALET SUMLSTL or SUMLIST64 @L5A 16030000
.*                                                                      16040000
         AIF   ('&PLVER' EQ '2').PLVER2A                           @T3M 16050000
         AIF   ('&PLVER' EQ '3').PLVER2A                           @LBA 16060000
         DC    2A(0)                     RESERVED                  @T1P 16070000
         AGO   .PLVER2B                                            @T1P 16080000
.*                                                                      16090000
.* FIELDS IN PLIST VERSION 2 and LATER                                  16100000
.*   PSWREGS                                                            16110000
.PLVER2A ANOP                                                      @T1P 16120000
         AIF   (&SDPREG  EQ  0).SDLST61 CHECK FOR PSWREGS          @T1P 16130000
         AIF   ('&PSWREGS'(1,1) EQ '(').MESG1 REG FORM INVALID     @T1P 16140000
         DC    A(&PSWREGS)               ADDRESS OF PSWREGS        @T1P 16150000
         DC    A(0)                      ALET OF PSWREGS           @T1P 16160000
         AGO   .SDLST62                  SKIP To next item in plist@LFC 16170000
.SDLST61 ANOP                            FILL IN RESERVED SLOTS    @T1P 16180000
         DC    A(0)                      No address for PSWREGS    @LFC 16190000
         DC    A(0)                      No Alet for PSWREGS       @LFC 16200000
.SDLST62 ANOP                            END OF PSWREGS            @LFC 16210000
.*                                                                      16220000
         AIF   (&SDSRS EQ  0).SDLST63 CHECK FOR SYMREC             @T1P 16230000
         AIF   ('&SYMREC'(1,1) EQ '(').MESG1 REG FORM INVALID      @T1P 16240000
         DC    A(&SYMREC)                ADDRESS OF SYMREC         @T1P 16250000
         DC    A(0)                      ALET OF SYMREC            @T1P 16260000
         AGO   .SDLST64                  SKIP NEXT DC STMT         @T1P 16270000
.SDLST63 ANOP                            FILL IN RESERVED SLOTS    @T1P 16280000
         DC    A(0)                      ADDRESS OF SYMREC         @T1P 16290000
         DC    A(0)                      ALET OF SYMREC            @T1P 16300000
.SDLST64 ANOP                            END OF SYMREC             @T1P 16310000
         AIF   (&SDIDAD  EQ  0).SDLST65 CHECK FOR IDAD             @T1P 16320000
         AIF   ('&IDAD'(1,1) EQ '(').MESG1 REG FORM INVALID        @T1P 16330000
         DC    A(&IDAD)                  ADDRESS OF IDAD           @T1P 16340000
         DC    A(0)                      ALET OF IDAD              @T1P 16350000
         AGO   .SDLST67                  SKIP NEXT DC STMT         @T1P 16360000
.SDLST65 ANOP                            FILL IN RESERVED SLOTS    @T1P 16370000
         AIF   (&SDID    EQ  0).SDLST66 CHECK FOR ID               @T1P 16380000
         AIF   ('&ID'(1,1) EQ '(').MESG1 REG FORM INVALID          @T1P 16390000
         DC    A(IHB&SYSNDX.I)           ADDRESS OF ID             @T1P 16400000
         DC    A(0)                      ALET OF ID                @T1P 16410000
         AGO   .SDLST67                  SKIP NEXT DC STMT         @T1P 16420000
.SDLST66 ANOP                            END OF ID/IDAD            @T1P 16430000
         DC    A(0)                      ADDRESS OF ID             @T1P 16440000
         DC    A(0)                      ALET OF ID                @T1P 16450000
.SDLST67 ANOP                            END OF ID/IDAD            @T1P 16460000
         AIF   ('&PLVER' EQ '3').PLVER3A                           @LBA 16470000
         AGO   .PLVER2B                  VERSION 2 AND LOWER DONE  @LBA 16480000
.PLVER3A ANOP                            VERSION 3 AND HIGHER      @LBA 16490000
.*                                                                      16500000
.************************ LIST FORM *********************************** 16510000
.*                                                                      16520000
.*       PROCESS STRLIST OPTION                                         16530000
.*                                                                 @LBA 16540000
.********************************************************************** 16550000
.*                                                                      16560000
         AIF   ('&STRLIST' EQ '').SDLT68A   IS STRLIST SPECIFIED   @LBA 16570000
         AIF   ('&STRLIST'(1,1) EQ '(').MESG1  CHECK FOR R FORM    @LBA 16580000
         DC    A(&STRLIST)                  ADDRESS OF STRLIST     @LBA 16590000
         AGO   .SDLT68B                     STRLIST ADDRESS DONE   @LBA 16600000
.SDLT68A ANOP                                                      @L6A 16610000
         DC    A(0)                      ADDRESS FOR STRLIST       @LBA 16620000
.SDLT68B ANOP                                                      @LBA 16630000
         DC    A(0)                      ALET OF STRLIST PARAM     @LBA 16640000
.*                                                                      16650000
.************************ LIST FORM *********************************** 16660000
.*                                                                      16670000
.*       PROCESS INTOKEN OPTION                                         16680000
.*                                                                 @LCA 16690000
.********************************************************************** 16700000
.*                                                                      16710000
         AIF   ('&INTOKEN' EQ '').SDLT69A   IS INTOKEN SPECIFIED   @LCA 16720000
         AIF   ('&INTOKEN'(1,1) EQ '(').MESG1  CHECK FOR R FORM    @LCA 16730000
         DC    A(&INTOKEN)                  ADDRESS OF INTOKEN     @LCA 16740000
         AGO   .SDLT69B                     INTOKEN ADDRESS DONE   @LCA 16750000
.SDLT69A ANOP                                                      @LCA 16760000
         DC    A(0)                      ADDRESS FOR INTOKEN       @LCA 16770000
.SDLT69B ANOP                                                      @LCA 16780000
         DC    A(0)                      ALET OF INTOKEN PARAM     @LCA 16790000
.*                                                                      16800000
.************************ LIST FORM *********************************** 16810000
.*                                                                      16820000
.*       PROCESS REMOTE OPTION                                          16830000
.*                                                                 @LCA 16840000
.********************************************************************** 16850000
.*                                                                      16860000
         AIF   ('&REMOTE' EQ '').SDLT70A    IS REMOTE SPECIFIED    @LCA 16870000
         AIF   ('&REMOTE'(1,1) EQ '(').MESG1   CHECK FOR R FORM    @LCA 16880000
         DC    A(&REMOTE)                   ADDRESS OF REMOTE      @LCA 16890000
         AGO   .SDLT70B                     REMOTE ADDRESS DONE    @LCA 16900000
.SDLT70A ANOP                                                      @LCA 16910000
         DC    A(0)                      ADDRESS FOR REMOTE        @LCA 16920000
.SDLT70B ANOP                                                      @LCA 16930000
         DC    A(0)                      ALET OF REMOTE PARAM      @LCA 16940000
.*                                                                      16950000
.************************ LIST FORM *********************************** 16960000
.*                                                                      16970000
.*       PROCESS PROBDESC OPTION                                        16980000
.*                                                                 @LCA 16990000
.********************************************************************** 17000000
.*                                                                      17010000
         AIF   ('&PROBDESC' EQ '').SDLT71A  IS PROBDESC SPECIFIED  @LCA 17020000
         AIF   ('&PROBDESC'(1,1) EQ '(').MESG1 CHECK FOR R FORM    @LCA 17030000
         DC    A(&PROBDESC)                 ADDRESS OF PROBDESC    @LCA 17040000
         AGO   .SDLT71B                     PROBDESC ADDRESS DONE  @LCA 17050000
.SDLT71A ANOP                                                      @LCA 17060000
         DC    A(0)                      ADDRESS FOR PROBDESC      @LCA 17070000
.SDLT71B ANOP                                                      @LCA 17080000
         DC    A(0)                      ALET OF PROBDESC PARAM    @LCA 17090000
.*                                                                      17100000
.*********************** LIST FORM ***********************************  17110000
.*                                                                      17120000
.*       PROCESS JOBLIST OPTION                                         17130000
.*                                                                 @LCA 17140000
.********************************************************************** 17150000
.*                                                                      17160000
         AIF   ('&JOBLIST' EQ '').SDLT72A   IS JOBLIST SPECIFIED   @LCA 17170000
         AIF   ('&JOBLIST'(1,1) EQ '(').MESG1  CHECK FOR R FORM    @LCA 17180000
         DC    A(&JOBLIST)                  ADDRESS OF JOBLIST     @LCA 17190000
         AGO   .SDLT72B                     JOBLIST ADDRESS DONE   @LCA 17200000
.SDLT72A ANOP                                                      @LCA 17210000
         DC    A(0)                      ADDRESS FOR JOBLIST       @LCA 17220000
.SDLT72B ANOP                                                      @LCA 17230000
         DC    A(0)                      ALET OF JOBLIST PARAM     @LCA 17240000
.*                                                                      17250000
.************************ LIST FORM *********************************** 17260000
.*                                                                      17270000
.*       PROCESS DSPLIST OPTION                                         17280000
.*                                                                 @LCA 17290000
.********************************************************************** 17300000
.*                                                                      17310000
         AIF   ('&DSPLIST' EQ '').SDLT73A   IS DSPLIST SPECIFIED   @LCA 17320000
         AIF   ('&DSPLIST'(1,1) EQ '(').MESG1  CHECK FOR R FORM    @LCA 17330000
         DC    A(&DSPLIST)                  ADDRESS OF DSPLIST     @LCA 17340000
         AGO   .SDLT73B                     DSPLIST ADDRESS DONE   @LCA 17350000
.SDLT73A ANOP                                                      @LCA 17360000
         DC    A(0)                      ADDRESS FOR DSPLIST       @LCA 17370000
.SDLT73B ANOP                                                      @LCA 17380000
         DC    A(0)                      ALET OF DSPLIST PARAM     @LCA 17390000
.*                                                                      17400000
.************************ LIST FORM *********************************** 17410000
.*                                                                      17420000
.*       PROCESS SDUMP CONTROL FLAGS - SDUFLAG3                         17430000
.*                                                                 @LFA 17440000
.********************************************************************** 17450000
.*                                                                      17460000
         DC    AL1(&SDUFLAG3)           SDUMP Control Flag values  @LFA 17470000
.*                                                                      17480000
         DC    XL3'0'                    RESERVED                  @LHC 17490000
.*                                                                      17500000
.************************ LIST FORM *********************************** 17510000
.*                                                                      17520000
.*       PROCESS UTOKEN OPTION                                          17530000
.*                                                                      17540000
.*       NOTE THAT ALET IS NOT REQUIRED FOR UTOKEN, HENCE NOT SET. @LHA 17550000
.*                                                                      17560000
.********************************************************************** 17570000
.*                                                                      17580000
         AIF   ('&UTOKEN' EQ '').SDLT74A      IS UTOKEN SPECIFIED  @LHA 17590000
         AIF   ('&UTOKEN'(1,1) EQ '(').MESG1  CHECK FOR R FORM     @LHA 17600000
         DC    A(&UTOKEN)                     ADDRESS OF UTOKEN    @LHA 17610000
         AGO   .SDLT74B                       UTOKEN ADDRESS DONE  @LHA 17620000
.SDLT74A ANOP                                                      @LHA 17630000
         DC    A(0)                           ADDRESS FOR UTOKEN   @LHA 17640000
.SDLT74B ANOP                                                      @LHA 17650000
.*                                                                      17660000
.************************ LIST FORM *********************************** 17670000
.*                                                                      17680000
.*       END OF VERSION 3 PARAMETER LIST                                17690000
.*                                                                 @LBA 17700000
.********************************************************************** 17710000
.*                                                                      17720000
.PLVER2B ANOP                                                      @T1P 17730000
.*                                                                      17740000
.************************ LIST FORM *********************************** 17750000
.*                                                                      17760000
.*       BUILD USER STORAGE LIST.                                       17770000
.*                                                             @G860P31 17780000
.********************************************************************** 17790000
.*                                                                      17800000
.SDLST59 ANOP                                                  @G383P1U 17810000
         AIF   ('&STORAGE' EQ '').SDLST60   BUILD STORAGE LIST          17820000
.*                                                             @G33VPHD 17830000
&CTR1    SETA  N'&STORAGE                   NUMBER OF STORAGE ADDRESSES 17840000
&CTR2    SETA   0                           POSITION NO. OF ADDRESS     17850000
.LOOPD1  ANOP                                                           17860000
&CTR2    SETA  &CTR2+1                      NUMBER OF NEXT ADDRESS      17870000
         AIF   ('&STORAGE(&CTR2)'(1,1) EQ '(').MESG1  ADDR IN A REG     17880000
         DC    A(&STORAGE(&CTR2))           STORAGE ADDRESS             17890000
&CTR1    SETA  &CTR1-1                      NUMBER OF REMAINING ADDR.S  17900000
         AIF   ('&CTR1' GT '1').LOOPD1      IF NOT LAST ADDRESS, LOOP   17910000
&CTR2    SETA  &CTR2+1                      NUMBER OF LAST ADDRESS      17920000
         AIF   ('&STORAGE(&CTR2)'(1,1) EQ '(').MESG1  ADDR IN A REG     17930000
         DC    AL4(X'80000000'+&STORAGE(&CTR2))  LAST ADDRESS           17940000
.*                                                                      17950000
.************************ LIST FORM *********************************** 17960000
.*                                                                      17970000
.*       BUILD USER DATA FOR HDR OPTION.                                17980000
.*                                                             @G860P31 17990000
.********************************************************************** 18000000
.*                                                                      18010000
.SDLST60 ANOP                                                           18020000
.*                                                             @G33VPHD 18030000
         AIF   ('&HDR' EQ '').SDLST70       IS USER DATA SPECIFIED @T1P 18040000
&CTR1    SETA  K'&HDR-2-&HDRCTR             LENGTH OF USER DATA         18050000
         DC    AL1(&CTR1)                   LENGTH OF USER DATA         18060000
         DC    C&HDR                        USER DATA                   18070000
.************************ LIST FORM *********************************** 18080000
.*                                                                      18090000
.*       BUILD USER DATA FOR ID OPTION.                                 18100000
.*                                                                 @T1P 18110000
.********************************************************************** 18120000
.*                                                                      18130000
.SDLST70 ANOP                                                      @T1P 18140000
         AIF   ('&ID' EQ '').SDEND          IS USER DATA SPECIFIED @T1P 18150000
&CTR1    SETA  K'&ID-2-&IDCTR               LENGTH OF USER DATA    @T1P 18160000
&TEMP    SETC  'IHB'.'&SYSNDX.'.'I'                                @T1P 18170000
&TEMP    DC    AL1(&CTR1)                   LENGTH OF USER DATA    @T1P 18180000
         DC    C&ID                         USER DATA              @T1P 18190000
         AGO   .SDEND                       END MACRO PROCESSING   @T1P 18200000
.*                                                                      18210000
.*                                                                      18220000
.*                                                                      18230000
.********************* STANDARD FORM ********************************** 18240000
.*                                                                      18250000
.*       STANDARD FORM EXPANSION STARTS HERE.                           18260000
.*                                                             @G860P31 18270000
.********************************************************************** 18280000
.*                                                                      18290000
.*                                                                      18300000
.*                                                                      18310000
.STFORM  ANOP                                                           18320000
&GNAME   SETC  'IHB'.'&SYSNDX'              OBTAIN UNIQUE SYMBOL-LABEL  18330000
         CNOP  0,4                                                      18340000
         AIF   ('&NAME' EQ '').SDSTF10      IS NAME SPECIFIED           18350000
&NAME    DS    0F                                                       18360000
.SDSTF10 ANOP                                                           18370000
.*                                                                      18380000
.********************* STANDARD FORM ********************************** 18390000
.*                                                                      18400000
.*       BUILD PARAMETER LIST TEMPLATE AND BRANCH TO CODE.              18410000
.*                                                             @G860P31 18420000
.********************************************************************** 18430000
.*                                                                      18440000
         &LA   1,*+8                                                    18450000
         B     &GNAME                       BRANCH AROUND PARAM LIST    18460000
         DC    AL1(&SDFLAG0)                FLAG BYTE                   18470000
         DC    AL1(&SDFLAG1)                FLAG BYTE                   18480000
         DC    AL1(&SDATAF1)                FLAG BYTE                   18490000
         DC    AL1(&SDATAF2)                FLAG BYTE                   18500000
         DC    A(0)                         ADDRESS OF DCB              18510000
.*                                                                      18520000
.********************* STANDARD FORM ********************************** 18530000
.*                                                                      18540000
.*       CALCULATE ADDRESS OF STORAGE AND/OR HDR PARM AREA              18550000
.*                                                             @G860P31 18560000
.********************************************************************** 18570000
.*                                                                      18580000
         AIF   ('&STORAGE' EQ '').SDST110   STORAGE SPECIFIED? @G860P31 18590000
         DC    A(*-8+&DISP1)                ADDRESS OF STORAGE @G860P31 18600000
         AGO   .SDST111                     GO CHECK HDR       @G860P31 18610000
.SDST110 ANOP                                                  @G860P31 18620000
         DC    A(0)                         ADDRESS OF STORAGE LIST     18630000
.SDST111 AIF   ('&HDR' EQ '').SDST112       HDR SPECIFIED?     @G860P31 18640000
         DC    A(*-12+&DISP2)               ADDRESS OF HDR     @G860P31 18650000
         AGO   .SDST113                     GO CHECK HDR       @G860P31 18660000
.SDST112 ANOP                                                  @G860P31 18670000
         DC    A(0)                         ADDRESS OF HEADER RECORD    18680000
.SDST113 ANOP                               CONTINUE STANDARD  @G860P31 18690000
.*                                                                      18700000
.********************* STANDARD FORM ********************************** 18710000
.*                                                                      18720000
.*       CONTINUE STANDARD FORM EXPANSION AFTER HDR.                    18730000
.*                                                             @G860P31 18740000
.********************************************************************** 18750000
.*                                                                      18760000
         DC    A(0)                         ADDRESS OF ECB/SRB     @L4C 18770000
         DC    AL2(0)                       CURRENT ASID                18780000
         DC    AL2(0)                       OTHER ASID                  18790000
         DC    A(0)                         ADDRESS OF ASID LIST        18800000
.*                                                             @G33VPHD 18810000
         DC    A(0)                         ADDRESS OF SUMLIST          18820000
         DC    A(0)                         RESERVED           @G33VPHD 18830000
         DC    A(0)                         RESERVED           @G33VPHD 18840000
         DC    AL1(&SDFLAG2)                FLAG BYTE          @G383P1U 18850000
         DC    AL1(&SDCNTL1)                CONTROL FLAGS      @G860P31 18860000
         DC    AL1(&SDTYPF1)                TYPE FLAG BYTE     @G383P1U 18870000
         DC    AL1(&PLVER.)                 VERSION                @T1P 18880000
         DC    AL1(&SDATAF3)                EXIT FLAG BYTE     @G383P1U 18890000
         DC    AL1(&SDATAF4)                EXIT FLAG BYTE         @LEC 18900000
         DC    AL1(&SDAT3)                  SDATA OPTIONS          @T1P 18910000
         DC    AL1(0)                       RESERVED               @T1P 18920000
         DC    A(0)                         SUBPLST ADDRESS    @G860P31 18930000
         DC    A(0)                         KEYLIST ADDRESS    @G860P31 18940000
         DC    A(0)                         RESERVED           @G860P31 18950000
.*                                     RESERVED FOR SLIP       @G860P31 18960000
         DC    A(0)                    ALET OF DCB PARAMETER       @L3A 18970000
         DC    A(0)                    ALET OF STORAGE PARAM       @L3A 18980000
         DC    A(0)                    ALET OF HDR PARAMETER       @L3A 18990000
         DC    A(0)                    ALET OF ASIDLST PARAM       @L3A 19000000
         DC    A(0)                    ALET OF SUMLIST PARAM       @L3A 19010000
         DC    A(0)                    ALET OF SUBPLST PARAM       @L3A 19020000
         DC    A(0)                    ALET OF KEYLIST PARAM       @L3A 19030000
         DC    A(0)                    LISTD or LIST64 Address     @LFC 19040000
         DC    A(0)                    LISTD or LIST64 Alet        @LFC 19050000
         DC    A(0)                    SUMLSTL or SUMLIST64 Addr   @LFC 19060000
         DC    A(0)                    SUMLSTL or SUMLIST64 Alet   @LFC 19070000
         AIF   ('&PLVER' EQ '2').SDSTP2                            @T1M 19080000
         AIF   ('&PLVER' EQ '3').SDSTP2                            @LBA 19090000
         DC    2A(0)                        RESERVED               @T3C 19100000
         AGO   .SDSTP99                SKIP PLISTVER >= 2          @T1P 19110000
.SDSTP2  ANOP                          PLISTVER=2 OR HIGHER        @T1P 19120000
         DC    2A(0)                        PSWREGS                @T1P 19130000
         DC    2A(0)                        SYMREC                 @T1P 19140000
         AIF   ('&ID' EQ '').SDSTP00        ID SPECIFIED?          @T1P 19150000
         DC    A(IHB&SYSNDX.I)              ADDRESS OF ID          @T1P 19160000
         DC    A(0)                         ALET OF ID             @T1P 19170000
         AGO   .SDSTP01                     ONWARD                 @T1P 19180000
.SDSTP00 ANOP                                                      @T1P 19190000
         DC    2A(0)                        ID                     @T1P 19200000
.SDSTP01 ANOP                                                      @T1P 19210000
         AIF   ('&PLVER' EQ '3').SDSTP3                            @LBA 19220000
         AGO   .SDSTP99                SKIP PLISTVER >= 3          @LBA 19230000
.SDSTP3  ANOP                          PLISTVER=3 OR HIGHER        @LBA 19240000
         DC    2A(0)                   STRLIST                     @LBA 19250000
         DC    2A(0)                   INTOKEN                     @LCA 19260000
         DC    2A(0)                   REMOTE                      @LCA 19270000
         DC    2A(0)                   PROBDESC                    @LCA 19280000
         DC    2A(0)                   JOBLIST                     @LCA 19290000
         DC    2A(0)                   DSPLIST                     @LCA 19300000
         DC    AL1(&SDUFLAG3)          SDUMP Control Flags         @LFA 19310000
         DC    XL3'0'                  AVAILABLE                   @LHC 19320000
         DC    A(0)                    UTOKEN                      @LHA 19330000
.SDSTP99 ANOP                                                      @T1P 19340000
.*                                                                      19350000
.********************* STANDARD FORM ********************************** 19360000
.*                                                                      19370000
.*    RESERVE SPACE FOR STORAGE, HDR, ID PARAMETER                      19380000
.*                                                                 @T1P 19390000
.********************************************************************** 19400000
.*                                                                      19410000
         AIF   ('&STORAGE' EQ '').SDSTF20   IS STORAGE SPECIFIED        19420000
&CTR1    SETA  N'&STORAGE                   NUMBER OF STORAGE ADDRESSES 19430000
         DC    &CTR1.F'0'                   STORAGE ADDRESSES           19440000
.SDSTF20 ANOP                                                           19450000
         AIF   ('&HDR' EQ '').SDSTF30       IS HDR SPECIFIED            19460000
&CTR1    SETA  K'&HDR-2-&HDRCTR             LENGTH OF USER DATA         19470000
         DC    AL1(&CTR1)                   LENGTH OF USER DATA         19480000
         DC    C&HDR                        USER DATA                   19490000
.*       CNOP  2,4                                                      19500000
.SDSTF30 ANOP                                                           19510000
         AIF   ('&ID' EQ '').SDSTF41        IS ID SPECIFIED        @T1P 19520000
&CTR1    SETA  K'&ID-2-&IDCTR               LENGTH OF USER DATA    @T1P 19530000
&TEMP    SETC  'IHB&SYSNDX.I'                                      @T1P 19540000
&TEMP    DC    AL1(&CTR1)                   LENGTH OF USER DATA    @T1P 19550000
         DC    C&ID                         USER DATA              @T1P 19560000
.SDSTF41 ANOP                                                      @T1P 19570000
&GNAME   DS    0H                                                       19580000
.*                                                                      19590000
.********************* STANDARD FORM ********************************** 19600000
.*                                                                      19610000
.*       STORE THE DCB ADDRESS INTO PARAMETER LIST .                    19620000
.*                                                             @G860P31 19630000
.********************************************************************** 19640000
.*                                                                      19650000
         AIF   ('&DCB' EQ '').SDSTF35       IS DCB SPECIFIED            19660000
         IHBSETR   &DCB,0                   ADDRESS OF DCB IN REG 0     19670000
         ST    0,4(0,1)                     SAVE DCB ADDRESS       @L3C 19680000
         AIF   ('&SYSASCE' EQ 'P').NOAR12                          @L3A 19690000
         STAM  0,0,60(1)              SAVE DCB ALET                @L3A 19700000
.NOAR12  ANOP                                                      @L3A 19710000
.*                                                                      19720000
.********************* STANDARD FORM ********************************** 19730000
.*                                                                      19740000
.*       PROCESS LIST, LISTA, STORAGE OR LISTD OPTION                   19750000
.*                                                                 @L6A 19760000
.********************************************************************** 19770000
.*                                                                      19780000
.SDSTF35 AIF   ('&LIST' EQ '').SDSTF37      IS LIST SPECIFIED  @G383P1U 19790000
         IHBSETR   &LIST,0                  ADDR OF STORAGE LIST IN R0  19800000
         ST    0,8(0,1)                     SAVE LIST ADDRESS      @L3C 19810000
         AIF   ('&SYSASCE' EQ 'P').NOAR13                          @L3A 19820000
         STAM  0,0,64(1)              SAVE LIST ALET               @L3A 19830000
.NOAR13  ANOP                                                      @L3A 19840000
         AGO   .SDSTF45                     CHECK FOR LISTD/LIST64 @LFC 19850000
.SDSTF37 AIF   ('&LISTA' EQ '').SDSTF40  IS LISTA SPECIFIED    @G383P1U 19860000
         IHBSETR   &LISTA,0                 LIST ADDR TO R0    @G383P1U 19870000
         ST    0,8(,1)                      STORE LISTA ADDR       @L3C 19880000
         AIF   ('&SYSASCE' EQ 'P').NOAR14                          @L3A 19890000
         STAM  0,0,64(1)              SAVE LISTA ALET              @L3A 19900000
.NOAR14  ANOP                                                      @L3A 19910000
         AGO   .SDSTF45                     CHECK FOR LISTD/LIST64 @LFC 19920000
.SDSTF40 AIF   ('&STORAGE' EQ '').SDSTF45   STORAGE ADDRESSES SPECIFIED 19930000
&CTR1    SETA  N'&STORAGE          NUMBER OF STORAGE ADDRESSES @G860P31 19940000
&CTR2    SETA  0                   POSITION COUNTER            @G860P31 19950000
&DISP    SETA  &DISP1-4            DISPLACEMENT OF THE STORAGE @G860P31 19960000
.*                                 ADDRESSES INTO THE PARAMETER LIST    19970000
.LOOPE1  ANOP                                                           19980000
&CTR2    SETA  &CTR2+1                 NUMBER OF ADDRESS WORKING ON     19990000
&DISP    SETA  &DISP+4                 DISP OF ADDRESS INTO LIST        20000000
         IHBSETR   &STORAGE(&CTR2),0        ADDRESS INTO R0             20010000
         ST    0,&DISP.(0,1)                SAVE STORAGE ADDR      @L3C 20020000
         AIF   ('&CTR1' NE '&CTR2').LOOPE1  ANY  MORE ADDRESSES         20030000
         OI    &DISP.(1),X'80'              END OF LIST INDICATOR       20040000
.* Process LISTD                                                        20050000
.SDSTF45 AIF   ('&LISTD' EQ '').SDSTF47  IS LISTD SPECIFIED?       @LFC 20060000
         IHBSETR   &LISTD,0              LISTD ADDRESS TO R0       @L6A 20070000
         ST    0,88(,1)               STORE LISTD IN PARM LIST     @L6A 20080000
         AIF   ('&SYSASCE' EQ 'P').NOAR14A                         @L6A 20090000
         STAM  0,0,92(1)                 SAVE LISTD ALET           @L6A 20100000
         AGO   .SDSTF50                  CHECK FOR USER PARAMETERS @L6A 20110000
.* Process LIST64.                                                      20120000
.SDSTF47 ANOP  ,                                                   @LFA 20130000
         AIF   ('&LIST64' EQ '').SDSTF50  IS LIST64 SPECIFIED?     @LFA 20140000
         IHBSETR   &LIST64,0          LIST64 ADDRESS TO R0         @LFA 20150000
         ST    0,88(,1)               STORE LIST64 IN PARM LIST    @LFA 20160000
         AIF   ('&SYSASCE' EQ 'P').NOAR14A                         @LFA 20170000
         STAM  0,0,92(1)                 SAVE LIST64 ALET          @LFA 20180000
.NOAR14A ANOP  ,                                                   @LFA 20190000
         AGO   .SDSTF50                  CHECK FOR USER PARAMETERS @LFA 20200000
.*                                                                      20210000
.********************* STANDARD FORM ********************************** 20220000
.*                                                                      20230000
.*       PROCESS HDRAD TO PLACE ADDRESS IN PARAMETER LIST.              20240000
.*       IF HDR WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE            20250000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       20260000
.*                                                             @G860P31 20270000
.********************************************************************** 20280000
.*                                                                      20290000
.SDSTF50 AIF   ('&HDRAD' EQ '').SDSTF70     IS HDRAD SPECIFIED @G860P31 20300000
         IHBSETR   &HDRAD,0                 ADDR OF USER DATA IN REG 0  20310000
         ST    0,12(0,1)         ADDR OF USER DATA INTO PARAM LST  @L3C 20320000
         AIF   ('&SYSASCE' EQ 'P').NOAR15                          @L3A 20330000
         STAM  0,0,68(1)              SAVE HDR ALET                @L3A 20340000
.NOAR15  ANOP                                                      @L3A 20350000
.*                                                                      20360000
.********************* STANDARD FORM ********************************** 20370000
.*                                                                      20380000
.*       PROCESS ECB OPTION.                                            20390000
.*                                                             @G860P31 20400000
.********************************************************************** 20410000
.*                                                                      20420000
.SDSTF70 AIF   ('&ECB' EQ '').SDSTF74       IS ECB SPECIFIED       @L4C 20430000
         AIF   (N'&ECB GT 1).SDSTF72 IS MORE THAN 1 PARM PRESENT   @L8A 20440000
         AIF   ('&ECB'(1,1) EQ '(').SDSTF71 IS ECB ADDR IN A REG   @L8C 20450000
         L     0,&ECB                       ADDRESS OF ECB              20460000
         ST    0,16(0,1)              ADDR OF ECB INTO PARAM LIST  @L3C 20470000
         AGO   .SDSTF80                     GO CHECK FOR ASID           20480000
.SDSTF71 ST    &ECB(1),16(0,1)        ADDR OF ECB INTO PARAM LIST  @L8C 20490000
         AGO   .SDSTF80                     GO CHECK FOR ASID      @L8A 20500000
.SDSTF72 AIF   ('&ECB(1)'(1,1) EQ '(').SDSTF73 IS THE ADDRESS OF THE   X20510000
               ECB IN A REGISTER                                   @L8A 20520000
         L     0,&ECB(1)                    ADDRESS OF ECB         @L8A 20530000
         ST    0,16(0,1)              ADDR OF ECB INTO PARAM LIST  @L8A 20540000
         AGO   .SDSTF80                     GO CHECK FOR ASID      @L8A 20550000
.SDSTF73 ST    &ECB(1,1),16(0,1)      ADDR OF ECB INTO PARAM LIST  @L8A 20560000
         AGO   .SDSTF80                     GO CHECK FOR ASID      @L8A 20570000
.********************* STANDARD FORM ********************************** 20580000
.*                                                                      20590000
.*       PROCESS SRB OPTION.                                            20600000
.*                                                                 @L4A 20610000
.********************************************************************** 20620000
.*                                                                 @L4A 20630000
.SDSTF74 AIF   ('&SRB' EQ '').SDSTF80       IS SRB SPECIFIED       @L4A 20640000
         AIF   (N'&SRB GT 1).SDSTF76 IS MORE THAN 1 PARM PRESENT   @L8A 20650000
         AIF   ('&SRB'(1,1) EQ '(').SDSTF75 IS SRB ADDR IN A REG   @L8C 20660000
         L     0,&SRB                       ADDRESS OF SRB         @L4A 20670000
         ST    0,16(0,1)              ADDR OF SRB INTO PARAM LIST  @L4A 20680000
         AGO   .SDSTF80                     GO CHECK FOR ASID      @L4A 20690000
.SDSTF75 ST    &SRB(1),16(0,1)        ADDR OF SRB INTO PARAM LIST  @L8C 20700000
         AGO   .SDSTF80                     GO CHECK FOR ASID      @L8A 20710000
.SDSTF76 AIF   ('&SRB(1)'(1,1) EQ '(').SDSTF77 IS THE ADDRESS OF THE   X20720000
               SRB IN A REGISTER                                   @L8A 20730000
         L     0,&SRB(1)                    ADDRESS OF SRB         @L8A 20740000
         ST    0,16(0,1)              ADDR OF SRB INTO PARAM LIST  @L8A 20750000
         AGO   .SDSTF80                     GO CHECK FOR ASID      @L8A 20760000
.SDSTF77 ST    &SRB(1,1),16(0,1)      ADDR OF SRB INTO PARAM LIST  @L8A 20770000
.*                                                                 @L4A 20780000
.*                                                                      20790000
.********************* STANDARD FORM ********************************** 20800000
.*                                                                      20810000
.*       PROCESS ASID OR ASIDLST OPTION.                                20820000
.*                                                             @G860P31 20830000
.********************************************************************** 20840000
.*                                                                      20850000
.SDSTF80 AIF   ('&ASID' EQ '').SDSTF90      IS ASID SPECIFIED           20860000
         AIF   ('&ASID'(1,1) EQ '(').SDSTF82     IS ASID IN A REGISTER  20870000
         LH    0,&ASID                      ASID OF MEMORY TO BE DUMPED 20880000
         STH   0,22(0,1)              ASID INTO PARAMETER LIST     @L3C 20890000
         AGO   .SDSTF90                     GO CHECK FOR BRANCH ENTRY   20900000
.SDSTF82 ANOP                                                           20910000
         STH   &ASID,22(0,1)          ASID INTO PARAMETER LIST     @L3C 20920000
.SDSTF90 AIF   ('&ASIDLST' EQ '').SDSTF93  IS ASIDLIST SPECIFIED        20930000
.*                                                             @G33VPHD 20940000
         IHBSETR   &ASIDLST,0           ADDR OF ASIDLIST IN R0          20950000
.*                                                             @G33VPHD 20960000
         ST    0,24(,1)                 ADDR ASIDLIST INTO PARM LIST   *20970000
                                                                   @L3C 20980000
         AIF   ('&SYSASCE' EQ 'P').NOAR16                          @L3A 20990000
         STAM  0,0,72(1)              SAVE ASIDLST ALET            @L3A 21000000
.NOAR16  ANOP                                                      @L3A 21010000
.*                                                                      21020000
.********************* STANDARD FORM ********************************** 21030000
.*                                                                      21040000
.*       PROCESS SUMLIST OR SUMLSTA OPTION.                             21050000
.*                                                             @G860P31 21060000
.********************************************************************** 21070000
.*                                                                      21080000
.SDSTF93 AIF   ('&SUMLIST' EQ '').SDSTF94 IS SUMLIST SPECIFIED          21090000
         IHBSETR   &SUMLIST,0                                           21100000
         ST    0,28(,1)                                            @L3C 21110000
         AIF   ('&SYSASCE' EQ 'P').NOAR17                          @L3A 21120000
         STAM  0,0,76(1)              SAVE SUMLIST ALET            @L3A 21130000
.NOAR17  ANOP                                                      @L3A 21140000
         AGO   .SDSTF95                DONE SO DO ENTRY LOGIC  @G383P1U 21150000
.SDSTF94 AIF   ('&SUMLSTA' EQ '').SDSTF95  SUMLSTA SPECIFIED   @G383P1U 21160000
         IHBSETR   &SUMLSTA,0        GET SUMLSTA ADDR IN R0    @G383P1U 21170000
         ST    0,28(,1)              SUMLSTA ADDR TO PARM LIST     @L3C 21180000
         AIF   ('&SYSASCE' EQ 'P').NOAR18                          @L3A 21190000
         STAM  0,0,76(1)              SAVE SUMLSTA ALET            @L3A 21200000
.NOAR18  ANOP                                                      @L3A 21210000
.*                                                                      21220000
.********************* STANDARD FORM ********************************** 21230000
.*                                                                      21240000
.*       PROCESS SUBPLST AND KEYLIST OPTIONS.                           21250000
.*                                                             @G860P31 21260000
.********************************************************************** 21270000
.*                                                                      21280000
.SDSTF95 AIF   ('&SUBPLST' EQ '').SDSTF96 IS SUBPLST SPECIFIED @G860P31 21290000
         IHBSETR   &SUBPLST,0          LOAD SUBPLST ADDRESS    @G860P31 21300000
         ST    0,48(,1)                STORE SUBPLST ADDRESS       @L3C 21310000
         AIF   ('&SYSASCE' EQ 'P').NOAR19                          @L3A 21320000
         STAM  0,0,80(1)              SAVE SUBPLST ALET            @L3A 21330000
.NOAR19  ANOP                                                      @L3A 21340000
         AIF   ('&KEYLIST' EQ '').SDSTF96 IS KEYLIST SPECIFIED @G860P31 21350000
         IHBSETR   &KEYLIST,0          LOAD KEYLIST ADDRESS    @G860P31 21360000
         ST    0,52(0,1)               STORE KEYLIST ADDRESS       @L3C 21370000
         AIF   ('&SYSASCE' EQ 'P').NOAR20                          @L3A 21380000
         STAM  0,0,84(1)              SAVE KEYLIST ALET            @L3A 21390000
.NOAR20  ANOP                                                      @L3A 21400000
.*                                                                      21410000
.********************* STANDARD FORM ********************************** 21420000
.*                                                                      21430000
.*       PROCESS SUMLSTL & SUMLIST64 OPTIONS                            21440000
.*                                                                 @LFC 21450000
.********************************************************************** 21460000
.*                                                                      21470000
.* SUMLISTL                                                             21480000
.SDSTF96 ANOP                                                      @L5A 21490000
         AIF   ('&SUMLSTL' EQ '').SDSTF9X IS SUMLSTL SPECIFIED?    @LFC 21500000
         IHBSETR   &SUMLSTL,0          LOAD SUMLSTL ADDRESS        @L5A 21510000
         ST    0,96(0,1)              STORE SUMLSTL ADDRESS        @L5A 21520000
         AIF   ('&SYSASCE' EQ 'P').NOAR21                          @L5A 21530000
         STAM  0,0,100(1)             SAVE SUMLSTL ALET            @L5A 21540000
.NOAR21  ANOP                                                      @L5A 21550000
         AGO   .SDSTM00               SUMLSTL/SUMLIST64 done       @LFC 21560000
.* SUMLIST64                                                            21570000
.SDSTF9X ANOP                                                      @L5A 21580000
         AIF   ('&SUMLIST64' EQ '').SDSTM00 IS SUMLIST64 SPECIFIED @LFA 21590000
         IHBSETR   &SUMLIST64,0       LOAD SUMLIST64 ADDRESS       @LFA 21600000
         ST    0,96(0,1)              STORE SUMLIST64 ADDRESS      @LFA 21610000
         AIF   ('&SYSASCE' EQ 'P').NOAR21X                         @LFA 21620000
         STAM  0,0,100(1)             SAVE SUMLIST64 ALET          @LFA 21630000
.NOAR21X ANOP  ,                                                   @LFA 21640000
.*                                                                      21650000
.********************* STANDARD FORM ********************************** 21660000
.*                                                                      21670000
.*       PROCESS PSWREGS OPTION.                                        21680000
.*                                                             @G860P31 21690000
.********************************************************************** 21700000
.*                                                                      21710000
.SDSTM00 AIF   ('&PSWREGS' EQ '').SDSTM01 IS PSWREGS SPECIFIED     @T1P 21720000
         IHBSETR   &PSWREGS,0                                      @T1P 21730000
         ST    0,104(0,1)                   SAVE PSWREG ADDR       @T1P 21740000
         AIF   ('&SYSASCE' EQ 'P').NOAR26                          @T3A 21750000
         STAM  0,0,108(1)                   SAVE PSWREG ALET       @T3A 21760000
.NOAR26  ANOP                                                      @T3A 21770000
.*                                                                      21780000
.********************* STANDARD FORM ********************************** 21790000
.*                                                                      21800000
.*       PROCESS SYMREC  OPTION.                                        21810000
.*                                                             @G860P31 21820000
.********************************************************************** 21830000
.*                                                                      21840000
.SDSTM01 AIF   ('&SYMREC' EQ '').SDSTM02 IS SYMREC SPECIFIED       @T1P 21850000
         IHBSETR   &SYMREC,0                                       @T1P 21860000
         ST    0,112(0,1)                   SAVE SYMREC ADDR       @T1P 21870000
         AIF   ('&SYSASCE' EQ 'P').NOAR27                          @T3A 21880000
         STAM  0,0,116(1)                   SAVE SYMREC ALET       @T3A 21890000
.NOAR27  ANOP                                                      @T3A 21900000
.********************* STANDARD FORM ********************************** 21910000
.*                                                                      21920000
.*       PROCESS IDAD TO PLACE ADDRESS IN PARAMETER LIST.               21930000
.*       IF ID WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE             21940000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       21950000
.*                                                                 @T1P 21960000
.********************************************************************** 21970000
.*                                                                      21980000
.SDSTM02 AIF   ('&IDAD' EQ '').SDST300      IS IDAD SPECIFIED      @LBC 21990000
         IHBSETR   &IDAD,0                  ADDR ID DATA IN R0     @T1P 22000000
         ST    0,120(0,1)                   SAVE IDAD ADDR         @T1P 22010000
         AIF   ('&SYSASCE' EQ 'P').NOAR28                          @T3A 22020000
         STAM  0,0,124(1)                   SAVE IDAD ALET         @T3A 22030000
.NOAR28  ANOP                                                      @T3A 22040000
.*                                                                      22050000
.********************* STANDARD FORM ********************************** 22060000
.*                                                                      22070000
.*       PROCESS STRLIST TO PLACE ADDRESS IN PARAMETER LIST.            22080000
.*       IF STRLIST WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE        22090000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       22100000
.*                                                                 @LBA 22110000
.********************************************************************** 22120000
.*                                                                      22130000
.SDST300 AIF   ('&STRLIST' EQ '').SDST301   IS STRLIST SPECIFIED   @LBA 22140000
         IHBSETR   &STRLIST,0               ADDR STRLIST IN R0     @LBA 22150000
         ST    0,128(0,1)                   SAVE STRLIST ADDR      @LBA 22160000
         AIF   ('&SYSASCE' EQ 'P').NOAR30                          @LBA 22170000
         STAM  0,0,132(1)                   SAVE STRLIST ALET      @LBA 22180000
.NOAR30  ANOP                                                      @LBA 22190000
.*                                                                      22200000
.********************* STANDARD FORM ********************************** 22210000
.*                                                                      22220000
.*       PROCESS INTOKEN TO PLACE ADDRESS IN PARAMETER LIST.            22230000
.*       IF INTOKEN WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE        22240000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       22250000
.*                                                                 @LCA 22260000
.********************************************************************** 22270000
.*                                                                      22280000
.SDST301 AIF   ('&INTOKEN' EQ '').SDST302   IS INTOKEN SPECIFIED   @LCA 22290000
         IHBSETR   &INTOKEN,0               ADDR INTOKEN IN R0     @LCA 22300000
         ST    0,136(0,1)                   SAVE INTOKEN ADDR      @LCA 22310000
         AIF   ('&SYSASCE' EQ 'P').NOAR32                          @LCA 22320000
         STAM  0,0,140(1)                   SAVE INTOKEN ALET      @LCA 22330000
.NOAR32  ANOP                                                      @LCA 22340000
.*                                                                      22350000
.********************* STANDARD FORM ********************************** 22360000
.*                                                                      22370000
.*       PROCESS REMOTE TO PLACE ADDRESS IN PARAMETER LIST.             22380000
.*       IF REMOTE WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE         22390000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       22400000
.*                                                                 @LCA 22410000
.********************************************************************** 22420000
.*                                                                      22430000
.SDST302 AIF   ('&REMOTE' EQ '').SDST303    IS REMOTE SPECIFIED    @LCA 22440000
         IHBSETR   &REMOTE,0                ADDR REMOTE IN R0      @LCA 22450000
         ST    0,144(0,1)                   SAVE REMOTE ADDR       @LCA 22460000
         AIF   ('&SYSASCE' EQ 'P').NOAR34                          @LCA 22470000
         STAM  0,0,148(1)                   SAVE REMOTE ALET       @LCA 22480000
.NOAR34  ANOP                                                      @LCA 22490000
.*                                                                      22500000
.********************* STANDARD FORM ********************************** 22510000
.*                                                                      22520000
.*       PROCESS PROBDESC TO PLACE ADDRESS IN PARAMETER LIST.           22530000
.*       IF PROBDESC WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE       22540000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       22550000
.*                                                                 @LCA 22560000
.********************************************************************** 22570000
.*                                                                      22580000
.SDST303 AIF   ('&PROBDESC' EQ '').SDST304  IS PROBDESC SPECIFIED  @LCA 22590000
         IHBSETR   &PROBDESC,0              ADDR PROBDESC IN R0    @LCA 22600000
         ST    0,152(0,1)                   SAVE PROBDESC ADDR     @LCA 22610000
         AIF   ('&SYSASCE' EQ 'P').NOAR36                          @LCA 22620000
         STAM  0,0,156(1)                   SAVE PROBDESC ALET     @LCA 22630000
.NOAR36  ANOP                                                      @LCA 22640000
.*                                                                      22650000
.********************* STANDARD FORM ********************************** 22660000
.*                                                                      22670000
.*       PROCESS JOBLIST TO PLACE ADDRESS IN PARAMETER LIST.            22680000
.*       IF JOBLIST WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE        22690000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       22700000
.*                                                                 @LCA 22710000
.********************************************************************** 22720000
.*                                                                      22730000
.SDST304 AIF   ('&JOBLIST' EQ '').SDST305   IS JOBLIST SPECIFIED   @LCA 22740000
         IHBSETR   &JOBLIST,0               ADDR JOBLIST IN R0     @LCA 22750000
         ST    0,160(0,1)                   SAVE JOBLIST ADDR      @LCA 22760000
         AIF   ('&SYSASCE' EQ 'P').NOAR38                          @LCA 22770000
         STAM  0,0,164(1)                   SAVE JOBLIST ALET      @LCA 22780000
.NOAR38  ANOP                                                      @LCA 22790000
.*                                                                      22800000
.********************* STANDARD FORM ********************************** 22810000
.*                                                                      22820000
.*       PROCESS DSPLIST TO PLACE ADDRESS IN PARAMETER LIST.            22830000
.*       IF DSPLIST WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE        22840000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       22850000
.*                                                                 @LCA 22860000
.********************************************************************** 22870000
.*                                                                      22880000
.SDST305 AIF   ('&DSPLIST' EQ '').SDST306   IS DSPLIST SPECIFIED   @LCA 22890000
         IHBSETR   &DSPLIST,0               ADDR DSPLIST IN R0     @LCA 22900000
         ST    0,168(0,1)                   SAVE DSPLIST ADDR      @LCA 22910000
         AIF   ('&SYSASCE' EQ 'P').NOAR40                          @LCA 22920000
         STAM  0,0,172(1)                   SAVE DSPLIST ALET      @LCA 22930000
.NOAR40  ANOP                                                      @LCA 22940000
.*                                                                      22950000
.********************* STANDARD FORM ********************************** 22960000
.*                                                                      22970000
.*       PROCESS UTOKEN TO PLACE THE ADDRESS IN PARAMETER LIST.         22980000
.*       IF UTOKEN WAS SPECIFIED, THE ADDRESS IS ALREADY IN THE         22990000
.*       PARAMETER LIST BECAUSE THE MACRO GENERATES THE LOCATION.       23000000
.*                                                                      23010000
.*       NOTE THAT ALET IS NOT REQUIRED FOR UTOKEN, HENCE NOT SET. @LHA 23020000
.*                                                                      23030000
.********************************************************************** 23040000
.*                                                                      23050000
.SDST306 AIF   ('&UTOKEN' EQ '').SDST307   IS UTOKEN SPECIFIED     @LHA 23060000
         IHBSETR   &UTOKEN,0                ADDR UTOKEN IN R0      @LHA 23070000
         ST    0,180(0,1)                   SAVE UTOKEN ADDR       @LHA 23080000
.*                                                                      23090000
.SDST307 ANOP                                                      @LHA 23100000
.********************* STANDARD FORM ********************************** 23110000
.*                                                                      23120000
.*       STANDARD FORM CLOSEOUT.                                        23130000
.*                                                             @G860P31 23140000
.********************************************************************** 23150000
.*                                                                      23160000
.SDST999 AIF   ('&BRANCH' EQ 'YES').SDSTF99  BRANCH ENTRY          @T1P 23170000
.*                                                             @G33VPHD 23180000
         SVC   51                           INVOKE SVC DUMP VIA SVC     23190000
         AGO   .SDEND                       GO END MACRO PROCESSING     23200000
.SDSTF99 ANOP                                                           23210000
.*                                                             @G33VPHD 23220000
         AIF    ('&SYSAM64' NE 'YES').AM642                        @LFA 23230000
         MNOTE 8,'SDUMP ---> BRANCH=YES IS NOT VALID IN AMODE 64'  @LFA 23240000
.AM642   ANOP                                                      @LFA 23250000
         L     15,CVTPTR(0,0)               ADDRESS OF CVT       YM1995 23260000
         L     15,CVTSDMP-CVTMAP(15,0)      SVC DUMP ENTRY ADDR  YM1995 23270000
         BALR  14,15                        INVOKE SVC DUMP VIA BAL     23280000
         AGO   .SDEND                       GO END MACRO PROCESSING     23290000
.*                                                                      23300000
.*                                                                      23310000
.*                                                                      23320000
.********************************************************************** 23330000
.*                                                                      23340000
.*       ERROR MESSAGES                                                 23350000
.*                                                             @G860P31 23360000
.********************************************************************** 23370000
.*                                                                      23380000
.*                                                                      23390000
.MESG1   MNOTE 12,'REGISTER NOTATION INVALID W/MF=L'                    23400000
         MEXIT                                                          23410000
.MESG1A  MNOTE 12,'POSITIONAL PARAMETERS ARE NOT ALLOWED - &SYSLIST(1)' 23420000
.*                                                             @G860P1X 23430000
         MEXIT                                                          23440000
.MESG2A  MNOTE 12,'HDR AND HDRAD ARE MUTUALLY EXCLUSIVE'                23450000
         MEXIT                                                          23460000
.MESG2B  MNOTE 12,'STORAGE AND LIST ARE MUTUALLY EXCLUSIVE'             23470000
         MEXIT                                                          23480000
.MESG2C  MNOTE 12,'STORAGE AND LISTA ARE MUTUALLY EXCLUSIVE'   @G383P1U 23490000
         MEXIT                                                 @G383P1U 23500000
.MESG2D  MNOTE 12,'LIST AND LISTA ARE MUTUALLY EXCLUSIVE'      @G383P1U 23510000
         MEXIT                                                 @G383P1U 23520000
.MESG2E  MNOTE 12,'SUMLIST AND SUMLSTA ARE MUTUALLY EXCLUSIVE'     @P1C 23530000
         MEXIT                                                 @G383P1U 23540000
.MESG2F  MNOTE 12,'ID AND IDAD ARE MUTUALLY EXCLUSIVE'             @T1P 23550000
         MEXIT                                                 @G383P1U 23560000
.MESG2G  MNOTE 12,'LISTD AND LIST64 ARE MUTUALLY EXCLUSIVE'        @LFA 23570000
         MEXIT                                                     @LFA 23580000
.MESG2H  MNOTE 12,'SUMLSTL AND SUMLIST64 ARE MUTUALLY EXCLUSIVE'   @LFA 23590000
         MEXIT                                                     @LFA 23600000
.MESG3B  ANOP                                                      @L4A 23610000
         AIF (&SDECB NE 0).MESG3BE IF ECB SPECIFED, ISSUE ECB MNOTE@L4A 23620000
.MESG3BS MNOTE 12,'INVALID SRB SCHEDULE TIME SPECIFIED: &SRB(2)'   @L8C 23630000
         AGO   .MESG3BX                                            @L8C 23640000
.MESG3BE MNOTE 12,'INVALID ECB POST TIME SPECIFIED: &ECB(2)'       @L8C 23650000
.MESG3BX MNOTE 12,'VALID TIME SPECIFICATIONS ARE: CAPTURE OR WRITE'     23660000
.*                                                                 @L8A 23670000
         MEXIT                                                          23680000
.MESG3BO MNOTE 12,'ONLY TCBOWNS MAY BE SPECIFIED: &ECB(3)'         @02A 23683000
         MEXIT                                                     @02A 23686000
.MESG4A  MNOTE 12,'INVALID SDATA OPERAND SPECIFIED &SDATA(&CTR2)'       23690000
         MEXIT                                                          23700000
.MESG4B  MNOTE 12,'INVALID BUFFER OPERAND SPECIFIED &BUFFER'            23710000
         MEXIT                                                          23720000
.MESG4C  MNOTE 12,'INVALID BRANCH OPERAND SPECIFIED &BRANCH'            23730000
         MEXIT                                                          23740000
.MESG4D  MNOTE 12,'INVALID QUIESCE OPERAND SPECIFIED &QUIESCE'          23750000
         MEXIT                                                 @G383P1U 23760000
.MESG4E  MNOTE 12,'INVALID TYPE OPERAND SPECIFIED &TYPE(&CTR2)'         23770000
.*                                                             @G383P1U 23780000
         MEXIT                                                 @G383P1U 23790000
.MESG4F  MNOTE 12,'MUTUALLY EXCLUSIVE TYPE OPERANDS: XMEM AND XMEME'    23800000
.*                                                             @G38AP31 23810000
         MEXIT                                                 @G38AP31 23820000
.MESG5A  MNOTE 12,'ASID OPERAND INVALID W/MF=L'                         23830000
         MEXIT                                                          23840000
.MESG5B  MNOTE 12,'ECB OPERAND INVALID W/MF=L'                          23850000
         MEXIT                                                          23860000
.MESG5C  MNOTE 12,'BRANCH OPERAND INVALID W/MF=L'                       23870000
         MEXIT                                                          23880000
.MESG5D  MNOTE 12,'ASIDLST OPERAND INVALID W/MF=L'                      23890000
         MEXIT                                                          23900000
.MESG5E  MNOTE 12,'MISSING PARAMETER LIST ADDRESS WITH MF=(E,ADDR)'     23910000
.*                                                             @G860P31 23920000
         MEXIT                                                          23930000
.MESG5F  MNOTE 12,'SRB OPERAND INVALID W/MF=L'                          23940000
.*                                                                 @L4A 23950000
         MEXIT                                                     @L4A 23960000
.MESG6   MNOTE 12,'ODD NUMBER OF STORAGE ADDRESSES'                     23970000
         MEXIT                                                          23980000
.MESG7   MNOTE 12,'MACRO FORM IS INVALID'                               23990000
         MEXIT                                                          24000000
.MESG8   MNOTE 12,'USER DATA TOO LONG'                                  24010000
         MEXIT                                                          24020000
.MESG8I  MNOTE 12,'LENGTH OF ID OPERAND IS TOO LONG'               @T1P 24030000
         MEXIT                                                     @T1P 24040000
.MESG9   MNOTE 12,'INITIAL CHARACTER OF HDR OPERAND NOT AN APOSTROPHE'  24050000
         MEXIT                                                          24060000
.MESG9I  MNOTE 12,'INITIAL CHARACTER OF ID OPERAND NOT AN APOSTROPHE'  *24070000
                                                                   @T1P 24080000
         MEXIT                                                     @T1P 24090000
.*                                                             @G33VPHD 24100000
.MESG9A  MNOTE 12,'INVALID HDR SPECIFICATION'                           24110000
         MEXIT                                                          24120000
.MESG9AI MNOTE 12,'INVALID ID SPECIFICATION'                       @T1P 24130000
         MEXIT                                                     @T1P 24140000
.*                                                             @G860P31 24150000
.MESG10  MNOTE 12,'MUTUALLY EXCLUSIVE OPERANDS: ASID AND ASIDLST'       24160000
.*                                                             @G33VPHD 24170000
         MEXIT                                                          24180000
.*                                                             @G33VPHD 24190000
.MESG11  MNOTE 12,'MUTUALLY EXCLUSIVE OPERANDS: SUMDUMP/SUM AND NOSUMDUX24200000
               MP/NOSUM'                                                24210000
.*                                                             @G33VPHD 24220000
         MEXIT                                                          24230000
.*                                                             @G33VPHD 24240000
.MESG12  MNOTE 12,'MUTUALLY EXCLUSIVE OPERANDS:SQA AND NOSQA'           24250000
.*                                                             @G33VPHD 24260000
         MEXIT                                                          24270000
.*                                                             @G33VPHD 24280000
.MESG13  MNOTE 12,'MUTUALLY EXCLUSIVE OPERANDS: ALLPSA AND NOALLPSA'    24290000
.*                                                             @G33VPHD 24300000
         MEXIT                                                          24310000
.MESG13B MNOTE 12,'MUTUALLY EXCLUSIVE OPERANDS: SRB AND ECB'            24320000
.*                                                                 @L4A 24330000
         MEXIT                                                     @L4A 24340000
.*                                                             @G33VPHD 24350000
.MESG15  MNOTE 12,'NOSUMDUMP SPECIFIED WITH SUMLIST INVALID'   @G383P1U 24360000
         MEXIT                                                 @G383P1U 24370000
.MESG15A MNOTE 12,'NOSUMDUMP SPECIFIED WITH SUMLSTA INVALID'   @G383P1U 24380000
         MEXIT                                                 @G386P31 24390000
.MESG15B MNOTE 12,'NOSUMDUMP SPECIFIED WITH SUMLSTL INVALID'       @L5A 24400000
         MEXIT                                                     @L5A 24410000
.MESG15C MNOTE 12,'NOSUMDUMP SPECIFIED WITH SUMLIST64 INVALID'     @LFA 24420000
         MEXIT                                                     @LFA 24430000
.MESG16A MNOTE 12,'INVALID SUSPEND OPERAND SPECIFIED &SUSPEND' @G386P31 24440000
         MEXIT                                                 @G386P31 24450000
.MESG16B MNOTE 12,'BRANCH=YES IS REQUIRED WITH SUSPEND=YES'    @G386P31 24460000
         MEXIT                                                 @G386P31 24470000
.MESG16C MNOTE 12,'SDATA=NOSUM/NOSUMDUMP INVALID WITH SUSPEND=YES'      24480000
.*                                                             @G386P31 24490000
         MEXIT                                                          24500000
.MESG17A MNOTE 12,'SUBPLST REQUIRED WITH KEYLIST'              @G860P31 24510000
.SDEND   MEXIT                                                          24520000
         MEND                                                           24530000
* */                                                                    24540000
* SDUMPX: MACRO KEYS(HDR,HDRAD,DCB,ASID,ASIDLST,ECB,SDATA,STORAGE,      24550000
*           LIST,SUMLIST,BUFFER,QUIESCE,BRANCH,LISTA,TYPE,SUMLSTA,      24560000
*           SUSPEND,SUBPLST,KEYLIST,MF,RETCODE,RELATED,SRB,SUMLSTL,     24570000
*           LISTD,LIST64,SUMLIST64,                          /* @LFC*/  24580000
*           PLISTVER,ID,IDAD,SYMREC,PSWREGS,STRLIST,         /* @LBC*/  24590000
*           JOBLIST, DSPLIST,UTOKEN,                         /* @LHC*/  24600000
*           INTOKEN, REMOTE, PROBDESC);                      /* @LCC*/  24610000
*                                                                       24620000
* ANS('?'!!MACLABEL!!'SDUMPXP '!!MACLIST!!MACKEYS!!';');                24630000
* %END SDUMPX;                                                          24640000
