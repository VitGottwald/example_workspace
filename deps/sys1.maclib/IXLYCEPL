*                                                                       00001000
* %DCL IXLYCEPL_INCLUDED CHAR EXT;                                      00002000
* %DEACTIVATE IXLYCEPL_INCLUDED;                                        00003000
* %IF IXLYCEPL_INCLUDED = '' %THEN                                      00004000
* %DO;                                                                  00005000
*/* Macro made bi-lingual on 18014. CBGEN compile date 15295         */ 00006000
*% /*                                                                   00007000
         MACRO                                                          00008000
         IXLYCEPL &DSECT=YES,&LIST=YES,&TITLE=YES,&CEPL=YES,           *00009000
               &CEPLENT=COND                                            00010000
         GBLC  &IXLYCEPL_INCLUDED                                       00011000
         GBLC  &ZCBPRINT                                                00012000
&IXLYCEPL_INCLUDED SETC 'YES'                                           00013000
         AIF   ('&LIST' EQ 'NONE').P0                                   00014000
         AIF   ('&TITLE' EQ 'NO').P5                                    00015000
 TITLE   'IXLYCEPL  - Contention Exit Parameter List                  '*00016000
                                                                        00017000
.P5      ANOP                                                           00018000
**/ IXLYCEPL_1:;                                                        00019000
*/* START OF SPECIFICATIONS ******************************************* 00020000
*                                                                       00021000
*01* PROPRIETARY STATEMENT:                                             00022000
*                                                                       00023000
*    LICENSED MATERIALS - PROPERTY OF IBM                               00024000
*    5650-ZOS COPYRIGHT IBM CORP. 1993, 2017                            00025000
*                                                                       00026000
*01* STATUS = HBB77B0                                                   00027000
*                                                                       00028000
*01* EXTERNAL CLASSIFICATION: GUPI                                      00029000
*01* END OF EXTERNAL CLASSIFICATION:                                    00030000
*                                                                       00031000
*02* ACRONYM:  CEPL                                                     00032000
*                                                                       00033000
*01* DESCRIPTIVE NAME: Contention Exit Parameter List                   00034000
*                                                                       00035000
*01* MACRO NAME: IXLYCEPL                                               00036000
*                                                                       00037000
*01* DSECT NAME:                                                        00038000
*     CEPL                                                              00039000
*     CEPLENT                                                           00040000
*                                                                       00041000
*01* COMPONENT:  Cross System Extended Services (SCIXL)                 00042000
*                                                                       00043000
*01* EYE-CATCHER:  NONE                                                 00044000
*                                                                       00045000
*01* STORAGE ATTRIBUTES:                                                00046000
*02*  SUBPOOL:  205                                                     00047000
*02*  KEY:  Key 0                                                       00048000
*02*  RESIDENCY:  Above 16 MB in virtual storage.                       00049000
*                                                                       00050000
*01* SIZE:  88 bytes + 420*CEPLENT# + length of resource name           00051000
*            CEPL    -- X'0058' bytes                                   00052000
*            CEPLENT -- X'01A4' bytes                                   00053000
*                                                                       00054000
*01* CREATED BY: IXLRQCEI                                               00055000
*                                                                       00056000
*01* POINTED TO BY:                                                     00057000
*     First word in parameter list provided to contention exit          00058000
*                                                                       00059000
*01* SERIALIZATION:                                                     00060000
*     None required                                                     00061000
*                                                                       00062000
*01* FUNCTION: Maps parameter list to contention exit interface to      00063000
*              connected user.                                          00064000
*                                                                       00065000
*01* METHOD OF ACCESS:                                                  00066000
*02*  ASM:   IXLYCEPL USING on CEPL and CEPLENT                         00067000
*                                                                       00068000
*02*  PL/AS: %INCLUDE SYSLIB(IXLYCEPL)                                  00069000
*                                                                       00070000
*01* DELETED BY: IXLRQCEI                                               00071000
*                                                                       00072000
*01* FREQUENCY: One for resolution of contention on a resource          00073000
*               name basis.                                             00074000
*                                                                       00075000
*01* DEPENDENCIES: Include IXLYCON                                      00076000
*                                                                       00077000
*01* DISTRIBUTION LIBRARY: AMACLIB                                      00078000
*                                                                       00079000
*01* CHANGE-ACTIVITY:                                                   00080000
*     $L0=SYSLKSRQ HBB5510 900112 PD00XB:  XES Support                  00081000
*     $D1=DIGxxxxx HBB5510 910920 PD00T8:  Increase size of userdata to 00082000
*                                          64 bytes                     00083000
*     $D2=DIG0039  HBB5510 930325 PD00EO:  Add Record data support      00084000
*     $P1=PIG5178  HBB5510 940314 PD00EO:  Performance                  00085000
*     $P1=PIG5392  HBB5510 940624 PD00EO:  Documentation Update         00086000
*     $P2=PN70769  HBB5520 940615 PD00LA:  Change comp stmt in prolog   00087000
*     $O1=OW14164  HBB5510 950801 PD00EO:  Defer Contention Exit        00088000
*                                          during rebuild support       00089000
*     $L1=LCKHANG  HBB77A0 140527 PD00WK:  Scrubbed                     00090000
*     $P3=154622   HBB77B0 170127 PD00WK:  Update CepleGrt comment      00091000
*                                                                       00092000
* NOTES: This control block must end on a doubleword boundary.          00093000
*                                                                       00094000
*                                                                       00095000
*END OF SPECIFICATIONS ***********************************************/ 00096000
*% /*                                                                   00097000
.P0      ANOP                                                           00098000
         AIF   ('&ZCBPRINT' EQ 'NO').P1                                 00099000
         AIF   ('&LIST' EQ 'YES').P2                                    00100000
.P1      ANOP                                                           00101000
         PUSH  PRINT                                                    00102000
         PRINT OFF                                                      00103000
.P2      ANOP                                                           00104000
         AIF   ('&CEPL' EQ 'NO').L0002                                  00105000
         AIF   ('&DSECT' EQ 'YES').L0003                                00106000
         AIF   ('&CEPL' NE 'YES').L0002                                 00107000
CEPL     DS    0D        Contention exit parameter list                 00108000
         AGO   .L0004                                                   00109000
.L0003   ANOP                                                           00110000
CEPL     DSECT           Contention exit parameter list                 00111000
.L0004   ANOP                                                           00112000
CEPLCONTOKEN DS CL16     Connect token identifying the connected user  *00113000
                         who has been chosen by XES to manage this     *00114000
                         instance of resource contention (i.e. the     *00115000
                         connector whose contention exit is executing)  00116000
CEPLCONDATA DS CL8       Connect-time data of the connector whose      *00117000
                         contention exit is driven. This field is user *00118000
                         defined data provided as input to IXLCONN.     00119000
CEPLRNAME@ DS  A         Name of the Resource for which the Contention *00120000
                         exit is executing. Please note, the Resource  *00121000
                         Name along with the Hash Value serves to      *00122000
                         fully qualify an IXLLOCK Resource              00123000
CEPLRNAMELEN DS F        Length of Resource Name                        00124000
CEPLHASHVAL DS F         Hash value of the Resource for which the      *00125000
                         Contention Exit is executing. Please note,    *00126000
                         the Hash Value along with the Resource Name   *00127000
                         fully qualifies an IXLLOCK Resource            00128000
CEPLWORK DS    CL32      Contention Exit Work area. Please note, this  *00129000
                         area is initialized to zero upon the first    *00130000
                         entry to the Contention Exit. Any updates     *00131000
                         will persist between invocations of the exit  *00132000
                         until this instance of Contention management  *00133000
                         has ceased.                                    00134000
CEPLNEW@ DS    A         Address of the entry on the Resource Request  *00135000
                         queue for a new, pending request that has not *00136000
                         been previously presented to the exit. This   *00137000
                         field is only valid when a new request is     *00138000
                         present on the queue (i.e. CEPLNEW#=1). The   *00139000
                         new entry is mapped by CEPLENT                 00140000
CEPLFLAGS DS   0BL2      Informational Flags                            00141000
CEPLREASONFLAGS DS 0B    Flags indicating the Reason for which the     *00142000
                         exit has been given control                    00143000
CEPLRECOVERY EQU X'80'   Recovery scenario.This flag will be set to ON *00144000
                         on the initial invocation of the exit when    *00145000
                         contention management responsibilities have   *00146000
                         been assigned due to the connector who was    *00147000
                         previously assigned these duties having       *00148000
                         failed or disconnected. This flag will also   *00149000
                         be set ON when a connector with an interest   *00150000
                         in the resource (other than the contention    *00151000
                         manager) has failed or disconnected such that *00152000
                         its entry has been removed                     00153000
CEPLNOTIFYRESPONSE EQU X'40' Contention Exit is being invoked to       *00154000
                         present the results of executing Notify Exits *00155000
                         of selected resource owners as requested by   *00156000
                         the previous invocation of this exit. No new  *00157000
                         requests will be present on the resource      *00158000
                         request queue when the exit is being driven   *00159000
                         for this.                                      00160000
CEPLGRANTFAILED EQU X'20' XES was unable to grant one or more requests *00161000
                         as instructed by the previous invocation of   *00162000
                         this exit. The resource request queue is      *00163000
                         updated to reflect the results of the failing *00164000
                         requests(s). If a failed request was an       *00165000
                         attempt to obtain ownership of a resource     *00166000
                         (i.e. failed IXLLOCK REQUEST(OBTAIN)), the    *00167000
                         resultant request queue will not contain an   *00168000
                         entry for the failed request. Any requests to *00169000
                         execute the Notify exits of resource owners    00170000
*                        during the previous invocation of this exit   *00171000
                         will have been cancelled as a result of the   *00172000
                         failed attempt to grant a request. No New     *00173000
                         requests will be present during this          *00174000
                         invocation of the exit                         00175000
CEPLRESTARTAFTERDEFER EQU X'10' This flag is ON during the initial     *00176000
                         invocation of the contention exit after it    *00177000
                         has been deferred for rebuild processing      *00178000
                         (i.e. the exit has been restarted after       *00179000
                         rebuild). Please see the documentation for    *00180000
                         contention exit return code                   *00181000
                         IxlRcContExitRebuildDefer in mapping macro    *00182000
                         IXLYCON for more details on deferring a       *00183000
                         contention exit during rebuild processing.    *00184000
                         Please note, the content of the Contention     00185000
*                        Exit Parameter list during this invocation of *00186000
                         the exit will be identical to the Contention  *00187000
                         Exit parameter list that was presented to the *00188000
                         previous invocation of the exit (i.e. the     *00189000
                         invocation which requested that processing be *00190000
                         deferred) with the following exceptions...    *00191000
                         (1) Any work area updates that were made      *00192000
                         during the previous invocation of the exit    *00193000
                         will have been preserved (2) A connector      *00194000
                         whose interest in this resource was reflected  00195000
*                        on the resource request queue during the      *00196000
                         previous invocation of the exit may no longer *00197000
                         be represented due to recovery processing     *00198000
                         (i.e. the connector failed or disconnected    *00199000
                         and cleanup has occurred). Note, the          *00200000
                         CeplRecovery flag will be ON if cleanup has   *00201000
                         occurred.                                      00202000
         ORG   CEPLREASONFLAGS+1                                        00203000
CEPLMISCFLAGS DS 0B      Miscellaneous informational flags              00204000
CEPLREBUILD EQU X'80'    Resource in contention is for the new         *00205000
                         structure during the rebuild process.          00206000
CEPLREBUILDORIG EQU X'40' Resource in contention is for the original   *00207000
                         structure during the rebuild process.          00208000
         ORG   CEPLFLAGS+2                                              00209000
CEPLNEW# DS    H         Number of new requests present on the         *00210000
                         resource request queue. The resource request  *00211000
                         queue will contain at most one new request    *00212000
                         during any invocation of the exit. When this  *00213000
                         value is one, the new entry is pointed to by  *00214000
                         CeplNew                                        00215000
CEPLENT@ DS    A         Address of the first entry on the resource    *00216000
                         request queue. Each entry is mapped by        *00217000
                         CEPLENT and contains a pointer to any         *00218000
                         subsequent entries. This field could possibly *00219000
                         contain the same value as the CeplNew          00220000
CEPLENT# DS    F         Number of entries on the resource request     *00221000
                         queue. Please note, this value could          *00222000
                         potentially be zero.                           00223000
CEPLRETCODE DS F         Contention exit return code. Values are       *00224000
                         defined in IXLYCON.                            00225000
CEPL_LEN EQU   *-CEPL                                                   00226000
.L0002   ANOP                                                           00227000
         AIF   ('&CEPLENT' EQ 'NO').L0005                               00228000
         AIF   ('&DSECT' EQ 'YES').L0006                                00229000
         AIF   ('&CEPLENT' NE 'YES').L0005                              00230000
CEPLENT  DS    0F        Mapping of Resource Request queue elements     00231000
         AGO   .L0007                                                   00232000
.L0006   ANOP                                                           00233000
CEPLENT  DSECT           Mapping of Resource Request queue elements     00234000
.L0007   ANOP                                                           00235000
CEPLENEXT DS   A         Output field indicating the address of next   *00236000
                         CEPLENT. This field will be zero if this is   *00237000
                         the last element                               00238000
CEPLECONVERSION DS CL4   Output field indicating the Version Number of *00239000
                         the connector whose interest in the resource  *00240000
                         for which the exit is being driven is         *00241000
                         reflected by this entry.                       00242000
         DS    CL5       Reserved                                       00243000
CEPLECONID DS  X         Output field indicating the Connector ID of   *00244000
                         the connector whose interest in the resource  *00245000
                         for which the exit is being driven is         *00246000
                         reflected by this entry                        00247000
         DS    CL6       Reserved                                       00248000
CEPLECONNAME DS CL16     Output field indicating the Connect name of   *00249000
                         the connector whose interest in the resource  *00250000
                         for which the exit is being driven is         *00251000
                         reflected by this entry                        00252000
         DS    CL16      Reserved                                       00253000
CEPLEWORK DS   CL32      Entry Work area. Input/Output field which is  *00254000
                         initialized to zero upon first presentation   *00255000
                         to the exit. This workarea is shared between  *00256000
                         this exit and the Notify exit of the          *00257000
                         connector represented by this entry.          *00258000
                         Specifically, if this exit requests that the  *00259000
                         Notify exit of the connector represented by   *00260000
                         this entry be executed (i.e. CepleNotify=ON), *00261000
                         the NEPLWork field will be initialized to the *00262000
                         value of this field. Similarly, any updates    00263000
*                        made to the NEPLWork field by the Notify exit *00264000
                         will be communicated to the Contention Exit   *00265000
                         via this field                                 00266000
CEPLEFLAGS DS  0CL4                                                     00267000
CEPLESTATUSFLAGS DS 0B   Output flags representing this connector's    *00268000
                         interest in the specified resource. The       *00269000
                         condition indicated by the flags within this  *00270000
                         field are NOT mutually exclusive and as such  *00271000
                         may be set to ON singularly or in combination  00272000
CEPLEOWNED EQU X'80'     Set to ON if the connector represented by     *00273000
                         this entry is an owner of the resource for    *00274000
                         which the Contention exit is being executed    00275000
CEPLEPENDING EQU X'40'   Set to ON if the entry contains information   *00276000
                         for a pending request. Specific information   *00277000
                         regarding the pending request is available in *00278000
                         the CepleReq field.                            00279000
         ORG   CEPLESTATUSFLAGS+1                                       00280000
CEPLEACTIONFLAGS DS 0B   Input flag bits indicating what actions,if    *00281000
                         any, should be taken against the              *00282000
                         resource/request. Please note, the            *00283000
                         CepleGrant, CepleDeny, and CepleRegrant flags *00284000
                         are mutually exclusive. If more than one of   *00285000
                         these mutually exclusive flags is specified,  *00286000
                         the first encountered in the bit string will  *00287000
                         take precedence (e.g., if CepleGrant and      *00288000
                         CepleDeny are both ON, XES will process it as *00289000
                         a request to grant).                           00290000
CEPLEGRANT EQU X'80'     Grant this pending request with the           *00291000
                         attributes reflected in the CepleGrt fields.  *00292000
                         If this field is set and this entry does NOT  *00293000
                         represent a pending request (i.e.             *00294000
                         CeplePending = OFF), this entry will be       *00295000
                         ignored.                                       00296000
CEPLEDENY EQU  X'40'     Deny this pending request. The value of the   *00297000
                         CepleGudata field will be presented to the    *00298000
                         requestor via the appropriate means as part   *00299000
                         of request completion. This ability to        *00300000
                         "Deny with Updated User Data" could           *00301000
                         potentially allow informational data, such as *00302000
                         why the request was denied, to be transported *00303000
                         to the requestor. The values of the           *00304000
                         CepleGState and CepleGRdata are ignored when  *00305000
                         this option us used. If this field is set and  00306000
*                        this entry does NOT represent a pending       *00307000
                         request (i.e. CeplePending = OFF), this entry *00308000
                         will be ignored.                               00309000
CEPLEREGRANT EQU X'20'   Regrant the resource with the State and User  *00310000
                         data that are reflected in the appropriate    *00311000
                         CepleGrt fields. The current value of the     *00312000
                         Record data may not be changed via the        *00313000
                         regrant function and, as such, the value of   *00314000
                         the CepleGRData field is ignored when this    *00315000
                         option is specified. If this field is set and *00316000
                         this entry does NOT represent an owned        *00317000
                         resource (i.e. CepleOwned = OFF), this entry  *00318000
                         will be ignored.                               00319000
CEPLENOTIFY EQU X'10'    Execute the Notify Exit of the resource owner *00320000
                         who is reflected by this entry. If this field *00321000
                         is specified and this entry does NOT          *00322000
                         represent an owned resource (i.e. CepleOwned  *00323000
                         = OFF), this entry will be ignored.            00324000
         ORG   CEPLEACTIONFLAGS+1                                       00325000
         DS    CL2       Reserved                                       00326000
CEPLEHELDREQ DS 0CL200   Held/Requested Info                            00327000
CEPLEHELD DS   0CL68     Ownership information. The ownership          *00328000
                         information is only valid if this entry       *00329000
                         represents an owned resource as indicated by  *00330000
                         the CepleOwned flag being ON                   00331000
CEPLEHSTATE DS X         Output field indicating the State in which    *00332000
                         the connector whose interest is reflected by  *00333000
                         this entry currently owns the specified       *00334000
                         resource. Valid values for this field are     *00335000
                         provided via constants in the IXLYCON macro   *00336000
                         in the form of IXLSTATE....                    00337000
CEPLEHUDATA DS CL64      Output field indicating the User data         *00338000
                         associated with the owned resource             00339000
         DS    CL3       Reserved                                       00340000
CEPLEREQ DS    0CL132    Pending Request information                    00341000
CEPLERSTATE DS X         Output field indicating the State in which    *00342000
                         the connecter whose interest is reflected by  *00343000
                         this entry desires to own the specified       *00344000
                         resource. Valid values for this field are     *00345000
                         provided via constants in the IXLYCON macro   *00346000
                         in the form of IXLSTATExxxx. If this entry    *00347000
                         does not represent a pending request          *00348000
                         (CeplePending=OFF) this area will be          *00349000
                         initialized to the value of CepleHState.       00350000
CEPLERUDATA DS CL64      Output field indicating the User Data value   *00351000
                         in which the connector whose interest is      *00352000
                         reflected by this entry desires to have       *00353000
                         associated with the specified resource. If    *00354000
                         this entry does not represent a pending       *00355000
                         request (CeplePending=OFF) this area will be  *00356000
                         initialized to the value of CepleHUData.       00357000
         DS    CL3       Reserved                                       00358000
CEPLERRDATA DS CL64      Output area indicating the value that was     *00359000
                         specified via the RDATAVAL field on the       *00360000
                         pending IXLLOCK request. If this entry does   *00361000
                         not represent a pending request               *00362000
                         (CeplePending=OFF) or it represents an        *00363000
                         IXLLOCK request for which an RDATAVAL         *00364000
                         specification is not valid then this area     *00365000
                         will be initialized to zero.                   00366000
CEPLEGRT DS    0CL132    Grant/ReGrant input area. When CepleGrant=ON  *00367000
                         indicates state, user data and record data    *00368000
                         values in which to grant the request. When    *00369000
                         CepleReGrant=ON indicates state and user data *00370000
                         values in which to regrant the request.       *00371000
                         Record data may not be updated for a regrant  *00372000
                         and is ignored when specified. This field     *00373000
                         will be initialized to CepleReq in all        *00374000
                         invocations of the Contention exit with the   *00375000
                         following exception: (1) On a response from    00376000
*                        Notify exits, the CepleGrt field will have    *00377000
                         the same contents as on the previous          *00378000
                         invocation of the Contention Exit. That is,   *00379000
                         within any instance of a contention exit      *00380000
                         communicating with the Notify Exit, the       *00381000
                         CepleGrt field will persist                    00382000
CEPLEGSTATE DS X         Granted ownership state, Constants in IXLYCON  00383000
CEPLEGUDATA DS CL64      Granted user data                              00384000
         DS    CL3       Reserved                                       00385000
CEPLEGRDATA DS CL64      Granted Record Data                            00386000
CEPLENT_LEN EQU *-CEPLENT                                               00387000
.L0005   ANOP                                                           00388000
         AIF   ('&ZCBPRINT' EQ 'NO').P3                                 00389000
         AIF   ('&LIST' EQ 'YES').P4                                    00390000
.P3      ANOP                                                           00391000
         POP   PRINT                                                    00392000
.P4      ANOP                                                           00393000
.P_EXIT  ANOP                                                           00394000
         MEND                                                           00395000
**/ IXLYCEPL_2:;                                                        00396000
* %IXLYCEPL_INCLUDED = 'YES';                                           00397000
* %DCL ZCBPRINT CHAR EXT;                                               00398000
* %DEACTIVATE ZCBPRINT;                                                 00399000
* %DCL IXLYCEPL_LIST CHAR EXT;                                          00400000
* %DEACTIVATE IXLYCEPL_LIST;                                            00401000
* %IF IXLYCEPL_LIST ^= 'NO' &                                           00402000
*    ZCBPRINT ^= 'NO' %THEN                                             00403000
*   %GOTO IXLYCEPL_3;                                                   00404000
*   @LIST PUSH NOECHO;                                                  00405000
*   @LIST NOASSEMBLE NOECHO;                                            00406000
*   @LIST OFF C NOECHO;                                                 00407000
* %IXLYCEPL_3:;                                                         00408000
*/* Start of PL/X Source                                             */ 00409000
* DCL 1 CEPL BASED,                 /* Contention exit parameter list   00410000
*                                                                    */ 00411000
*     2 CeplConToken CHAR(16),      /* Connect token identifying the    00412000
*                                      connected user who has been      00413000
*                                      chosen by XES to manage this     00414000
*                                      instance of resource contention  00415000
*                                      (i.e. the connector whose        00416000
*                                      contention exit is executing) */ 00417000
*     2 CeplConData CHAR(8),        /* Connect-time data of the         00418000
*                                      connector whose contention exit  00419000
*                                      is driven.  This field is user   00420000
*                                      defined data provided as input   00421000
*                                      to IXLCONN.                   */ 00422000
*     2 CeplRname@ PTR(31),         /* Name of the Resource for which   00423000
*                                      the Contention exit is           00424000
*                                      executing.  Please note, the     00425000
*                                      Resource Name along with the     00426000
*                                      Hash Value serves to fully       00427000
*                                      qualify an IXLLOCK Resource   */ 00428000
*     2 CeplRnameLen FIXED(32),     /* Length of Resource Name       */ 00429000
*     2 CeplHashVal FIXED(32),      /* Hash value of the Resource for   00430000
*                                      which the Contention Exit is     00431000
*                                      executing.  Please note, the     00432000
*                                      Hash Value along with the        00433000
*                                      Resource Name fully qualifies an 00434000
*                                      IXLLOCK Resource              */ 00435000
*     2 CeplWork CHAR(32),          /* Contention Exit Work area.       00436000
*                                      Please note, this area is        00437000
*                                      initialized to zero upon the     00438000
*                                      first entry to the Contention    00439000
*                                      Exit.  Any updates will persist  00440000
*                                      between invocations of the exit  00441000
*                                      until this instance of           00442000
*                                      Contention management has        00443000
*                                      ceased.                       */ 00444000
*     2 CeplNew@ PTR(31),           /* Address of the entry on the      00445000
*                                      Resource Request queue for a     00446000
*                                      new, pending request that has    00447000
*                                      not been previously presented to 00448000
*                                      the exit.  This field is only    00449000
*                                      valid when a new request is      00450000
*                                      present on the queue (i.e.       00451000
*                                      CEPLNEW#=1).  The new entry is   00452000
*                                      mapped by CEPLENT             */ 00453000
*     2 CeplFlags Bit(16),          /* Informational Flags           */ 00454000
*       3 CeplReasonFlags Bit(8),   /* Flags indicating the Reason for  00455000
*                                      which the exit has been given    00456000
*                                      control                       */ 00457000
*        4 CeplRecovery Bit(1),     /* Recovery scenario.This flag will 00458000
*                                      be set to ON on the initial      00459000
*                                      invocation of the exit when      00460000
*                                      contention management            00461000
*                                      responsibilities have been       00462000
*                                      assigned due to the connector    00463000
*                                      who was previously assigned      00464000
*                                      these duties having failed or    00465000
*                                      disconnected. This flag will     00466000
*                                      also be set ON when a connector  00467000
*                                      with an interest in the resource 00468000
*                                      (other than the contention       00469000
*                                      manager) has failed or           00470000
*                                      disconnected such that its       00471000
*                                      entry has been removed        */ 00472000
*        4 CeplNotifyResponse Bit(1), /* Contention Exit is being       00473000
*                                      invoked to present the results   00474000
*                                      of executing Notify Exits of     00475000
*                                      selected resource owners as      00476000
*                                      requested by the previous        00477000
*                                      invocation of this exit.  No new 00478000
*                                      requests will be present on the  00479000
*                                      resource request queue when the  00480000
*                                      exit is being driven for this.   00481000
*                                                                    */ 00482000
*        4 CeplGrantFailed    Bit(1), /* XES was unable to grant one or 00483000
*                                      more requests as instructed by   00484000
*                                      the previous invocation of this  00485000
*                                      exit.  The resource request      00486000
*                                      queue is updated to reflect the  00487000
*                                      results of the failing           00488000
*                                      requests(s).  If a failed        00489000
*                                      request was an attempt to obtain 00490000
*                                      ownership of a resource (i.e.    00491000
*                                      failed IXLLOCK REQUEST(OBTAIN)), 00492000
*                                      the resultant request queue will 00493000
*                                      not contain an entry for the     00494000
*                                      failed request.  Any requests to 00495000
*                                      execute the Notify exits of      00496000
*                                      resource owners during the       00497000
*                                      previous invocation of this exit 00498000
*                                      will have been cancelled as a    00499000
*                                      result of the failed attempt to  00500000
*                                      grant a request.  No New         00501000
*                                      requests will be present during  00502000
*                                      this invocation of the exit   */ 00503000
*        4 CeplRestartAfterDefer Bit(1), /* This flag is ON during the  00504000
*                                      initial invocation of the        00505000
*                                      contention exit after it has     00506000
*                                      been deferred for rebuild        00507000
*                                      processing (i.e. the exit has    00508000
*                                      been restarted after rebuild).   00509000
*                                      Please see the documentation     00510000
*                                      for contention exit return code  00511000
*                                      IxlRcContExitRebuildDefer in     00512000
*                                      mapping macro IXLYCON for more   00513000
*                                      details on deferring a           00514000
*                                      contention exit during rebuild   00515000
*                                      processing. Please note, the     00516000
*                                      content of the Contention Exit   00517000
*                                      Parameter list during this       00518000
*                                      invocation of the exit will be   00519000
*                                      identical to the Contention      00520000
*                                      Exit parameter list that was     00521000
*                                      presented to the previous        00522000
*                                      invocation of the exit (i.e.     00523000
*                                      the invocation which requested   00524000
*                                      that processing be deferred)     00525000
*                                      with the following exceptions... 00526000
*                                      (1) Any work area updates that   00527000
*                                      were made during the previous    00528000
*                                      invocation of the exit will      00529000
*                                      have been preserved (2) A        00530000
*                                      connector whose interest in      00531000
*                                      this resource was reflected      00532000
*                                      on the resource request queue    00533000
*                                      during the previous invocation   00534000
*                                      of the exit may no longer be     00535000
*                                      represented due to recovery      00536000
*                                      processing (i.e. the connector   00537000
*                                      failed or disconnected and       00538000
*                                      cleanup has occurred). Note,     00539000
*                                      the CeplRecovery flag will be    00540000
*                                      ON if cleanup has occurred.      00541000
*                                                                @O1A*/ 00542000
*        4 * Bit(1),                /* Reserved for higher release      00543000
*                                      - do not use              @L1A*/ 00544000
*        4 * Bit(3),                /* Reserved                  @L1A*/ 00545000
*       3 CeplMiscFlags Bit(8),     /* Miscellaneous informational      00546000
*                                      flags                         */ 00547000
*        4 CeplRebuild   Bit(1),    /* Resource in contention is for    00548000
*                                      the new structure during the     00549000
*                                      rebuild process.              */ 00550000
*        4 CeplRebuildOrig Bit(1),  /* Resource in contention is for    00551000
*                                      the original structure during    00552000
*                                      the rebuild process.      @O1A*/ 00553000
*        4 *               Bit(6),  /* Reserved                  @O1A*/ 00554000
*     2 CeplNew# FIXED(16),         /* Number of new requests present   00555000
*                                      on the resource request queue.   00556000
*                                      The resource request queue will  00557000
*                                      contain at most one new request  00558000
*                                      during any invocation of the     00559000
*                                      exit.  When this value is one,   00560000
*                                      the new entry is pointed to by   00561000
*                                      CeplNew@                      */ 00562000
*     2 CeplEnt@ PTR(31),           /* Address of the first entry on    00563000
*                                      the resource request queue.      00564000
*                                      Each entry is mapped by CEPLENT  00565000
*                                      and contains a pointer to any    00566000
*                                      subsequent entries.  This field  00567000
*                                      could possibly contain the same  00568000
*                                      value as the CeplNew@         */ 00569000
*     2 CeplEnt# FIXED(32),         /* Number of entries on the         00570000
*                                      resource request queue.  Please  00571000
*                                      note, this value could           00572000
*                                      potentially be zero.         */  00573000
*     2 CeplRetCode Fixed(32),      /* Contention exit return code.     00574000
*                                      Values are defined in IXLYCON.   00575000
*                                                                    */ 00576000
*     2 * CHAR(0) Bdy(Dword);                                           00577000
*DCL CeplRname CHAR(*) BASED;       /* Resource name                 */ 00578000
*DCL 1 CeplEnt BASED,               /* Mapping of Resource Request      00579000
*                                      queue elements                */ 00580000
*     2 CepleNext PTR(31),          /* Output field indicating the      00581000
*                                      address of next CEPLENT.  This   00582000
*                                      field will be zero if this is    00583000
*                                      the last element              */ 00584000
*     2 CepleConVersion CHAR(4),    /* Output field indicating the      00585000
*                                      Version Number of the connector  00586000
*                                      whose interest in the resource   00587000
*                                      for which the exit is being      00588000
*                                      driven is reflected by this      00589000
*                                      entry.                        */ 00590000
*     2 *               CHAR(5),    /* Reserved                      */ 00591000
*     2 CepleConID      Fixed(8),   /* Output field indicating the      00592000
*                                      Connector ID of the connector    00593000
*                                      whose interest in the resource   00594000
*                                      for which the exit is being      00595000
*                                      driven is reflected by this      00596000
*                                      entry                         */ 00597000
*     2 *               CHAR(6),    /* Reserved                      */ 00598000
*     2 CepleConName CHAR(16),      /* Output field indicating the      00599000
*                                      Connect name of the connector    00600000
*                                      whose interest in the resource   00601000
*                                      for which the exit is being      00602000
*                                      driven is reflected by this      00603000
*                                      entry                         */ 00604000
*     2 * CHAR(16),                 /* Reserved                      */ 00605000
*     2 CepleWork CHAR(32),         /* Entry Work area.  Input/Output   00606000
*                                      field which is initialized to    00607000
*                                      zero upon first presentation to  00608000
*                                      the exit.  This workarea is      00609000
*                                      shared between this exit and the 00610000
*                                      Notify exit of the connector     00611000
*                                      represented by this entry.       00612000
*                                      Specifically, if this exit       00613000
*                                      requests that the Notify exit of 00614000
*                                      the connector represented by     00615000
*                                      this entry be executed (i.e.     00616000
*                                      CepleNotify=ON), the NEPLWork    00617000
*                                      field will be initialized to the 00618000
*                                      value of this field.  Similarly, 00619000
*                                      any updates made to the NEPLWork 00620000
*                                      field by the Notify exit will be 00621000
*                                      communicated to the Contention   00622000
*                                      Exit via this field           */ 00623000
*     2 CepleFlags Char(4),         /*                               */ 00624000
*       3 CepleStatusFlags Bit(8),  /* Output flags representing this   00625000
*                                      connector's interest in the      00626000
*                                      specified resource.  The         00627000
*                                      condition indicated by the flags 00628000
*                                      within this field are NOT        00629000
*                                      mutually exclusive and as such   00630000
*                                      may be set to ON singularly or   00631000
*                                      in combination                */ 00632000
*         4 CepleOwned BIT(1),      /* Set to ON if the connector       00633000
*                                      represented by this entry is an  00634000
*                                      owner of the resource for which  00635000
*                                      the Contention exit is being     00636000
*                                      executed                      */ 00637000
*         4 CeplePending BIT(1),    /* Set to ON if the entry contains  00638000
*                                      information for a pending        00639000
*                                      request.  Specific information   00640000
*                                      regarding the pending request is 00641000
*                                      available in the CepleReq field. 00642000
*                                                                    */ 00643000
*         4 * Bit(1),               /* Reserved for higher release      00644000
*                                      - do not use              @L1A*/ 00645000
*         4 * Bit(5),               /* Reserved                  @L1C*/ 00646000
*       3 CepleActionFlags Bit(8),  /* Input flag bits indicating what  00647000
*                                      actions,if any, should be taken  00648000
*                                      against the resource/request.    00649000
*                                      Please note, the CepleGrant,     00650000
*                                      CepleDeny, and CepleRegrant      00651000
*                                      flags are mutually exclusive.    00652000
*                                      If more than one of these        00653000
*                                      mutually exclusive flags is      00654000
*                                      specified, the first encountered 00655000
*                                      in the bit string will take      00656000
*                                      precedence (e.g., if CepleGrant  00657000
*                                      and CepleDeny are both ON, XES   00658000
*                                      will process it as a request to  00659000
*                                      grant).                       */ 00660000
*         4 CepleGrant BIT(1),      /* Grant this pending request with  00661000
*                                      the attributes reflected in the  00662000
*                                      CepleGrt fields.  If this field  00663000
*                                      is set and this entry does NOT   00664000
*                                      represent a pending request      00665000
*                                      (i.e.  CeplePending = OFF), this 00666000
*                                      entry will be ignored.        */ 00667000
*         4 CepleDeny BIT(1),       /* Deny this pending request.  The  00668000
*                                      value of the CepleGudata field   00669000
*                                      will be presented to the         00670000
*                                      requestor via the appropriate    00671000
*                                      means as part of request         00672000
*                                      completion.  This ability to     00673000
*                                      "Deny with Updated User Data"    00674000
*                                      could potentially allow          00675000
*                                      informational data, such as why  00676000
*                                      the request was denied, to be    00677000
*                                      transported to the requestor.    00678000
*                                      The values of the CepleGState    00679000
*                                      and CepleGRdata are ignored when 00680000
*                                      this option us used.  If this    00681000
*                                      field is set and this entry does 00682000
*                                      NOT represent a pending request  00683000
*                                      (i.e.  CeplePending = OFF), this 00684000
*                                      entry will be ignored.        */ 00685000
*         4 CepleRegrant BIT(1),    /* Regrant the resource with the    00686000
*                                      State and User data that are     00687000
*                                      reflected in the appropriate     00688000
*                                      CepleGrt fields.  The current    00689000
*                                      value of the Record data may not 00690000
*                                      be changed via the regrant       00691000
*                                      function and, as such, the value 00692000
*                                      of the CepleGRData field is      00693000
*                                      ignored when this option is      00694000
*                                      specified.  If this field is set 00695000
*                                      and this entry does NOT          00696000
*                                      represent an owned resource      00697000
*                                      (i.e.  CepleOwned = OFF), this   00698000
*                                      entry will be ignored.        */ 00699000
*         4 CepleNotify BIT(1),     /* Execute the Notify Exit of the   00700000
*                                      resource owner who is reflected  00701000
*                                      by this entry. If this field is  00702000
*                                      specified and this entry does    00703000
*                                      NOT represent an owned resource  00704000
*                                      (i.e.  CepleOwned = OFF), this   00705000
*                                      entry will be ignored.        */ 00706000
*         4 *           Bit(4),     /* Reserved                      */ 00707000
*       3 *             Char(2),    /* Reserved                      */ 00708000
*     2 CepleHeldReq,               /* Held/Requested Info           */ 00709000
*       3 CepleHeld,                /* Ownership information.  The      00710000
*                                      ownership information is only    00711000
*                                      valid if this entry represents   00712000
*                                      an owned resource as indicated   00713000
*                                      by the CepleOwned flag being ON  00714000
*                                                                    */ 00715000
*         4 CepleHState FIXED(8),   /* Output field indicating the      00716000
*                                      State in which the connector     00717000
*                                      whose interest is reflected by   00718000
*                                      this entry currently owns the    00719000
*                                      specified resource.  Valid       00720000
*                                      values for this field are        00721000
*                                      provided via constants in the    00722000
*                                      IXLYCON macro in the form of     00723000
*                                      IXLSTATE....                  */ 00724000
*         4 CepleHUdata CHAR(64),   /* Output field indicating the User 00725000
*                                      data associated with the owned   00726000
*                                      resource                      */ 00727000
*         4 *           Char(3),    /* Reserved                      */ 00728000
*       3 CepleReq,                 /* Pending Request information   */ 00729000
*         4 CepleRState FIXED(8),   /* Output field indicating the      00730000
*                                      State in which the connecter     00731000
*                                      whose interest is reflected by   00732000
*                                      this entry desires to own the    00733000
*                                      specified resource.  Valid       00734000
*                                      values for this field are        00735000
*                                      provided via constants in the    00736000
*                                      IXLYCON macro in the form of     00737000
*                                      IXLSTATExxxx.  If this entry     00738000
*                                      does not represent a pending     00739000
*                                      request (CeplePending=OFF) this  00740000
*                                      area will be initialized to the  00741000
*                                      value of CepleHState.         */ 00742000
*         4 CepleRUdata CHAR(64),   /* Output field indicating the User 00743000
*                                      Data value in which the          00744000
*                                      connector whose interest is      00745000
*                                      reflected by this entry desires  00746000
*                                      to have associated with the      00747000
*                                      specified resource.  If this     00748000
*                                      entry does not represent a       00749000
*                                      pending request                  00750000
*                                      (CeplePending=OFF) this area     00751000
*                                      will be initialized to the value 00752000
*                                      of CepleHUData.               */ 00753000
*         4 *           Char(3),    /* Reserved                      */ 00754000
*         4 CepleRRdata CHAR(64),   /* Output area indicating the value 00755000
*                                      that was specified via the       00756000
*                                      RDATAVAL field on the pending    00757000
*                                      IXLLOCK request.  If this entry  00758000
*                                      does not represent a pending     00759000
*                                      request (CeplePending=OFF) or it 00760000
*                                      represents an IXLLOCK request    00761000
*                                      for which an RDATAVAL            00762000
*                                      specification is not valid then  00763000
*                                      this area will be initialized to 00764000
*                                      zero.                         */ 00765000
*     2 CepleGrt,                   /* Grant/ReGrant input area.        00766000
*                                                                       00767000
*                                      When CepleGrant=ON indicates     00768000
*                                      state, user data and record      00769000
*                                      data values in which to grant    00770000
*                                      the request.                     00771000
*                                                                       00772000
*                                      When CepleReGrant=ON indicates   00773000
*                                      state and user data values in    00774000
*                                      which to regrant the request.    00775000
*                                      Record data may not be updated   00776000
*                                      for a regrant and is ignored     00777000
*                                      when specified.                  00778000
*                                                                       00779000
*                                      This field will be initialized   00780000
*                                      to CepleReq in all invocations   00781000
*                                      of the Contention exit with      00782000
*                                      the following exception:         00783000
*                                      (1) On a response from Notify    00784000
*                                        exits, the CepleGrt field      00785000
*                                        will have the same             00786000
*                                        contents as on the previous    00787000
*                                        invocation of the Contention   00788000
*                                        Exit. That is, within any      00789000
*                                        instance of a contention       00790000
*                                        exit communicating with the    00791000
*                                        Notify Exit, the CepleGrt      00792000
*                                        field will persist      @P3C*/ 00793000
*       3 CepleGState FIXED(8),     /* Granted ownership state,         00794000
*                                      Constants in IXLYCON          */ 00795000
*       3 CepleGUdata CHAR(64),     /* Granted user data             */ 00796000
*       3 *           Char(3),      /* Reserved                      */ 00797000
*       3 CepleGRdata CHAR(64);     /* Granted Record Data       @D2A*/ 00798000
*/* End of PL/X Source                                               */ 00799000
* %IF IXLYCEPL_LIST ^= 'NO' &                                           00800000
*    ZCBPRINT ^= 'NO' %THEN                                             00801000
*   %GOTO IXLYCEPL_4;                                                   00802000
*   @LIST POP NOECHO;                                                   00803000
* %IXLYCEPL_4:;                                                         00804000
* %END;                                                                 00805000
